<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>第 7 章 可视化（表与图） | 基于 R 的数据处理流程指南</title>
  <meta name="description" content="R快速查询工具指南" />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="第 7 章 可视化（表与图） | 基于 R 的数据处理流程指南" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="R快速查询工具指南" />
  <meta name="github-repo" content="nicheerfeng/git_book_ftidy" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="第 7 章 可视化（表与图） | 基于 R 的数据处理流程指南" />
  
  <meta name="twitter:description" content="R快速查询工具指南" />
  

<meta name="author" content="Teague Tian" />


<meta name="date" content="2022-09-29" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="image/favicon.ico" type="image/x-icon" />
<link rel="prev" href="id_06-Model-release-and-application.html"/>
<link rel="next" href="Common-statistical-R-code.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R Data Workflow</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>前言</a></li>
<li class="chapter" data-level="" data-path="author.html"><a href="author.html"><i class="fa fa-check"></i>作者简介</a>
<ul>
<li class="chapter" data-level="" data-path="author.html"><a href="author.html#学业及工作经历"><i class="fa fa-check"></i>学业及工作经历：</a></li>
<li class="chapter" data-level="" data-path="author.html"><a href="author.html#研究兴趣"><i class="fa fa-check"></i>研究兴趣：</a></li>
<li class="chapter" data-level="" data-path="author.html"><a href="author.html#已完成和正在研究的项目"><i class="fa fa-check"></i>已完成和正在研究的项目</a>
<ul>
<li class="chapter" data-level="" data-path="author.html"><a href="author.html#医学领域"><i class="fa fa-check"></i>医学领域：</a></li>
<li class="chapter" data-level="" data-path="author.html"><a href="author.html#生态学领域"><i class="fa fa-check"></i>生态学领域：</a></li>
<li class="chapter" data-level="" data-path="author.html"><a href="author.html#r工具开发"><i class="fa fa-check"></i>R工具开发：</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="Establish-analysis-objectives.html"><a href="Establish-analysis-objectives.html"><i class="fa fa-check"></i><b>1</b> 确立分析目标</a>
<ul>
<li class="chapter" data-level="1.1" data-path="Establish-analysis-objectives.html"><a href="Establish-analysis-objectives.html#基本逻辑"><i class="fa fa-check"></i><b>1.1</b> 基本逻辑</a></li>
<li class="chapter" data-level="1.2" data-path="Establish-analysis-objectives.html"><a href="Establish-analysis-objectives.html#数据分析的基本流程"><i class="fa fa-check"></i><b>1.2</b> 数据分析的基本流程</a></li>
<li class="chapter" data-level="1.3" data-path="Establish-analysis-objectives.html"><a href="Establish-analysis-objectives.html#工作处理经验"><i class="fa fa-check"></i><b>1.3</b> 工作处理经验</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="Establish-analysis-objectives.html"><a href="Establish-analysis-objectives.html#ppt汇报经验"><i class="fa fa-check"></i><b>1.3.1</b> PPT汇报经验：</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>数据准备</b></span></li>
<li class="chapter" data-level="2" data-path="Data-extraction.html"><a href="Data-extraction.html"><i class="fa fa-check"></i><b>2</b> 数据提取</a>
<ul>
<li class="chapter" data-level="2.1" data-path="Data-extraction.html"><a href="Data-extraction.html#数据提取的基本范式"><i class="fa fa-check"></i><b>2.1</b> 数据提取的基本范式</a></li>
<li class="chapter" data-level="2.2" data-path="Data-extraction.html"><a href="Data-extraction.html#数据导入与导出"><i class="fa fa-check"></i><b>2.2</b> 数据导入与导出</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="Data-extraction.html"><a href="Data-extraction.html#剪切板中处理数据"><i class="fa fa-check"></i><b>2.2.1</b> 剪切板中处理数据</a></li>
<li class="chapter" data-level="2.2.2" data-path="Data-extraction.html"><a href="Data-extraction.html#读取excle文件"><i class="fa fa-check"></i><b>2.2.2</b> 读取excle文件</a></li>
<li class="chapter" data-level="2.2.3" data-path="Data-extraction.html"><a href="Data-extraction.html#加速读取及导出常用数据"><i class="fa fa-check"></i><b>2.2.3</b> 加速读取及导出常用数据</a></li>
<li class="chapter" data-level="2.2.4" data-path="Data-extraction.html"><a href="Data-extraction.html#office格式及图片导出"><i class="fa fa-check"></i><b>2.2.4</b> OFFICE格式及图片导出</a></li>
<li class="chapter" data-level="2.2.5" data-path="Data-extraction.html"><a href="Data-extraction.html#在r中使用sql"><i class="fa fa-check"></i><b>2.2.5</b> 在R中使用sql</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="Data-preprocessing.html"><a href="Data-preprocessing.html"><i class="fa fa-check"></i><b>3</b> 数据预处理</a>
<ul>
<li class="chapter" data-level="3.1" data-path="Data-preprocessing.html"><a href="Data-preprocessing.html#数据抽取"><i class="fa fa-check"></i><b>3.1</b> 数据抽取</a></li>
<li class="chapter" data-level="3.2" data-path="Data-preprocessing.html"><a href="Data-preprocessing.html#数据清洗"><i class="fa fa-check"></i><b>3.2</b> 数据清洗</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="Data-preprocessing.html"><a href="Data-preprocessing.html#选择数据子集"><i class="fa fa-check"></i><b>3.2.1</b> 选择数据子集</a></li>
<li class="chapter" data-level="3.2.2" data-path="Data-preprocessing.html"><a href="Data-preprocessing.html#数据去重"><i class="fa fa-check"></i><b>3.2.2</b> 数据去重</a></li>
<li class="chapter" data-level="3.2.3" data-path="Data-preprocessing.html"><a href="Data-preprocessing.html#缺失值处理"><i class="fa fa-check"></i><b>3.2.3</b> 缺失值处理</a></li>
<li class="chapter" data-level="3.2.4" data-path="Data-preprocessing.html"><a href="Data-preprocessing.html#一致化处理-1"><i class="fa fa-check"></i><b>3.2.4</b> 一致化处理</a></li>
<li class="chapter" data-level="3.2.5" data-path="Data-preprocessing.html"><a href="Data-preprocessing.html#异常值处理-1"><i class="fa fa-check"></i><b>3.2.5</b> 异常值处理</a></li>
<li class="chapter" data-level="3.2.6" data-path="Data-preprocessing.html"><a href="Data-preprocessing.html#插值填补"><i class="fa fa-check"></i><b>3.2.6</b> 插值填补</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="Data-preprocessing.html"><a href="Data-preprocessing.html#数据重组与转换"><i class="fa fa-check"></i><b>3.3</b> 数据重组与转换</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="Data-preprocessing.html"><a href="Data-preprocessing.html#数据修改-数据增加与删除"><i class="fa fa-check"></i><b>3.3.1</b> 数据修改-数据增加与删除</a></li>
<li class="chapter" data-level="3.3.2" data-path="Data-preprocessing.html"><a href="Data-preprocessing.html#数据值重编码非列名"><i class="fa fa-check"></i><b>3.3.2</b> 数据值重编码（非列名）</a></li>
<li class="chapter" data-level="3.3.3" data-path="Data-preprocessing.html"><a href="Data-preprocessing.html#数据塑形"><i class="fa fa-check"></i><b>3.3.3</b> 数据塑形</a></li>
<li class="chapter" data-level="3.3.4" data-path="Data-preprocessing.html"><a href="Data-preprocessing.html#数据提取"><i class="fa fa-check"></i><b>3.3.4</b> 数据提取</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>模型拟合</b></span></li>
<li class="chapter" data-level="4" data-path="Model-building.html"><a href="Model-building.html"><i class="fa fa-check"></i><b>4</b> 构建模型</a>
<ul>
<li class="chapter" data-level="4.1" data-path="Model-building.html"><a href="Model-building.html#描述统计模型"><i class="fa fa-check"></i><b>4.1</b> 描述统计模型</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="Model-building.html"><a href="Model-building.html#快速构建描述性统计"><i class="fa fa-check"></i><b>4.1.1</b> 快速构建描述性统计</a></li>
<li class="chapter" data-level="4.1.2" data-path="Model-building.html"><a href="Model-building.html#高级分组统计"><i class="fa fa-check"></i><b>4.1.2</b> 高级分组统计</a></li>
<li class="chapter" data-level="4.1.3" data-path="Model-building.html"><a href="Model-building.html#常用统计函数"><i class="fa fa-check"></i><b>4.1.3</b> 常用统计函数</a></li>
<li class="chapter" data-level="4.1.4" data-path="Model-building.html"><a href="Model-building.html#批处理函数"><i class="fa fa-check"></i><b>4.1.4</b> 批处理函数</a></li>
<li class="chapter" data-level="4.1.5" data-path="Model-building.html"><a href="Model-building.html#broom优雅输出"><i class="fa fa-check"></i><b>4.1.5</b> BROOM优雅输出</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="Model-building.html"><a href="Model-building.html#复杂统计模型"><i class="fa fa-check"></i><b>4.2</b> 复杂统计模型</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="Model-building.html"><a href="Model-building.html#变量筛选"><i class="fa fa-check"></i><b>4.2.1</b> 变量筛选</a></li>
<li class="chapter" data-level="4.2.2" data-path="Model-building.html"><a href="Model-building.html#线性统计回归"><i class="fa fa-check"></i><b>4.2.2</b> 线性统计回归</a></li>
<li class="chapter" data-level="4.2.3" data-path="Model-building.html"><a href="Model-building.html#方差检验"><i class="fa fa-check"></i><b>4.2.3</b> 方差检验</a></li>
<li class="chapter" data-level="4.2.4" data-path="Model-building.html"><a href="Model-building.html#相关统计r包资源"><i class="fa fa-check"></i><b>4.2.4</b> 相关统计R包资源：</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="Model-building.html"><a href="Model-building.html#临床统计模型"><i class="fa fa-check"></i><b>4.3</b> 临床统计模型</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="Model-building.html"><a href="Model-building.html#平衡匹配"><i class="fa fa-check"></i><b>4.3.1</b> 平衡匹配</a></li>
<li class="chapter" data-level="4.3.2" data-path="Model-building.html"><a href="Model-building.html#生存分析"><i class="fa fa-check"></i><b>4.3.2</b> 生存分析</a></li>
<li class="chapter" data-level="4.3.3" data-path="Model-building.html"><a href="Model-building.html#补充r包"><i class="fa fa-check"></i><b>4.3.3</b> 补充R包</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="Model-building.html"><a href="Model-building.html#构造模型的辅助函数或参数"><i class="fa fa-check"></i><b>4.4</b> 构造模型的辅助函数或参数</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="Model-building.html"><a href="Model-building.html#常用参数"><i class="fa fa-check"></i><b>4.4.1</b> 常用参数</a></li>
<li class="chapter" data-level="4.4.2" data-path="Model-building.html"><a href="Model-building.html#查询线性模型结果"><i class="fa fa-check"></i><b>4.4.2</b> 查询线性模型结果</a></li>
<li class="chapter" data-level="4.4.3" data-path="Model-building.html"><a href="Model-building.html#r语言笔记.formula"><i class="fa fa-check"></i><b>4.4.3</b> R语言笔记.formula</a></li>
<li class="chapter" data-level="4.4.4" data-path="Model-building.html"><a href="Model-building.html#特征工程"><i class="fa fa-check"></i><b>4.4.4</b> 特征工程</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="Model-building.html"><a href="Model-building.html#深度学习"><i class="fa fa-check"></i><b>4.5</b> 深度学习</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="Model-building.html"><a href="Model-building.html#r-中执行keras"><i class="fa fa-check"></i><b>4.5.1</b> R 中执行keras</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="Model-building.html"><a href="Model-building.html#机器学习"><i class="fa fa-check"></i><b>4.6</b> 机器学习</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="Model-building.html"><a href="Model-building.html#机器学习--mlr3包"><i class="fa fa-check"></i><b>4.6.1</b> 机器学习 -mlr3包</a></li>
<li class="chapter" data-level="4.6.2" data-path="Model-building.html"><a href="Model-building.html#常规机器学习"><i class="fa fa-check"></i><b>4.6.2</b> 常规机器学习</a></li>
<li class="chapter" data-level="4.6.3" data-path="Model-building.html"><a href="Model-building.html#朴素贝叶斯"><i class="fa fa-check"></i><b>4.6.3</b> 朴素贝叶斯</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="Model-performance.html"><a href="Model-performance.html"><i class="fa fa-check"></i><b>5</b> 模型评估</a>
<ul>
<li class="chapter" data-level="5.1" data-path="Model-performance.html"><a href="Model-performance.html#模型评估辅助"><i class="fa fa-check"></i><b>5.1</b> 模型评估辅助：</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="Model-performance.html"><a href="Model-performance.html#purrr包的pluck函数字符提取"><i class="fa fa-check"></i><b>5.1.1</b> purrr包的pluck()函数字符提取</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="Model-performance.html"><a href="Model-performance.html#常用模型辅助评估r包"><i class="fa fa-check"></i><b>5.2</b> 常用模型辅助评估R包：</a></li>
</ul></li>
<li class="part"><span><b>模型展示</b></span></li>
<li class="chapter" data-level="6" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html"><i class="fa fa-check"></i><b>6</b> 模型发布与应用</a>
<ul>
<li class="chapter" data-level="6.1" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#flexboard"><i class="fa fa-check"></i><b>6.1</b> flexboard</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#安装工作环境"><i class="fa fa-check"></i><b>6.1.1</b> 安装工作环境</a></li>
<li class="chapter" data-level="6.1.2" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#多级导航模块"><i class="fa fa-check"></i><b>6.1.2</b> 多级导航模块</a></li>
<li class="chapter" data-level="6.1.3" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#超级链接表"><i class="fa fa-check"></i><b>6.1.3</b> 超级链接表</a></li>
<li class="chapter" data-level="6.1.4" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#给导航栏添加social-links"><i class="fa fa-check"></i><b>6.1.4</b> 给导航栏添加Social Links</a></li>
<li class="chapter" data-level="6.1.5" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#给导航栏添加source-code"><i class="fa fa-check"></i><b>6.1.5</b> 给导航栏添加Source Code</a></li>
<li class="chapter" data-level="6.1.6" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#给导航栏添加一个about"><i class="fa fa-check"></i><b>6.1.6</b> 给导航栏添加一个<code>about</code></a></li>
<li class="chapter" data-level="6.1.7" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#布局参数"><i class="fa fa-check"></i><b>6.1.7</b> 布局参数</a></li>
<li class="chapter" data-level="6.1.8" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#功能块参数"><i class="fa fa-check"></i><b>6.1.8</b> 功能块参数</a></li>
<li class="chapter" data-level="6.1.9" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#故事版"><i class="fa fa-check"></i><b>6.1.9</b> 故事版</a></li>
<li class="chapter" data-level="6.1.10" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#辅助dashboard展示参数"><i class="fa fa-check"></i><b>6.1.10</b> 辅助dashboard展示参数</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#shinydashboard"><i class="fa fa-check"></i><b>6.2</b> shinydashboard</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#基本框架和流程"><i class="fa fa-check"></i><b>6.2.1</b> 基本框架和流程</a></li>
<li class="chapter" data-level="6.2.2" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#仪表板的结构"><i class="fa fa-check"></i><b>6.2.2</b> 仪表板的结构</a></li>
<li class="chapter" data-level="6.2.3" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#布局参数-1"><i class="fa fa-check"></i><b>6.2.3</b> 布局参数</a></li>
<li class="chapter" data-level="6.2.4" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#在dashboard中使用css技巧"><i class="fa fa-check"></i><b>6.2.4</b> 在dashboard中使用css技巧</a></li>
<li class="chapter" data-level="6.2.5" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#适配于shiny的特殊函数"><i class="fa fa-check"></i><b>6.2.5</b> 适配于shiny的特殊函数</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#rmarkdown使用进阶"><i class="fa fa-check"></i><b>6.3</b> Rmarkdown使用进阶</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#参考书目"><i class="fa fa-check"></i><b>6.3.1</b> 参考书目</a></li>
<li class="chapter" data-level="6.3.2" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#title和autherymal"><i class="fa fa-check"></i><b>6.3.2</b> title和auther/YMAL</a></li>
<li class="chapter" data-level="6.3.3" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#字体与格式"><i class="fa fa-check"></i><b>6.3.3</b> 字体与格式</a></li>
<li class="chapter" data-level="6.3.4" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#辅助标记"><i class="fa fa-check"></i><b>6.3.4</b> 辅助标记</a></li>
<li class="chapter" data-level="6.3.5" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#常用代码标签"><i class="fa fa-check"></i><b>6.3.5</b> 常用代码标签</a></li>
<li class="chapter" data-level="6.3.6" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#非常用代码标签"><i class="fa fa-check"></i><b>6.3.6</b> 非常用代码标签</a></li>
<li class="chapter" data-level="6.3.7" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#快捷键"><i class="fa fa-check"></i><b>6.3.7</b> 快捷键</a></li>
<li class="chapter" data-level="6.3.8" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#标题修改"><i class="fa fa-check"></i><b>6.3.8</b> 标题修改</a></li>
<li class="chapter" data-level="6.3.9" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#图片处理"><i class="fa fa-check"></i><b>6.3.9</b> 图片处理</a></li>
<li class="chapter" data-level="6.3.10" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#表格输出"><i class="fa fa-check"></i><b>6.3.10</b> 表格输出</a></li>
<li class="chapter" data-level="6.3.11" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#结果输出"><i class="fa fa-check"></i><b>6.3.11</b> 结果输出</a></li>
<li class="chapter" data-level="6.3.12" data-path="id_06-Model-release-and-application.html"><a href="id_06-Model-release-and-application.html#补充知识点"><i class="fa fa-check"></i><b>6.3.12</b> 补充知识点</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="Visualization-Tables-Figures.html"><a href="Visualization-Tables-Figures.html"><i class="fa fa-check"></i><b>7</b> 可视化（表与图）</a>
<ul>
<li class="chapter" data-level="7.1" data-path="Visualization-Tables-Figures.html"><a href="Visualization-Tables-Figures.html#表格可视化"><i class="fa fa-check"></i><b>7.1</b> 表格可视化</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="Visualization-Tables-Figures.html"><a href="Visualization-Tables-Figures.html#快速图表可视化"><i class="fa fa-check"></i><b>7.1.1</b> 快速图表可视化</a></li>
<li class="chapter" data-level="7.1.2" data-path="Visualization-Tables-Figures.html"><a href="Visualization-Tables-Figures.html#编辑表"><i class="fa fa-check"></i><b>7.1.2</b> 编辑表</a></li>
<li class="chapter" data-level="7.1.3" data-path="Visualization-Tables-Figures.html"><a href="Visualization-Tables-Figures.html#静态表格优化展示"><i class="fa fa-check"></i><b>7.1.3</b> 静态表格优化展示</a></li>
<li class="chapter" data-level="7.1.4" data-path="Visualization-Tables-Figures.html"><a href="Visualization-Tables-Figures.html#动态表格优化展示"><i class="fa fa-check"></i><b>7.1.4</b> 动态表格优化展示</a></li>
<li class="chapter" data-level="7.1.5" data-path="Visualization-Tables-Figures.html"><a href="Visualization-Tables-Figures.html#描述性统计表格分析"><i class="fa fa-check"></i><b>7.1.5</b> 描述性统计表格分析</a></li>
<li class="chapter" data-level="7.1.6" data-path="Visualization-Tables-Figures.html"><a href="Visualization-Tables-Figures.html#统计结果表格可视化"><i class="fa fa-check"></i><b>7.1.6</b> 统计结果表格可视化</a></li>
<li class="chapter" data-level="7.1.7" data-path="Visualization-Tables-Figures.html"><a href="Visualization-Tables-Figures.html#补充表格包"><i class="fa fa-check"></i><b>7.1.7</b> 补充表格包</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="Visualization-Tables-Figures.html"><a href="Visualization-Tables-Figures.html#图形可视化"><i class="fa fa-check"></i><b>7.2</b> 图形可视化</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="Visualization-Tables-Figures.html"><a href="Visualization-Tables-Figures.html#画图参考网站"><i class="fa fa-check"></i><b>7.2.1</b> 画图参考网站</a></li>
<li class="chapter" data-level="7.2.2" data-path="Visualization-Tables-Figures.html"><a href="Visualization-Tables-Figures.html#免代码绘制"><i class="fa fa-check"></i><b>7.2.2</b> 免代码绘制</a></li>
<li class="chapter" data-level="7.2.3" data-path="Visualization-Tables-Figures.html"><a href="Visualization-Tables-Figures.html#统计辅助绘图"><i class="fa fa-check"></i><b>7.2.3</b> 统计辅助绘图</a></li>
<li class="chapter" data-level="7.2.4" data-path="Visualization-Tables-Figures.html"><a href="Visualization-Tables-Figures.html#base-plotggplot2"><i class="fa fa-check"></i><b>7.2.4</b> base-plot()/ggplot2()</a></li>
<li class="chapter" data-level="7.2.5" data-path="Visualization-Tables-Figures.html"><a href="Visualization-Tables-Figures.html#绘图"><i class="fa fa-check"></i><b>7.2.5</b> 绘图</a></li>
<li class="chapter" data-level="7.2.6" data-path="Visualization-Tables-Figures.html"><a href="Visualization-Tables-Figures.html#统计图形代码"><i class="fa fa-check"></i><b>7.2.6</b> 统计图形代码</a></li>
<li class="chapter" data-level="7.2.7" data-path="Visualization-Tables-Figures.html"><a href="Visualization-Tables-Figures.html#医学分析图"><i class="fa fa-check"></i><b>7.2.7</b> 医学分析图</a></li>
<li class="chapter" data-level="7.2.8" data-path="Visualization-Tables-Figures.html"><a href="Visualization-Tables-Figures.html#补充图形库"><i class="fa fa-check"></i><b>7.2.8</b> 补充图形库</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>工具箱</b></span></li>
<li class="chapter" data-level="8" data-path="Common-statistical-R-code.html"><a href="Common-statistical-R-code.html"><i class="fa fa-check"></i><b>8</b> 常用统计R代码</a>
<ul>
<li class="chapter" data-level="8.1" data-path="Common-statistical-R-code.html"><a href="Common-statistical-R-code.html#r-系统功能"><i class="fa fa-check"></i><b>8.1</b> R-系统功能</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="Common-statistical-R-code.html"><a href="Common-statistical-R-code.html#常用r系统代码"><i class="fa fa-check"></i><b>8.1.1</b> 常用R系统代码</a></li>
<li class="chapter" data-level="8.1.2" data-path="Common-statistical-R-code.html"><a href="Common-statistical-R-code.html#辅助r包"><i class="fa fa-check"></i><b>8.1.2</b> 辅助R包：</a></li>
<li class="chapter" data-level="8.1.3" data-path="Common-statistical-R-code.html"><a href="Common-statistical-R-code.html#常用系统脚本"><i class="fa fa-check"></i><b>8.1.3</b> 常用系统脚本</a></li>
<li class="chapter" data-level="8.1.4" data-path="Common-statistical-R-code.html"><a href="Common-statistical-R-code.html#s3和s4事件"><i class="fa fa-check"></i><b>8.1.4</b> S3和S4事件</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="Common-statistical-R-code.html"><a href="Common-statistical-R-code.html#r报错机制学习"><i class="fa fa-check"></i><b>8.2</b> R报错机制学习</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="Common-statistical-R-code.html"><a href="Common-statistical-R-code.html#常见异常处理函数"><i class="fa fa-check"></i><b>8.2.1</b> 1 常见异常处理函数</a></li>
<li class="chapter" data-level="8.2.2" data-path="Common-statistical-R-code.html"><a href="Common-statistical-R-code.html#stop"><i class="fa fa-check"></i><b>8.2.2</b> 2 STOP</a></li>
<li class="chapter" data-level="8.2.3" data-path="Common-statistical-R-code.html"><a href="Common-statistical-R-code.html#warning"><i class="fa fa-check"></i><b>8.2.3</b> 3 WARNING</a></li>
<li class="chapter" data-level="8.2.4" data-path="Common-statistical-R-code.html"><a href="Common-statistical-R-code.html#捕捉错误"><i class="fa fa-check"></i><b>8.2.4</b> 4 捕捉错误</a></li>
<li class="chapter" data-level="8.2.5" data-path="Common-statistical-R-code.html"><a href="Common-statistical-R-code.html#代码错误调试"><i class="fa fa-check"></i><b>8.2.5</b> 5 代码错误调试</a></li>
<li class="chapter" data-level="8.2.6" data-path="Common-statistical-R-code.html"><a href="Common-statistical-R-code.html#代码时间消耗跟踪"><i class="fa fa-check"></i><b>8.2.6</b> 6 代码时间消耗跟踪</a></li>
<li class="chapter" data-level="8.2.7" data-path="Common-statistical-R-code.html"><a href="Common-statistical-R-code.html#补充案例"><i class="fa fa-check"></i><b>8.2.7</b> 7 补充案例</a></li>
<li class="chapter" data-level="8.2.8" data-path="Common-statistical-R-code.html"><a href="Common-statistical-R-code.html#相关资料"><i class="fa fa-check"></i><b>8.2.8</b> 8 相关资料</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="Common-statistical-R-code.html"><a href="Common-statistical-R-code.html#常用快捷命令"><i class="fa fa-check"></i><b>8.3</b> 常用快捷命令</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="Common-statistical-R-code.html"><a href="Common-statistical-R-code.html#高效管道符号"><i class="fa fa-check"></i><b>8.3.1</b> 高效管道符号</a></li>
<li class="chapter" data-level="8.3.2" data-path="Common-statistical-R-code.html"><a href="Common-statistical-R-code.html#常用辅助函数"><i class="fa fa-check"></i><b>8.3.2</b> 常用辅助函数：</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="Common-statistical-R-code.html"><a href="Common-statistical-R-code.html#正则表达式"><i class="fa fa-check"></i><b>8.4</b> 正则表达式</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="Common-statistical-R-code.html"><a href="Common-statistical-R-code.html#常用正则表达式命令-1"><i class="fa fa-check"></i><b>8.4.1</b> 常用正则表达式命令-1</a></li>
<li class="chapter" data-level="8.4.2" data-path="Common-statistical-R-code.html"><a href="Common-statistical-R-code.html#常用正则表达式命令-2"><i class="fa fa-check"></i><b>8.4.2</b> 常用正则表达式命令-2</a></li>
<li class="chapter" data-level="8.4.3" data-path="Common-statistical-R-code.html"><a href="Common-statistical-R-code.html#量词"><i class="fa fa-check"></i><b>8.4.3</b> 量词</a></li>
<li class="chapter" data-level="8.4.4" data-path="Common-statistical-R-code.html"><a href="Common-statistical-R-code.html#捕获分组"><i class="fa fa-check"></i><b>8.4.4</b> 捕获分组</a></li>
<li class="chapter" data-level="8.4.5" data-path="Common-statistical-R-code.html"><a href="Common-statistical-R-code.html#python使用编译"><i class="fa fa-check"></i><b>8.4.5</b> python使用编译</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="Statistical-flow-of-clinical-medicine.html"><a href="Statistical-flow-of-clinical-medicine.html"><i class="fa fa-check"></i><b>9</b> 临床医学统计流</a>
<ul>
<li class="chapter" data-level="9.1" data-path="Statistical-flow-of-clinical-medicine.html"><a href="Statistical-flow-of-clinical-medicine.html#common.r"><i class="fa fa-check"></i><b>9.1</b> COMMON.R</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="Statistical-flow-of-clinical-medicine.html"><a href="Statistical-flow-of-clinical-medicine.html#加载r包和配置全局环境"><i class="fa fa-check"></i><b>9.1.1</b> 加载R包和配置全局环境</a></li>
<li class="chapter" data-level="9.1.2" data-path="Statistical-flow-of-clinical-medicine.html"><a href="Statistical-flow-of-clinical-medicine.html#使用officer来启动函数参数"><i class="fa fa-check"></i><b>9.1.2</b> 使用officer来启动函数参数：</a></li>
<li class="chapter" data-level="9.1.3" data-path="Statistical-flow-of-clinical-medicine.html"><a href="Statistical-flow-of-clinical-medicine.html#table-of-content"><i class="fa fa-check"></i><b>9.1.3</b> Table of content</a></li>
<li class="chapter" data-level="9.1.4" data-path="Statistical-flow-of-clinical-medicine.html"><a href="Statistical-flow-of-clinical-medicine.html#cover-template--封面"><i class="fa fa-check"></i><b>9.1.4</b> Cover template -封面</a></li>
<li class="chapter" data-level="9.1.5" data-path="Statistical-flow-of-clinical-medicine.html"><a href="Statistical-flow-of-clinical-medicine.html#快捷辅助函数"><i class="fa fa-check"></i><b>9.1.5</b> 快捷辅助函数：</a></li>
<li class="chapter" data-level="9.1.6" data-path="Statistical-flow-of-clinical-medicine.html"><a href="Statistical-flow-of-clinical-medicine.html#快捷统计函数"><i class="fa fa-check"></i><b>9.1.6</b> 快捷统计函数：</a></li>
<li class="chapter" data-level="9.1.7" data-path="Statistical-flow-of-clinical-medicine.html"><a href="Statistical-flow-of-clinical-medicine.html#描述性分析统计函数"><i class="fa fa-check"></i><b>9.1.7</b> 描述性分析统计函数</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="Statistical-flow-of-clinical-medicine.html"><a href="Statistical-flow-of-clinical-medicine.html#rawdata-cleaning-pipeline"><i class="fa fa-check"></i><b>9.2</b> Rawdata cleaning pipeline</a></li>
<li class="chapter" data-level="9.3" data-path="Statistical-flow-of-clinical-medicine.html"><a href="Statistical-flow-of-clinical-medicine.html#target_groups"><i class="fa fa-check"></i><b>9.3</b> target_groups</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="Statistical-flow-of-clinical-medicine.html"><a href="Statistical-flow-of-clinical-medicine.html#加载集成数据集"><i class="fa fa-check"></i><b>9.3.1</b> 加载集成数据集</a></li>
<li class="chapter" data-level="9.3.2" data-path="Statistical-flow-of-clinical-medicine.html"><a href="Statistical-flow-of-clinical-medicine.html#保存数据集"><i class="fa fa-check"></i><b>9.3.2</b> 保存数据集</a></li>
<li class="chapter" data-level="9.3.3" data-path="Statistical-flow-of-clinical-medicine.html"><a href="Statistical-flow-of-clinical-medicine.html#患者平衡匹配前后信息比较"><i class="fa fa-check"></i><b>9.3.3</b> 患者平衡匹配前后信息比较</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="Statistical-flow-of-clinical-medicine.html"><a href="Statistical-flow-of-clinical-medicine.html#dataset_for_analysis"><i class="fa fa-check"></i><b>9.4</b> dataset_for_analysis</a></li>
<li class="chapter" data-level="9.5" data-path="Statistical-flow-of-clinical-medicine.html"><a href="Statistical-flow-of-clinical-medicine.html#final_analysis"><i class="fa fa-check"></i><b>9.5</b> final_analysis</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="Statistical-books.html"><a href="Statistical-books.html"><i class="fa fa-check"></i><b>10</b> 统计书籍</a>
<ul>
<li class="chapter" data-level="10.1" data-path="Statistical-books.html"><a href="Statistical-books.html#r-统计书籍"><i class="fa fa-check"></i><b>10.1</b> R-统计书籍</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="Statistical-books.html"><a href="Statistical-books.html#tidyverse相关"><i class="fa fa-check"></i><b>10.1.1</b> tidyverse相关</a></li>
<li class="chapter" data-level="10.1.2" data-path="Statistical-books.html"><a href="Statistical-books.html#ggplo2相关-网站"><i class="fa fa-check"></i><b>10.1.2</b> ggplo2相关-网站</a></li>
<li class="chapter" data-level="10.1.3" data-path="Statistical-books.html"><a href="Statistical-books.html#绘图指南"><i class="fa fa-check"></i><b>10.1.3</b> 绘图指南</a></li>
<li class="chapter" data-level="10.1.4" data-path="Statistical-books.html"><a href="Statistical-books.html#绘图相关的博客"><i class="fa fa-check"></i><b>10.1.4</b> 绘图相关的博客</a></li>
<li class="chapter" data-level="10.1.5" data-path="Statistical-books.html"><a href="Statistical-books.html#医学指南相关"><i class="fa fa-check"></i><b>10.1.5</b> 医学指南相关</a></li>
<li class="chapter" data-level="10.1.6" data-path="Statistical-books.html"><a href="Statistical-books.html#医学统计r包"><i class="fa fa-check"></i><b>10.1.6</b> 医学统计R包</a></li>
<li class="chapter" data-level="10.1.7" data-path="Statistical-books.html"><a href="Statistical-books.html#医学统计相关博客"><i class="fa fa-check"></i><b>10.1.7</b> 医学统计相关博客</a></li>
<li class="chapter" data-level="10.1.8" data-path="Statistical-books.html"><a href="Statistical-books.html#统计指南-r代码实现"><i class="fa fa-check"></i><b>10.1.8</b> 统计指南-R代码实现</a></li>
<li class="chapter" data-level="10.1.9" data-path="Statistical-books.html"><a href="Statistical-books.html#数据建模相关"><i class="fa fa-check"></i><b>10.1.9</b> 数据建模相关</a></li>
<li class="chapter" data-level="10.1.10" data-path="Statistical-books.html"><a href="Statistical-books.html#整合流程"><i class="fa fa-check"></i><b>10.1.10</b> 整合流程</a></li>
<li class="chapter" data-level="10.1.11" data-path="Statistical-books.html"><a href="Statistical-books.html#博客社区"><i class="fa fa-check"></i><b>10.1.11</b> 博客社区</a></li>
<li class="chapter" data-level="10.1.12" data-path="Statistical-books.html"><a href="Statistical-books.html#rmarkdown"><i class="fa fa-check"></i><b>10.1.12</b> Rmarkdown</a></li>
<li class="chapter" data-level="10.1.13" data-path="Statistical-books.html"><a href="Statistical-books.html#r-rstudio"><i class="fa fa-check"></i><b>10.1.13</b> R-Rstudio</a></li>
<li class="chapter" data-level="10.1.14" data-path="Statistical-books.html"><a href="Statistical-books.html#shiny"><i class="fa fa-check"></i><b>10.1.14</b> shiny</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="Statistical-books.html"><a href="Statistical-books.html#使用gitbook写书"><i class="fa fa-check"></i><b>10.2</b> 使用gitbook写书</a></li>
<li class="chapter" data-level="10.3" data-path="Statistical-books.html"><a href="Statistical-books.html#使用bookdwon写书"><i class="fa fa-check"></i><b>10.3</b> 使用bookdwon写书</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="Statistical-books.html"><a href="Statistical-books.html#常用功能标记"><i class="fa fa-check"></i><b>10.3.1</b> 常用功能标记</a></li>
<li class="chapter" data-level="10.3.2" data-path="Statistical-books.html"><a href="Statistical-books.html#r代码的构建"><i class="fa fa-check"></i><b>10.3.2</b> R代码的构建</a></li>
<li class="chapter" data-level="10.3.3" data-path="Statistical-books.html"><a href="Statistical-books.html#动态r代码"><i class="fa fa-check"></i><b>10.3.3</b> 动态r代码</a></li>
<li class="chapter" data-level="10.3.4" data-path="Statistical-books.html"><a href="Statistical-books.html#引入shiny应用"><i class="fa fa-check"></i><b>10.3.4</b> 引入shiny应用</a></li>
<li class="chapter" data-level="10.3.5" data-path="Statistical-books.html"><a href="Statistical-books.html#指定输出和解析的文件"><i class="fa fa-check"></i><b>10.3.5</b> 指定输出和解析的文件</a></li>
<li class="chapter" data-level="10.3.6" data-path="Statistical-books.html"><a href="Statistical-books.html#文件最后修改时间"><i class="fa fa-check"></i><b>10.3.6</b> 文件最后修改时间</a></li>
<li class="chapter" data-level="10.3.7" data-path="Statistical-books.html"><a href="Statistical-books.html#添加指定序号"><i class="fa fa-check"></i><b>10.3.7</b> 添加指定序号</a></li>
<li class="chapter" data-level="10.3.8" data-path="Statistical-books.html"><a href="Statistical-books.html#辅助知识-"><i class="fa fa-check"></i><b>10.3.8</b> 辅助知识：—-</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html"><i class="fa fa-check"></i><b>11</b> 统计与研究设计</a>
<ul>
<li class="chapter" data-level="11.1" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#常用参数释义"><i class="fa fa-check"></i><b>11.1</b> 常用参数释义</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#因果回归参数"><i class="fa fa-check"></i><b>11.1.1</b> 因果回归参数</a></li>
<li class="chapter" data-level="11.1.2" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#生存分析参数"><i class="fa fa-check"></i><b>11.1.2</b> 生存分析参数</a></li>
<li class="chapter" data-level="11.1.3" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#方差分析参数解释"><i class="fa fa-check"></i><b>11.1.3</b> 方差分析参数解释</a></li>
<li class="chapter" data-level="11.1.4" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#回归分析中常用参数释义"><i class="fa fa-check"></i><b>11.1.4</b> 回归分析中常用参数释义</a></li>
<li class="chapter" data-level="11.1.5" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#常用分布描述"><i class="fa fa-check"></i><b>11.1.5</b> 常用分布描述</a></li>
<li class="chapter" data-level="11.1.6" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#其他统计参数释义"><i class="fa fa-check"></i><b>11.1.6</b> 其他统计参数释义</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#临床研究中常用的统计方法和常见问题"><i class="fa fa-check"></i><b>11.2</b> 临床研究中常用的统计方法和常见问题</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#统计推断与区间估计"><i class="fa fa-check"></i><b>11.2.1</b> 统计推断与区间估计</a></li>
<li class="chapter" data-level="11.2.2" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#统计方法选择"><i class="fa fa-check"></i><b>11.2.2</b> 统计方法选择：</a></li>
<li class="chapter" data-level="11.2.3" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#统计分析中的常见问题"><i class="fa fa-check"></i><b>11.2.3</b> 统计分析中的常见问题</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#差异分析"><i class="fa fa-check"></i><b>11.3</b> 差异分析</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#方差检验与t检验的选择"><i class="fa fa-check"></i><b>11.3.1</b> 方差检验与T检验的选择</a></li>
<li class="chapter" data-level="11.3.2" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#z-分布t检验f检验和卡方检验"><i class="fa fa-check"></i><b>11.3.2</b> Z 分布、T检验、F检验和卡方检验</a></li>
<li class="chapter" data-level="11.3.3" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#t检验"><i class="fa fa-check"></i><b>11.3.3</b> T检验</a></li>
<li class="chapter" data-level="11.3.4" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#方差分析"><i class="fa fa-check"></i><b>11.3.4</b> 方差分析</a></li>
<li class="chapter" data-level="11.3.5" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#卡方检验"><i class="fa fa-check"></i><b>11.3.5</b> 卡方检验</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#多元线性回归"><i class="fa fa-check"></i><b>11.4</b> 多元线性回归</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#多元线性回归的概念和基础公式"><i class="fa fa-check"></i><b>11.4.1</b> 多元线性回归的概念和基础公式</a></li>
<li class="chapter" data-level="11.4.2" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#多元线性回归的本质"><i class="fa fa-check"></i><b>11.4.2</b> 多元线性回归的本质</a></li>
<li class="chapter" data-level="11.4.3" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#回归方程的参数解释"><i class="fa fa-check"></i><b>11.4.3</b> 回归方程的参数解释：</a></li>
<li class="chapter" data-level="11.4.4" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#回归方程的评价指标"><i class="fa fa-check"></i><b>11.4.4</b> 回归方程的评价指标</a></li>
<li class="chapter" data-level="11.4.5" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#回归解释相关参数"><i class="fa fa-check"></i><b>11.4.5</b> 回归解释相关参数：</a></li>
<li class="chapter" data-level="11.4.6" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#回归解释相关补充"><i class="fa fa-check"></i><b>11.4.6</b> 回归解释相关补充：</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#相关检验"><i class="fa fa-check"></i><b>11.5</b> 相关检验</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#相关检验和系数"><i class="fa fa-check"></i><b>11.5.1</b> 相关检验和系数</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#医疗相关检验"><i class="fa fa-check"></i><b>11.6</b> 医疗相关检验</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="Statistics-and-Research-Design.html"><a href="Statistics-and-Research-Design.html#log-rank检验"><i class="fa fa-check"></i><b>11.6.1</b> Log-rank检验</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="id_-Build-R-package.html"><a href="id_-Build-R-package.html"><i class="fa fa-check"></i><b>12</b> 构筑R package</a>
<ul>
<li class="chapter" data-level="12.1" data-path="id_-Build-R-package.html"><a href="id_-Build-R-package.html#构筑r-package相关参数配置"><i class="fa fa-check"></i><b>12.1</b> 构筑R package相关参数配置</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="id_-Build-R-package.html"><a href="id_-Build-R-package.html#创建本地环境并使用renv初始化本地安装环境"><i class="fa fa-check"></i><b>12.1.1</b> 创建本地环境并使用renv初始化本地安装环境</a></li>
<li class="chapter" data-level="12.1.2" data-path="id_-Build-R-package.html"><a href="id_-Build-R-package.html#常用配置"><i class="fa fa-check"></i><b>12.1.2</b> 常用配置</a></li>
<li class="chapter" data-level="12.1.3" data-path="id_-Build-R-package.html"><a href="id_-Build-R-package.html#构建函数"><i class="fa fa-check"></i><b>12.1.3</b> 构建函数</a></li>
<li class="chapter" data-level="12.1.4" data-path="id_-Build-R-package.html"><a href="id_-Build-R-package.html#函数测试"><i class="fa fa-check"></i><b>12.1.4</b> 函数测试</a></li>
<li class="chapter" data-level="12.1.5" data-path="id_-Build-R-package.html"><a href="id_-Build-R-package.html#添加项目内置数据集"><i class="fa fa-check"></i><b>12.1.5</b> 添加项目内置数据集</a></li>
<li class="chapter" data-level="12.1.6" data-path="id_-Build-R-package.html"><a href="id_-Build-R-package.html#添加辅助描述文件"><i class="fa fa-check"></i><b>12.1.6</b> 添加辅助描述文件</a></li>
<li class="chapter" data-level="12.1.7" data-path="id_-Build-R-package.html"><a href="id_-Build-R-package.html#r包整体测试"><i class="fa fa-check"></i><b>12.1.7</b> R包整体测试</a></li>
<li class="chapter" data-level="12.1.8" data-path="id_-Build-R-package.html"><a href="id_-Build-R-package.html#构建及安装r包"><i class="fa fa-check"></i><b>12.1.8</b> 构建及安装R包</a></li>
<li class="chapter" data-level="12.1.9" data-path="id_-Build-R-package.html"><a href="id_-Build-R-package.html#构建后上传到github多平台检查"><i class="fa fa-check"></i><b>12.1.9</b> 构建后上传到github多平台检查</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">本书由bookdown驱动</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">基于 R 的数据处理流程指南</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="Visualization-Tables-Figures" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">第 7 章</span> 可视化（表与图）<a href="Visualization-Tables-Figures.html#Visualization-Tables-Figures" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="表格可视化" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> 表格可视化<a href="Visualization-Tables-Figures.html#表格可视化" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="快速图表可视化" class="section level3 hasAnchor" number="7.1.1">
<h3><span class="header-section-number">7.1.1</span> 快速图表可视化<a href="Visualization-Tables-Figures.html#快速图表可视化" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<pre><code>## 这里是生成优化表格的三件套；-好用
iris %&gt;% 
  flextable::flextable() %&gt;%    # convert to pretty image
  flextable::autofit() %&gt;%          # format to one line per row 
  flextable::save_as_docx(path = &quot;tabyl.docx&quot;)

## 快速查看表格：- 好用
library(knitr)
library(kableExtra)
kable(iris) %&gt;%
kable_styling(latex_options = &quot;striped&quot;)

## 快速生成数据报告：-- 好用
# install.packages(&quot;rrtable&quot;)
library(rrtable)
## 自动化报表输出：
## 生成报表图片：
df2flextable2( sampleData3 ,vanilla= FALSE )
## 生成描述性统计图片：
mytable2flextable( mytable(Dx~.,data=acs) ,vanilla= FALSE )
## 生成对应统计分类的html格式：
data2HTML(sampleData3) 


## 快速统计建模结果可视化：- 模型；
library(sjPlot)
library(sjmisc)
library(sjlabelled)
tab_model(m1) ## 注意仅支持统计结果，不支持表格；

#################### shiny表格的可视化: #################################
## DT 查看：--复杂使用参见R-data-shiny.md
library(DT)
datatable(iris)

## reactable --复杂使用参见R-data-shiny.md
library(reactable)
reactable(iris)

## datacleanr -- 快速生成数据报告，需要联网环境
它可以处理嵌套的表格，以及空间和时间序列数据。
install.packages(&quot;datacleanr&quot;)
library(datacleanr)
dcr_app(iris) ## 第一个功能很好用，可以用可视化的方法展示数据内部的结构；

</code></pre>
</div>
<div id="编辑表" class="section level3 hasAnchor" number="7.1.2">
<h3><span class="header-section-number">7.1.2</span> 编辑表<a href="Visualization-Tables-Figures.html#编辑表" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>方法1：</strong>
不仅能够编辑表，还可以实现表数据的增删，以及筛选后导出；</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="Visualization-Tables-Figures.html#cb250-1" aria-hidden="true" tabindex="-1"></a>mtcars_new <span class="ot">&lt;-</span> DataEditR<span class="sc">::</span><span class="fu">data_edit</span>(mtcars,</span>
<span id="cb250-2"><a href="Visualization-Tables-Figures.html#cb250-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">save_as =</span> <span class="st">&quot;mtcars_new.csv&quot;</span>)</span></code></pre></div>
<p><strong>方法2：</strong></p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="Visualization-Tables-Figures.html#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="fu">edit</span>()</span></code></pre></div>
<p><strong>方法3：</strong></p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="Visualization-Tables-Figures.html#cb252-1" aria-hidden="true" tabindex="-1"></a><span class="co"># DT::datatable(head(iris), editable = &#39;cell&#39;)</span></span></code></pre></div>
</div>
<div id="静态表格优化展示" class="section level3 hasAnchor" number="7.1.3">
<h3><span class="header-section-number">7.1.3</span> 静态表格优化展示<a href="Visualization-Tables-Figures.html#静态表格优化展示" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="knitrkableextra" class="section level4 hasAnchor" number="7.1.3.1">
<h4><span class="header-section-number">7.1.3.1</span> knitr:kableExtra<a href="Visualization-Tables-Figures.html#knitrkableextra" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<pre><code>## knitr:kableExtra #### 
library(knitr)
library(kableExtra)
iris2 &lt;- head(iris)
knitr::kable(iris2, col.names = gsub(&quot;[.]&quot;, &quot; &quot;, names(iris)))

## 指定对齐：
knitr::kable(iris2, align = &quot;lccrr&quot;)
## 添加标题：
knitr::kable(iris2, caption = &quot;An example table caption.&quot;)
## 添加范式：
kable(iris) %&gt;%
  kable_styling(latex_options = &quot;striped&quot;)

## 设置字体：
kable(head(iris, 5), booktabs = TRUE) %&gt;%
  kable_styling(font_size = 8)

## 分组行/列
iris2 &lt;- iris[1:5, c(1, 3, 2, 4, 5)]
names(iris2) &lt;- gsub(&#39;[.].+&#39;, &#39;&#39;, names(iris2))
kable(iris2, booktabs = TRUE) %&gt;%
  add_header_above(c(&quot;Length&quot; = 2, &quot;Width&quot; = 2, &quot; &quot; = 1)) %&gt;% 
  add_header_above(c(&quot;Measurements&quot; = 4, &quot;More attributes&quot; = 1))

## 进阶应用：
(ipip50_nested &lt;- ipip50_nested %&gt;%
  mutate(model = map(data, ~lm(o.value ~ t.value, data = .))))

(ipip50_nested &lt;- ipip50_nested %&gt;%
  mutate(tidy = map(model, broom::tidy)))

(tab &lt;- ipip50_nested %&gt;%
  unnest(tidy, .drop = T) %&gt;%
  select(Trait:std.error) %&gt;%
  rename(b = estimate, SE = std.error) %&gt;%
  gather(key = tmp, value = value, b, SE) %&gt;%
  unite(tmp, outcome, tmp, sep = &quot;.&quot;) %&gt;%
  spread(key = tmp, value = value))

tab %&gt;% select(-Trait) %&gt;%
  kable(., &quot;html&quot;, booktabs = T, escape = F, digits = 2,
        col.names = c(&quot;Term&quot;, rep(c(&quot;b&quot;, &quot;SE&quot;), times = 3))) %&gt;%
  kable_styling(full_width = F) %&gt;%
  column_spec(2:7, width = &quot;2cm&quot;) %&gt;%
  group_rows(&quot;Agreeableness&quot;,1,2) %&gt;% ## 添加新行，分组，并重命名：
  group_rows(&quot;Conscientiousness&quot;,3,4) %&gt;%
  group_rows(&quot;Extraversion&quot;,5,6) %&gt;%
  group_rows(&quot;Neuroticism&quot;,7,8) %&gt;%
  group_rows(&quot;Openness&quot;,9,10) %&gt;%
## 指定标题行的分类位置；1和2表示占位符，按顺序向后推；
  add_header_above(c(&quot; &quot; = 1, &quot;BMI&quot; = 2, &quot;Exercise&quot; = 2, &quot;Log Median Income&quot; = 2))

## 生成多表：
knitr::kable(
  list(
    head(iris[, 1:2], 3),
    head(mtcars[, 1:3], 5)
  ),
  caption = &#39;A Tale of Two Tables.&#39;, booktabs = TRUE
)
</code></pre>
</div>
<div id="flextable-静态动态均支持" class="section level4 hasAnchor" number="7.1.3.2">
<h4><span class="header-section-number">7.1.3.2</span> flextable() 静态动态均支持<a href="Visualization-Tables-Figures.html#flextable-静态动态均支持" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<pre><code>data6 %&gt;%
  tabyl(insurance_type,sex,) %&gt;%
  adorn_totals(where=&quot;row&quot;) %&gt;%
  adorn_totals(where=&quot;col&quot;) %&gt;%
  adorn_percentages(denominator = &quot;col&quot;) %&gt;%
  adorn_pct_formatting() %&gt;%
  adorn_ns(position=&quot;front&quot;) %&gt;%
  adorn_title(
    row_name = &quot;insurance_type&quot;,
    col_name = &quot;Gender&quot;,
    placement=&quot;combined&quot;
  )-&gt;table2
mytable2&lt;-flextable(table2)
mytable2</code></pre>
</div>
<div id="高度自定义gt" class="section level4 hasAnchor" number="7.1.3.3">
<h4><span class="header-section-number">7.1.3.3</span> 高度自定义gt()<a href="Visualization-Tables-Figures.html#高度自定义gt" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<pre><code>## 参见;
https://themockup.blog/posts/2020-09-04-10-table-rules-in-r/
https://themockup.blog/posts/2020-09-26-functions-and-themes-for-gt-tables/#gt-tables

## 这个博客主人的博客原文代码：
## 很有意义，可以用来学习写日常的rmarkdown；
https://github.com/jthomasmock/themockup-blog/blob/master/posts/2020-09-26-functions-and-themes-for-gt-tables/index.qmd</code></pre>
</div>
</div>
<div id="动态表格优化展示" class="section level3 hasAnchor" number="7.1.4">
<h3><span class="header-section-number">7.1.4</span> 动态表格优化展示<a href="Visualization-Tables-Figures.html#动态表格优化展示" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="dt-reactable" class="section level4 hasAnchor" number="7.1.4.1">
<h4><span class="header-section-number">7.1.4.1</span> DT-reactable<a href="Visualization-Tables-Figures.html#dt-reactable" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="Visualization-Tables-Figures.html#cb256-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 参见资料：</span></span>
<span id="cb256-2"><a href="Visualization-Tables-Figures.html#cb256-2" aria-hidden="true" tabindex="-1"></a>https<span class="sc">:</span><span class="er">//</span>thinkr.fr<span class="sc">/</span>tableaux<span class="sc">-</span>interactifs<span class="sc">-</span>avec<span class="sc">-</span>r<span class="sc">-</span>pour<span class="sc">-</span>shiny<span class="sc">-</span>et<span class="sc">-</span>vos<span class="sc">-</span>pages<span class="sc">-</span>web<span class="sc">/</span></span>
<span id="cb256-3"><a href="Visualization-Tables-Figures.html#cb256-3" aria-hidden="true" tabindex="-1"></a><span class="do">## data-clean-table</span></span>
<span id="cb256-4"><a href="Visualization-Tables-Figures.html#cb256-4" aria-hidden="true" tabindex="-1"></a>https<span class="sc">:</span><span class="er">//</span>clarewest.github.io<span class="sc">/</span>blog<span class="sc">/</span>post<span class="sc">/</span>making<span class="sc">-</span>tables<span class="sc">-</span>shiny<span class="sc">/</span></span>
<span id="cb256-5"><a href="Visualization-Tables-Figures.html#cb256-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-6"><a href="Visualization-Tables-Figures.html#cb256-6" aria-hidden="true" tabindex="-1"></a><span class="do">## DT包：- - -专注于展示表格相关的数据结构-使用shiny；</span></span>
<span id="cb256-7"><a href="Visualization-Tables-Figures.html#cb256-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 参见：https://rstudio.github.io/DT/</span></span>
<span id="cb256-8"><a href="Visualization-Tables-Figures.html#cb256-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 其他复杂用法参见：</span></span>
<span id="cb256-9"><a href="Visualization-Tables-Figures.html#cb256-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb256-10"><a href="Visualization-Tables-Figures.html#cb256-10" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(iris)</span>
<span id="cb256-11"><a href="Visualization-Tables-Figures.html#cb256-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 使用论文线表来可视化数据结构；</span></span>
<span id="cb256-12"><a href="Visualization-Tables-Figures.html#cb256-12" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(<span class="fu">head</span>(iris), <span class="at">class =</span> <span class="st">&#39;cell-border stripe&#39;</span>)</span>
<span id="cb256-13"><a href="Visualization-Tables-Figures.html#cb256-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 表格编辑：</span></span>
<span id="cb256-14"><a href="Visualization-Tables-Figures.html#cb256-14" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(<span class="fu">head</span>(iris), <span class="at">editable =</span> <span class="st">&#39;cell&#39;</span>)</span>
<span id="cb256-15"><a href="Visualization-Tables-Figures.html#cb256-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-16"><a href="Visualization-Tables-Figures.html#cb256-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 表格筛选可视化</span></span>
<span id="cb256-17"><a href="Visualization-Tables-Figures.html#cb256-17" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(<span class="fu">head</span>(iris), <span class="at">editable =</span> <span class="fu">list</span>(</span>
<span id="cb256-18"><a href="Visualization-Tables-Figures.html#cb256-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">target =</span> <span class="st">&#39;row&#39;</span>, <span class="at">disable =</span> <span class="fu">list</span>(<span class="at">columns =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>))</span>
<span id="cb256-19"><a href="Visualization-Tables-Figures.html#cb256-19" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb256-20"><a href="Visualization-Tables-Figures.html#cb256-20" aria-hidden="true" tabindex="-1"></a><span class="do">## 结合shiny来使用datatale()</span></span>
<span id="cb256-21"><a href="Visualization-Tables-Figures.html#cb256-21" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb256-22"><a href="Visualization-Tables-Figures.html#cb256-22" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(<span class="fu">titlePanel</span>(<span class="st">&quot;DT table in Shiny&quot;</span>),</span>
<span id="cb256-23"><a href="Visualization-Tables-Figures.html#cb256-23" aria-hidden="true" tabindex="-1"></a>                <span class="fu">mainPanel</span>(<span class="at">width =</span> <span class="dv">12</span>,</span>
<span id="cb256-24"><a href="Visualization-Tables-Figures.html#cb256-24" aria-hidden="true" tabindex="-1"></a>                          DT<span class="sc">::</span><span class="fu">dataTableOutput</span>(<span class="st">&quot;mytable&quot;</span>)))</span>
<span id="cb256-25"><a href="Visualization-Tables-Figures.html#cb256-25" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb256-26"><a href="Visualization-Tables-Figures.html#cb256-26" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>mytable <span class="ot">&lt;-</span> DT<span class="sc">::</span><span class="fu">renderDataTable</span>(villagers,</span>
<span id="cb256-27"><a href="Visualization-Tables-Figures.html#cb256-27" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">options =</span> <span class="fu">list</span>(<span class="at">scrollX =</span> <span class="cn">TRUE</span>),</span>
<span id="cb256-28"><a href="Visualization-Tables-Figures.html#cb256-28" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span>
<span id="cb256-29"><a href="Visualization-Tables-Figures.html#cb256-29" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb256-30"><a href="Visualization-Tables-Figures.html#cb256-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the application</span></span>
<span id="cb256-31"><a href="Visualization-Tables-Figures.html#cb256-31" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span>
<span id="cb256-32"><a href="Visualization-Tables-Figures.html#cb256-32" aria-hidden="true" tabindex="-1"></a><span class="do">## DT中相关参数：</span></span>
<span id="cb256-33"><a href="Visualization-Tables-Figures.html#cb256-33" aria-hidden="true" tabindex="-1"></a>cell<span class="sc">-</span>border：用于单元格的实心边框</span>
<span id="cb256-34"><a href="Visualization-Tables-Figures.html#cb256-34" aria-hidden="true" tabindex="-1"></a>compact<span class="sc">:</span> 减少行间距</span>
<span id="cb256-35"><a href="Visualization-Tables-Figures.html#cb256-35" aria-hidden="true" tabindex="-1"></a>hover<span class="sc">:</span> 悬停在光标上时突出显示行</span>
<span id="cb256-36"><a href="Visualization-Tables-Figures.html#cb256-36" aria-hidden="true" tabindex="-1"></a>nowrap：删除单元格中的换行符</span>
<span id="cb256-37"><a href="Visualization-Tables-Figures.html#cb256-37" aria-hidden="true" tabindex="-1"></a>order<span class="sc">-</span>column：突出显示表格排序所依据的列</span>
<span id="cb256-38"><a href="Visualization-Tables-Figures.html#cb256-38" aria-hidden="true" tabindex="-1"></a>row<span class="sc">-</span>bordercell<span class="sc">-</span>border<span class="sc">:</span> 仅用于列顶部和底部的边框（出于明显原因，只能同时使用）</span>
<span id="cb256-39"><a href="Visualization-Tables-Figures.html#cb256-39" aria-hidden="true" tabindex="-1"></a>stripe：用于“条纹”线，即两种交替的颜色</span>
<span id="cb256-40"><a href="Visualization-Tables-Figures.html#cb256-40" aria-hidden="true" tabindex="-1"></a>display<span class="sc">:</span> 对于集合stripe, hover,row<span class="sc">-</span>border和order<span class="sc">-</span>column</span>
<span id="cb256-41"><a href="Visualization-Tables-Figures.html#cb256-41" aria-hidden="true" tabindex="-1"></a><span class="co"># 组合使用：</span></span>
<span id="cb256-42"><a href="Visualization-Tables-Figures.html#cb256-42" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb256-43"><a href="Visualization-Tables-Figures.html#cb256-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">class =</span> <span class="st">&quot;cell-border compact hover order-column&quot;</span>)</span></code></pre></div>
</div>
<div id="reactable-包------专注于展示表格相关的数据结构-使用shiny" class="section level4 hasAnchor" number="7.1.4.2">
<h4><span class="header-section-number">7.1.4.2</span> reactable 包 – - - -专注于展示表格相关的数据结构-使用shiny；<a href="Visualization-Tables-Figures.html#reactable-包------专注于展示表格相关的数据结构-使用shiny" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="Visualization-Tables-Figures.html#cb257-1" aria-hidden="true" tabindex="-1"></a><span class="do">## install.packages(&quot;reactable&quot;)</span></span>
<span id="cb257-2"><a href="Visualization-Tables-Figures.html#cb257-2" aria-hidden="true" tabindex="-1"></a><span class="do">## 参见；https://glin.github.io/reactable/</span></span>
<span id="cb257-3"><a href="Visualization-Tables-Figures.html#cb257-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reactable)</span>
<span id="cb257-4"><a href="Visualization-Tables-Figures.html#cb257-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-5"><a href="Visualization-Tables-Figures.html#cb257-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 直接使用：</span></span>
<span id="cb257-6"><a href="Visualization-Tables-Figures.html#cb257-6" aria-hidden="true" tabindex="-1"></a><span class="fu">reactable</span>(iris)</span>
<span id="cb257-7"><a href="Visualization-Tables-Figures.html#cb257-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-8"><a href="Visualization-Tables-Figures.html#cb257-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-9"><a href="Visualization-Tables-Figures.html#cb257-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 结合shiny来使用reactable；</span></span>
<span id="cb257-10"><a href="Visualization-Tables-Figures.html#cb257-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb257-11"><a href="Visualization-Tables-Figures.html#cb257-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reactable)</span>
<span id="cb257-12"><a href="Visualization-Tables-Figures.html#cb257-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-13"><a href="Visualization-Tables-Figures.html#cb257-13" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb257-14"><a href="Visualization-Tables-Figures.html#cb257-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reactableOutput</span>(<span class="st">&quot;table&quot;</span>)</span>
<span id="cb257-15"><a href="Visualization-Tables-Figures.html#cb257-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb257-16"><a href="Visualization-Tables-Figures.html#cb257-16" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb257-17"><a href="Visualization-Tables-Figures.html#cb257-17" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>table <span class="ot">&lt;-</span> <span class="fu">renderReactable</span>({</span>
<span id="cb257-18"><a href="Visualization-Tables-Figures.html#cb257-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">reactable</span>(iris)</span>
<span id="cb257-19"><a href="Visualization-Tables-Figures.html#cb257-19" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb257-20"><a href="Visualization-Tables-Figures.html#cb257-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb257-21"><a href="Visualization-Tables-Figures.html#cb257-21" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span>
<span id="cb257-22"><a href="Visualization-Tables-Figures.html#cb257-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-23"><a href="Visualization-Tables-Figures.html#cb257-23" aria-hidden="true" tabindex="-1"></a><span class="do">## 在Rmarkdwon中使用reactable()</span></span>
<span id="cb257-24"><a href="Visualization-Tables-Figures.html#cb257-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-25"><a href="Visualization-Tables-Figures.html#cb257-25" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reactable)</span>
<span id="cb257-26"><a href="Visualization-Tables-Figures.html#cb257-26" aria-hidden="true" tabindex="-1"></a><span class="fu">reactable</span>(iris)</span></code></pre></div>
</div>
<div id="sparkline包生成交互式小型图表" class="section level4 hasAnchor" number="7.1.4.3">
<h4><span class="header-section-number">7.1.4.3</span> sparkline包生成交互式小型图表：<a href="Visualization-Tables-Figures.html#sparkline包生成交互式小型图表" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="Visualization-Tables-Figures.html#cb258-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 这个功能很有用：</span></span>
<span id="cb258-2"><a href="Visualization-Tables-Figures.html#cb258-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sparkline)</span>
<span id="cb258-3"><a href="Visualization-Tables-Figures.html#cb258-3" aria-hidden="true" tabindex="-1"></a>iris_spark <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span></span>
<span id="cb258-4"><a href="Visualization-Tables-Figures.html#cb258-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span></span>
<span id="cb258-5"><a href="Visualization-Tables-Figures.html#cb258-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Sepal.Length =</span> <span class="fu">list</span>(Sepal.Length),</span>
<span id="cb258-6"><a href="Visualization-Tables-Figures.html#cb258-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">Sepal.Width =</span> <span class="fu">list</span>(Sepal.Width), </span>
<span id="cb258-7"><a href="Visualization-Tables-Figures.html#cb258-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">Petal.Length =</span> <span class="fu">list</span>(Petal.Length),</span>
<span id="cb258-8"><a href="Visualization-Tables-Figures.html#cb258-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">Petal.Width =</span> <span class="fu">list</span>(Petal.Width)) </span>
<span id="cb258-9"><a href="Visualization-Tables-Figures.html#cb258-9" aria-hidden="true" tabindex="-1"></a>iris_spark <span class="sc">%&gt;%</span>  </span>
<span id="cb258-10"><a href="Visualization-Tables-Figures.html#cb258-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reactable</span>(</span>
<span id="cb258-11"><a href="Visualization-Tables-Figures.html#cb258-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">list</span>(</span>
<span id="cb258-12"><a href="Visualization-Tables-Figures.html#cb258-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">Sepal.Length =</span> <span class="fu">colDef</span>(<span class="at">cell =</span> <span class="cf">function</span>(values) {</span>
<span id="cb258-13"><a href="Visualization-Tables-Figures.html#cb258-13" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sparkline</span>(values, <span class="at">type =</span> <span class="st">&quot;bar&quot;</span>)</span>
<span id="cb258-14"><a href="Visualization-Tables-Figures.html#cb258-14" aria-hidden="true" tabindex="-1"></a>      }),</span>
<span id="cb258-15"><a href="Visualization-Tables-Figures.html#cb258-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">Sepal.Width =</span> <span class="fu">colDef</span>(<span class="at">cell =</span> <span class="cf">function</span>(values, index) {</span>
<span id="cb258-16"><a href="Visualization-Tables-Figures.html#cb258-16" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sparkline</span>(iris_spark<span class="sc">$</span>Sepal.Width[[index]])</span>
<span id="cb258-17"><a href="Visualization-Tables-Figures.html#cb258-17" aria-hidden="true" tabindex="-1"></a>      }),</span>
<span id="cb258-18"><a href="Visualization-Tables-Figures.html#cb258-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">Petal.Length =</span> <span class="fu">colDef</span>(<span class="at">cell =</span> <span class="cf">function</span>(values, index) {</span>
<span id="cb258-19"><a href="Visualization-Tables-Figures.html#cb258-19" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sparkline</span>(iris_spark<span class="sc">$</span>Petal.Length[[index]], <span class="at">type =</span> <span class="st">&quot;box&quot;</span>)</span>
<span id="cb258-20"><a href="Visualization-Tables-Figures.html#cb258-20" aria-hidden="true" tabindex="-1"></a>      }),</span>
<span id="cb258-21"><a href="Visualization-Tables-Figures.html#cb258-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">Petal.Width =</span> <span class="fu">colDef</span>(<span class="at">cell =</span> <span class="cf">function</span>(values, index) {</span>
<span id="cb258-22"><a href="Visualization-Tables-Figures.html#cb258-22" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sparkline</span>(iris_spark<span class="sc">$</span>Petal.Width[[index]])</span>
<span id="cb258-23"><a href="Visualization-Tables-Figures.html#cb258-23" aria-hidden="true" tabindex="-1"></a>      })</span>
<span id="cb258-24"><a href="Visualization-Tables-Figures.html#cb258-24" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb258-25"><a href="Visualization-Tables-Figures.html#cb258-25" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb258-26"><a href="Visualization-Tables-Figures.html#cb258-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-27"><a href="Visualization-Tables-Figures.html#cb258-27" aria-hidden="true" tabindex="-1"></a><span class="do">## 在表格的默认添加交互式图表：</span></span>
<span id="cb258-28"><a href="Visualization-Tables-Figures.html#cb258-28" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb258-29"><a href="Visualization-Tables-Figures.html#cb258-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reactable</span>(</span>
<span id="cb258-30"><a href="Visualization-Tables-Figures.html#cb258-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">defaultPageSize =</span> <span class="dv">5</span>, <span class="do">## 指定显图表行数；</span></span>
<span id="cb258-31"><a href="Visualization-Tables-Figures.html#cb258-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">defaultColDef =</span> <span class="fu">colDef</span>(<span class="at">footer =</span> <span class="cf">function</span>(values) {</span>
<span id="cb258-32"><a href="Visualization-Tables-Figures.html#cb258-32" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(values)) <span class="fu">return</span>()</span>
<span id="cb258-33"><a href="Visualization-Tables-Figures.html#cb258-33" aria-hidden="true" tabindex="-1"></a>        <span class="do">## 添加末尾的交互式图表：</span></span>
<span id="cb258-34"><a href="Visualization-Tables-Figures.html#cb258-34" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sparkline</span>(values, <span class="at">type =</span> <span class="st">&quot;box&quot;</span>, <span class="at">width =</span> <span class="dv">100</span>, <span class="at">height =</span> <span class="dv">30</span>)</span>
<span id="cb258-35"><a href="Visualization-Tables-Figures.html#cb258-35" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb258-36"><a href="Visualization-Tables-Figures.html#cb258-36" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="formattable添加颜色" class="section level4 hasAnchor" number="7.1.4.4">
<h4><span class="header-section-number">7.1.4.4</span> formattable()添加颜色<a href="Visualization-Tables-Figures.html#formattable添加颜色" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="Visualization-Tables-Figures.html#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="do">## formattable ########</span></span>
<span id="cb259-2"><a href="Visualization-Tables-Figures.html#cb259-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;formattable&quot;</span>)</span>
<span id="cb259-3"><a href="Visualization-Tables-Figures.html#cb259-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(formattable)</span>
<span id="cb259-4"><a href="Visualization-Tables-Figures.html#cb259-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-5"><a href="Visualization-Tables-Figures.html#cb259-5" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb259-6"><a href="Visualization-Tables-Figures.html#cb259-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,</span>
<span id="cb259-7"><a href="Visualization-Tables-Figures.html#cb259-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;Bob&quot;</span>, <span class="st">&quot;Ashley&quot;</span>, <span class="st">&quot;James&quot;</span>, <span class="st">&quot;David&quot;</span>, <span class="st">&quot;Jenny&quot;</span>,</span>
<span id="cb259-8"><a href="Visualization-Tables-Figures.html#cb259-8" aria-hidden="true" tabindex="-1"></a>           <span class="st">&quot;Hans&quot;</span>, <span class="st">&quot;Leo&quot;</span>, <span class="st">&quot;John&quot;</span>, <span class="st">&quot;Emily&quot;</span>, <span class="st">&quot;Lee&quot;</span>),</span>
<span id="cb259-9"><a href="Visualization-Tables-Figures.html#cb259-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">28</span>, <span class="dv">27</span>, <span class="dv">30</span>, <span class="dv">28</span>, <span class="dv">29</span>, <span class="dv">29</span>, <span class="dv">27</span>, <span class="dv">27</span>, <span class="dv">31</span>, <span class="dv">30</span>),</span>
<span id="cb259-10"><a href="Visualization-Tables-Figures.html#cb259-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">grade =</span> <span class="fu">c</span>(<span class="st">&quot;C&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>),</span>
<span id="cb259-11"><a href="Visualization-Tables-Figures.html#cb259-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">test1_score =</span> <span class="fu">c</span>(<span class="fl">8.9</span>, <span class="fl">9.5</span>, <span class="fl">9.6</span>, <span class="fl">8.9</span>, <span class="fl">9.1</span>, <span class="fl">9.3</span>, <span class="fl">9.3</span>, <span class="fl">9.9</span>, <span class="fl">8.5</span>, <span class="fl">8.6</span>),</span>
<span id="cb259-12"><a href="Visualization-Tables-Figures.html#cb259-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">test2_score =</span> <span class="fu">c</span>(<span class="fl">9.1</span>, <span class="fl">9.1</span>, <span class="fl">9.2</span>, <span class="fl">9.1</span>, <span class="fl">8.9</span>, <span class="fl">8.5</span>, <span class="fl">9.2</span>, <span class="fl">9.3</span>, <span class="fl">9.1</span>, <span class="fl">8.8</span>),</span>
<span id="cb259-13"><a href="Visualization-Tables-Figures.html#cb259-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">final_score =</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="fl">9.3</span>, <span class="fl">9.4</span>, <span class="dv">9</span>, <span class="dv">9</span>, <span class="fl">8.9</span>, <span class="fl">9.25</span>, <span class="fl">9.6</span>, <span class="fl">8.8</span>, <span class="fl">8.7</span>),</span>
<span id="cb259-14"><a href="Visualization-Tables-Figures.html#cb259-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">registered =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>),</span>
<span id="cb259-15"><a href="Visualization-Tables-Figures.html#cb259-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb259-16"><a href="Visualization-Tables-Figures.html#cb259-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-17"><a href="Visualization-Tables-Figures.html#cb259-17" aria-hidden="true" tabindex="-1"></a><span class="do">###  动态结合表筛选过程展示建模结果</span></span>
<span id="cb259-18"><a href="Visualization-Tables-Figures.html#cb259-18" aria-hidden="true" tabindex="-1"></a><span class="fu">formattable</span>(df, <span class="fu">list</span>(</span>
<span id="cb259-19"><a href="Visualization-Tables-Figures.html#cb259-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">age =</span> <span class="fu">color_tile</span>(<span class="st">&quot;white&quot;</span>, <span class="st">&quot;orange&quot;</span>),</span>
<span id="cb259-20"><a href="Visualization-Tables-Figures.html#cb259-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">grade =</span> <span class="fu">formatter</span>(<span class="st">&quot;span&quot;</span>, <span class="at">style =</span> x <span class="sc">~</span> <span class="fu">ifelse</span>(x <span class="sc">==</span> <span class="st">&quot;A&quot;</span>,</span>
<span id="cb259-21"><a href="Visualization-Tables-Figures.html#cb259-21" aria-hidden="true" tabindex="-1"></a>                                               <span class="fu">style</span>(<span class="at">color =</span> <span class="st">&quot;green&quot;</span>, <span class="at">font.weight =</span> <span class="st">&quot;bold&quot;</span>), <span class="cn">NA</span>)),</span>
<span id="cb259-22"><a href="Visualization-Tables-Figures.html#cb259-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">area</span>(<span class="at">col =</span> <span class="fu">c</span>(test1_score, test2_score)) <span class="sc">~</span> <span class="fu">normalize_bar</span>(<span class="st">&quot;pink&quot;</span>, <span class="fl">0.2</span>),</span>
<span id="cb259-23"><a href="Visualization-Tables-Figures.html#cb259-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">final_score =</span> <span class="fu">formatter</span>(<span class="st">&quot;span&quot;</span>,</span>
<span id="cb259-24"><a href="Visualization-Tables-Figures.html#cb259-24" aria-hidden="true" tabindex="-1"></a>                          <span class="at">style =</span> x <span class="sc">~</span> <span class="fu">style</span>(<span class="at">color =</span> <span class="fu">ifelse</span>(<span class="fu">rank</span>(<span class="sc">-</span>x) <span class="sc">&lt;=</span> <span class="dv">3</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;gray&quot;</span>)),</span>
<span id="cb259-25"><a href="Visualization-Tables-Figures.html#cb259-25" aria-hidden="true" tabindex="-1"></a>                          x <span class="sc">~</span> <span class="fu">sprintf</span>(<span class="st">&quot;%.2f (rank: %02d)&quot;</span>, x, <span class="fu">rank</span>(<span class="sc">-</span>x))),</span>
<span id="cb259-26"><a href="Visualization-Tables-Figures.html#cb259-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">registered =</span> <span class="fu">formatter</span>(<span class="st">&quot;span&quot;</span>,</span>
<span id="cb259-27"><a href="Visualization-Tables-Figures.html#cb259-27" aria-hidden="true" tabindex="-1"></a>                         <span class="at">style =</span> x <span class="sc">~</span> <span class="fu">style</span>(<span class="at">color =</span> <span class="fu">ifelse</span>(x, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;red&quot;</span>)),</span>
<span id="cb259-28"><a href="Visualization-Tables-Figures.html#cb259-28" aria-hidden="true" tabindex="-1"></a>                         x <span class="sc">~</span> <span class="fu">icontext</span>(<span class="fu">ifelse</span>(x, <span class="st">&quot;ok&quot;</span>, <span class="st">&quot;remove&quot;</span>), <span class="fu">ifelse</span>(x, <span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;No&quot;</span>)))</span>
<span id="cb259-29"><a href="Visualization-Tables-Figures.html#cb259-29" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb259-30"><a href="Visualization-Tables-Figures.html#cb259-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-31"><a href="Visualization-Tables-Figures.html#cb259-31" aria-hidden="true" tabindex="-1"></a><span class="do">## 补充，formattable() 还可以结合DT的结果来输出形成阅读性较高的动态表格；</span></span>
<span id="cb259-32"><a href="Visualization-Tables-Figures.html#cb259-32" aria-hidden="true" tabindex="-1"></a><span class="fu">formattable</span>(</span>
<span id="cb259-33"><a href="Visualization-Tables-Figures.html#cb259-33" aria-hidden="true" tabindex="-1"></a>  pic_items,</span>
<span id="cb259-34"><a href="Visualization-Tables-Figures.html#cb259-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb259-35"><a href="Visualization-Tables-Figures.html#cb259-35" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">sell_value</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">color_tile</span>(<span class="st">&quot;white&quot;</span>, <span class="st">&quot;pink&quot;</span>),</span>
<span id="cb259-36"><a href="Visualization-Tables-Figures.html#cb259-36" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">buy_value</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">color_bar</span>(<span class="st">&quot;lightblue&quot;</span>),</span>
<span id="cb259-37"><a href="Visualization-Tables-Figures.html#cb259-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">orderable =</span> true_false_formatter</span>
<span id="cb259-38"><a href="Visualization-Tables-Figures.html#cb259-38" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb259-39"><a href="Visualization-Tables-Figures.html#cb259-39" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb259-40"><a href="Visualization-Tables-Figures.html#cb259-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.datatable</span>(<span class="at">escape =</span> <span class="cn">FALSE</span>,</span>
<span id="cb259-41"><a href="Visualization-Tables-Figures.html#cb259-41" aria-hidden="true" tabindex="-1"></a>               <span class="at">options =</span> <span class="fu">list</span>(<span class="at">scrollX =</span> <span class="cn">TRUE</span>),</span>
<span id="cb259-42"><a href="Visualization-Tables-Figures.html#cb259-42" aria-hidden="true" tabindex="-1"></a>               <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span>
<span id="cb259-43"><a href="Visualization-Tables-Figures.html#cb259-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-44"><a href="Visualization-Tables-Figures.html#cb259-44" aria-hidden="true" tabindex="-1"></a><span class="do">## 另外一种颜色梯度的表格用法：</span></span>
<span id="cb259-45"><a href="Visualization-Tables-Figures.html#cb259-45" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(formattable)</span>
<span id="cb259-46"><a href="Visualization-Tables-Figures.html#cb259-46" aria-hidden="true" tabindex="-1"></a>products <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, </span>
<span id="cb259-47"><a href="Visualization-Tables-Figures.html#cb259-47" aria-hidden="true" tabindex="-1"></a>                       <span class="at">price =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">12</span>, <span class="dv">8</span>, <span class="dv">9</span>),</span>
<span id="cb259-48"><a href="Visualization-Tables-Figures.html#cb259-48" aria-hidden="true" tabindex="-1"></a>                       <span class="at">rating =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">4</span>),</span>
<span id="cb259-49"><a href="Visualization-Tables-Figures.html#cb259-49" aria-hidden="true" tabindex="-1"></a>                       <span class="at">market_share =</span> <span class="fu">percent</span>(<span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.12</span>, <span class="fl">0.05</span>, <span class="fl">0.03</span>, <span class="fl">0.14</span>)),</span>
<span id="cb259-50"><a href="Visualization-Tables-Figures.html#cb259-50" aria-hidden="true" tabindex="-1"></a>                       <span class="at">revenue =</span> <span class="fu">accounting</span>(<span class="fu">c</span>(<span class="dv">55000</span>, <span class="dv">36400</span>, <span class="dv">12000</span>, <span class="sc">-</span><span class="dv">25000</span>, <span class="dv">98100</span>)),</span>
<span id="cb259-51"><a href="Visualization-Tables-Figures.html#cb259-51" aria-hidden="true" tabindex="-1"></a>                       <span class="at">profit =</span> <span class="fu">accounting</span>(<span class="fu">c</span>(<span class="dv">25300</span>, <span class="dv">11500</span>, <span class="sc">-</span><span class="dv">8200</span>, <span class="sc">-</span><span class="dv">46000</span>, <span class="dv">65000</span>)))</span>
<span id="cb259-52"><a href="Visualization-Tables-Figures.html#cb259-52" aria-hidden="true" tabindex="-1"></a>sign_formatter <span class="ot">&lt;-</span> <span class="fu">formatter</span>(<span class="st">&quot;span&quot;</span>, </span>
<span id="cb259-53"><a href="Visualization-Tables-Figures.html#cb259-53" aria-hidden="true" tabindex="-1"></a>                            <span class="at">style =</span> x <span class="sc">~</span> <span class="fu">style</span>(<span class="at">color =</span> <span class="fu">ifelse</span>(x <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">&quot;green&quot;</span>, </span>
<span id="cb259-54"><a href="Visualization-Tables-Figures.html#cb259-54" aria-hidden="true" tabindex="-1"></a>                                                             <span class="fu">ifelse</span>(x <span class="sc">&lt;</span> <span class="dv">0</span>, <span class="st">&quot;red&quot;</span>, <span class="st">&quot;black&quot;</span>))))</span>
<span id="cb259-55"><a href="Visualization-Tables-Figures.html#cb259-55" aria-hidden="true" tabindex="-1"></a>products <span class="sc">%&gt;%</span></span>
<span id="cb259-56"><a href="Visualization-Tables-Figures.html#cb259-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formattable</span>(<span class="fu">list</span>(</span>
<span id="cb259-57"><a href="Visualization-Tables-Figures.html#cb259-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">price =</span> <span class="fu">color_tile</span>(<span class="st">&quot;transparent&quot;</span>, <span class="st">&quot;lightpink&quot;</span>),</span>
<span id="cb259-58"><a href="Visualization-Tables-Figures.html#cb259-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">rating =</span> <span class="fu">color_bar</span>(<span class="st">&quot;lightgreen&quot;</span>),</span>
<span id="cb259-59"><a href="Visualization-Tables-Figures.html#cb259-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">market_share =</span> <span class="fu">color_bar</span>(<span class="st">&quot;lightblue&quot;</span>),</span>
<span id="cb259-60"><a href="Visualization-Tables-Figures.html#cb259-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">revenue =</span> sign_formatter,</span>
<span id="cb259-61"><a href="Visualization-Tables-Figures.html#cb259-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">profit =</span> sign_formatter))</span></code></pre></div>
</div>
</div>
<div id="描述性统计表格分析" class="section level3 hasAnchor" number="7.1.5">
<h3><span class="header-section-number">7.1.5</span> 描述性统计表格分析<a href="Visualization-Tables-Figures.html#描述性统计表格分析" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="table1" class="section level4 hasAnchor" number="7.1.5.1">
<h4><span class="header-section-number">7.1.5.1</span> table1<a href="Visualization-Tables-Figures.html#table1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>table1包：</strong>
参见网页：<a href="https://cran.r-project.org/web/packages/table1/vignettes/table1-examples.html" class="uri">https://cran.r-project.org/web/packages/table1/vignettes/table1-examples.html</a></p>
<p>特色：既可以指定对应的函数，也可以利用现成的分类数据进行平局值和标准差计算；</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="Visualization-Tables-Figures.html#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(table1)</span>
<span id="cb260-2"><a href="Visualization-Tables-Figures.html#cb260-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(boot) </span>
<span id="cb260-3"><a href="Visualization-Tables-Figures.html#cb260-3" aria-hidden="true" tabindex="-1"></a>melanoma2 <span class="ot">&lt;-</span> melanoma</span>
<span id="cb260-4"><a href="Visualization-Tables-Figures.html#cb260-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-5"><a href="Visualization-Tables-Figures.html#cb260-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Factor the basic variables that</span></span>
<span id="cb260-6"><a href="Visualization-Tables-Figures.html#cb260-6" aria-hidden="true" tabindex="-1"></a><span class="co"># we&#39;re interested in</span></span>
<span id="cb260-7"><a href="Visualization-Tables-Figures.html#cb260-7" aria-hidden="true" tabindex="-1"></a>melanoma2<span class="sc">$</span>status <span class="ot">&lt;-</span> </span>
<span id="cb260-8"><a href="Visualization-Tables-Figures.html#cb260-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">factor</span>(melanoma2<span class="sc">$</span>status, </span>
<span id="cb260-9"><a href="Visualization-Tables-Figures.html#cb260-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">levels=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">3</span>),</span>
<span id="cb260-10"><a href="Visualization-Tables-Figures.html#cb260-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Alive&quot;</span>, <span class="co"># Reference</span></span>
<span id="cb260-11"><a href="Visualization-Tables-Figures.html#cb260-11" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;Melanoma death&quot;</span>, </span>
<span id="cb260-12"><a href="Visualization-Tables-Figures.html#cb260-12" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;Non-melanoma death&quot;</span>))</span>
<span id="cb260-13"><a href="Visualization-Tables-Figures.html#cb260-13" aria-hidden="true" tabindex="-1"></a>melanoma2<span class="sc">$</span>sex <span class="ot">&lt;-</span> </span>
<span id="cb260-14"><a href="Visualization-Tables-Figures.html#cb260-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">factor</span>(melanoma2<span class="sc">$</span>sex, <span class="at">levels=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>),</span>
<span id="cb260-15"><a href="Visualization-Tables-Figures.html#cb260-15" aria-hidden="true" tabindex="-1"></a>         <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>, </span>
<span id="cb260-16"><a href="Visualization-Tables-Figures.html#cb260-16" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;Female&quot;</span>))</span>
<span id="cb260-17"><a href="Visualization-Tables-Figures.html#cb260-17" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb260-18"><a href="Visualization-Tables-Figures.html#cb260-18" aria-hidden="true" tabindex="-1"></a>melanoma2<span class="sc">$</span>ulcer <span class="ot">&lt;-</span> </span>
<span id="cb260-19"><a href="Visualization-Tables-Figures.html#cb260-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">factor</span>(melanoma2<span class="sc">$</span>ulcer, <span class="at">levels=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>),</span>
<span id="cb260-20"><a href="Visualization-Tables-Figures.html#cb260-20" aria-hidden="true" tabindex="-1"></a>         <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Absent&quot;</span>, </span>
<span id="cb260-21"><a href="Visualization-Tables-Figures.html#cb260-21" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;Present&quot;</span>))</span>
<span id="cb260-22"><a href="Visualization-Tables-Figures.html#cb260-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-23"><a href="Visualization-Tables-Figures.html#cb260-23" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(melanoma2<span class="sc">$</span>sex)       <span class="ot">&lt;-</span> <span class="st">&quot;Sex&quot;</span></span>
<span id="cb260-24"><a href="Visualization-Tables-Figures.html#cb260-24" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(melanoma2<span class="sc">$</span>age)       <span class="ot">&lt;-</span> <span class="st">&quot;Age&quot;</span></span>
<span id="cb260-25"><a href="Visualization-Tables-Figures.html#cb260-25" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(melanoma2<span class="sc">$</span>ulcer)     <span class="ot">&lt;-</span> <span class="st">&quot;Ulceration&quot;</span></span>
<span id="cb260-26"><a href="Visualization-Tables-Figures.html#cb260-26" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(melanoma2<span class="sc">$</span>thickness) <span class="ot">&lt;-</span> <span class="st">&quot;Thickness&quot;</span></span>
<span id="cb260-27"><a href="Visualization-Tables-Figures.html#cb260-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-28"><a href="Visualization-Tables-Figures.html#cb260-28" aria-hidden="true" tabindex="-1"></a><span class="do">## 这两个unit就很有用；在输出表格中很有用；</span></span>
<span id="cb260-29"><a href="Visualization-Tables-Figures.html#cb260-29" aria-hidden="true" tabindex="-1"></a><span class="fu">units</span>(melanoma2<span class="sc">$</span>age)       <span class="ot">&lt;-</span> <span class="st">&quot;years&quot;</span></span>
<span id="cb260-30"><a href="Visualization-Tables-Figures.html#cb260-30" aria-hidden="true" tabindex="-1"></a><span class="fu">units</span>(melanoma2<span class="sc">$</span>thickness) <span class="ot">&lt;-</span> <span class="st">&quot;mm&quot;</span></span>
<span id="cb260-31"><a href="Visualization-Tables-Figures.html#cb260-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-32"><a href="Visualization-Tables-Figures.html#cb260-32" aria-hidden="true" tabindex="-1"></a><span class="do">##  注意这里的分组变量使用的|status 。另外，像sex之类的变量，还可以设计为factor(sex)</span></span>
<span id="cb260-33"><a href="Visualization-Tables-Figures.html#cb260-33" aria-hidden="true" tabindex="-1"></a><span class="fu">table1</span>(<span class="sc">~</span> sex <span class="sc">+</span> age <span class="sc">+</span> ulcer <span class="sc">+</span> thickness <span class="sc">|</span> status, <span class="at">data=</span>melanoma2, <span class="at">overall=</span><span class="st">&quot;Total&quot;</span>)</span>
<span id="cb260-34"><a href="Visualization-Tables-Figures.html#cb260-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-35"><a href="Visualization-Tables-Figures.html#cb260-35" aria-hidden="true" tabindex="-1"></a><span class="do">## 还可以指定函数，用于表格中参数的计算：</span></span>
<span id="cb260-36"><a href="Visualization-Tables-Figures.html#cb260-36" aria-hidden="true" tabindex="-1"></a><span class="do">## 指定函数另外参见：https://zhuanlan.zhihu.com/p/466024679</span></span>
<span id="cb260-37"><a href="Visualization-Tables-Figures.html#cb260-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-38"><a href="Visualization-Tables-Figures.html#cb260-38" aria-hidden="true" tabindex="-1"></a>my.render.cont <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb260-39"><a href="Visualization-Tables-Figures.html#cb260-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">with</span>(<span class="fu">stats.apply.rounding</span>(<span class="fu">stats.default</span>(x), <span class="at">digits=</span><span class="dv">2</span>), <span class="fu">c</span>(<span class="st">&quot;&quot;</span>,</span>
<span id="cb260-40"><a href="Visualization-Tables-Figures.html#cb260-40" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Mean (SD)&quot;</span><span class="ot">=</span><span class="fu">sprintf</span>(<span class="st">&quot;%s (&amp;plusmn; %s)&quot;</span>, MEAN, SD)))</span>
<span id="cb260-41"><a href="Visualization-Tables-Figures.html#cb260-41" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb260-42"><a href="Visualization-Tables-Figures.html#cb260-42" aria-hidden="true" tabindex="-1"></a>my.render.cat <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb260-43"><a href="Visualization-Tables-Figures.html#cb260-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">&quot;&quot;</span>, <span class="fu">sapply</span>(<span class="fu">stats.default</span>(x), <span class="cf">function</span>(y) <span class="fu">with</span>(y,</span>
<span id="cb260-44"><a href="Visualization-Tables-Figures.html#cb260-44" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sprintf</span>(<span class="st">&quot;%d (%0.0f %%)&quot;</span>, FREQ, PCT))))</span>
<span id="cb260-45"><a href="Visualization-Tables-Figures.html#cb260-45" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb260-46"><a href="Visualization-Tables-Figures.html#cb260-46" aria-hidden="true" tabindex="-1"></a>                 </span>
<span id="cb260-47"><a href="Visualization-Tables-Figures.html#cb260-47" aria-hidden="true" tabindex="-1"></a> <span class="fu">table1</span>(strata, labels, <span class="at">groupspan=</span><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb260-48"><a href="Visualization-Tables-Figures.html#cb260-48" aria-hidden="true" tabindex="-1"></a>       <span class="at">render.continuous=</span>my.render.cont, <span class="at">render.categorical=</span>my.render.cat) </span>
<span id="cb260-49"><a href="Visualization-Tables-Figures.html#cb260-49" aria-hidden="true" tabindex="-1"></a>                 </span>
<span id="cb260-50"><a href="Visualization-Tables-Figures.html#cb260-50" aria-hidden="true" tabindex="-1"></a><span class="do">## table1还支持输出表格样式：</span></span>
<span id="cb260-51"><a href="Visualization-Tables-Figures.html#cb260-51" aria-hidden="true" tabindex="-1"></a> <span class="fu">table1</span>(<span class="sc">~</span> age <span class="sc">+</span> sex <span class="sc">+</span> wt <span class="sc">|</span> treat, <span class="at">data=</span>dat, <span class="at">topclass=</span><span class="st">&quot;Rtable1-zebra&quot;</span>)</span></code></pre></div>
</div>
<div id="janitor包tabyl功能" class="section level4 hasAnchor" number="7.1.5.2">
<h4><span class="header-section-number">7.1.5.2</span> janitor包<code>tabyl()</code>功能<a href="Visualization-Tables-Figures.html#janitor包tabyl功能" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="Visualization-Tables-Figures.html#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="do">### janitor包提供了生成表格和交叉表格的tabyl()功能，可以“装饰”或使用辅助功能进行修改，以显示百分比、比例、计数等。</span></span>
<span id="cb261-2"><a href="Visualization-Tables-Figures.html#cb261-2" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(</span>
<span id="cb261-3"><a href="Visualization-Tables-Figures.html#cb261-3" aria-hidden="true" tabindex="-1"></a>  rio,          <span class="co"># File import</span></span>
<span id="cb261-4"><a href="Visualization-Tables-Figures.html#cb261-4" aria-hidden="true" tabindex="-1"></a>  here,         <span class="co"># File locator</span></span>
<span id="cb261-5"><a href="Visualization-Tables-Figures.html#cb261-5" aria-hidden="true" tabindex="-1"></a>  skimr,        <span class="co"># get overview of data</span></span>
<span id="cb261-6"><a href="Visualization-Tables-Figures.html#cb261-6" aria-hidden="true" tabindex="-1"></a>  tidyverse,    <span class="co"># data management + ggplot2 graphics </span></span>
<span id="cb261-7"><a href="Visualization-Tables-Figures.html#cb261-7" aria-hidden="true" tabindex="-1"></a>  gtsummary,    <span class="co"># summary statistics and tests</span></span>
<span id="cb261-8"><a href="Visualization-Tables-Figures.html#cb261-8" aria-hidden="true" tabindex="-1"></a>  rstatix,      <span class="co"># summary statistics and statistical tests</span></span>
<span id="cb261-9"><a href="Visualization-Tables-Figures.html#cb261-9" aria-hidden="true" tabindex="-1"></a>  janitor,      <span class="co"># adding totals and percents to tables</span></span>
<span id="cb261-10"><a href="Visualization-Tables-Figures.html#cb261-10" aria-hidden="true" tabindex="-1"></a>  scales,       <span class="co"># easily convert proportions to percents  </span></span>
<span id="cb261-11"><a href="Visualization-Tables-Figures.html#cb261-11" aria-hidden="true" tabindex="-1"></a>  flextable     <span class="co"># converting tables to pretty images</span></span>
<span id="cb261-12"><a href="Visualization-Tables-Figures.html#cb261-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb261-13"><a href="Visualization-Tables-Figures.html#cb261-13" aria-hidden="true" tabindex="-1"></a>linelist <span class="sc">%&gt;%</span>                                  </span>
<span id="cb261-14"><a href="Visualization-Tables-Figures.html#cb261-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(age_cat, gender) <span class="sc">%&gt;%</span>   <span class="do">## 交叉统计             </span></span>
<span id="cb261-15"><a href="Visualization-Tables-Figures.html#cb261-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="at">where =</span> <span class="st">&quot;row&quot;</span>) <span class="sc">%&gt;%</span>     <span class="do">## 添加汇总列：    </span></span>
<span id="cb261-16"><a href="Visualization-Tables-Figures.html#cb261-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_percentages</span>(<span class="at">denominator =</span> <span class="st">&quot;row&quot;</span>) <span class="sc">%&gt;%</span>   <span class="do">## 将计数转为比例；按行或列</span></span>
<span id="cb261-17"><a href="Visualization-Tables-Figures.html#cb261-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>(<span class="at">digits =</span> <span class="dv">1</span>)   <span class="sc">%&gt;%</span>  <span class="do">## 将比例转为百分比；        </span></span>
<span id="cb261-18"><a href="Visualization-Tables-Figures.html#cb261-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_ns</span>(<span class="at">position =</span> <span class="st">&quot;front&quot;</span>) <span class="sc">%&gt;%</span>            <span class="co"># display as: &quot;count (percent)&quot;</span></span>
<span id="cb261-19"><a href="Visualization-Tables-Figures.html#cb261-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_title</span>(                                <span class="co"># adjust titles</span></span>
<span id="cb261-20"><a href="Visualization-Tables-Figures.html#cb261-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">row_name =</span> <span class="st">&quot;Age Category&quot;</span>, <span class="do">## 这里是汇总命名的方法；</span></span>
<span id="cb261-21"><a href="Visualization-Tables-Figures.html#cb261-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_name =</span> <span class="st">&quot;Gender&quot;</span>,</span>
<span id="cb261-22"><a href="Visualization-Tables-Figures.html#cb261-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">placement =</span> <span class="st">&quot;combined&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb261-23"><a href="Visualization-Tables-Figures.html#cb261-23" aria-hidden="true" tabindex="-1"></a>  flextable<span class="sc">::</span><span class="fu">flextable</span>() <span class="sc">%&gt;%</span>    <span class="co"># convert to pretty image</span></span>
<span id="cb261-24"><a href="Visualization-Tables-Figures.html#cb261-24" aria-hidden="true" tabindex="-1"></a>  flextable<span class="sc">::</span><span class="fu">autofit</span>() <span class="sc">%&gt;%</span>          <span class="co"># format to one line per row </span></span>
<span id="cb261-25"><a href="Visualization-Tables-Figures.html#cb261-25" aria-hidden="true" tabindex="-1"></a>  flextable<span class="sc">::</span><span class="fu">save_as_docx</span>(<span class="at">path =</span> <span class="st">&quot;tabyl.docx&quot;</span>)</span></code></pre></div>
</div>
<div id="tableone" class="section level4 hasAnchor" number="7.1.5.3">
<h4><span class="header-section-number">7.1.5.3</span> tableone<a href="Visualization-Tables-Figures.html#tableone" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="Visualization-Tables-Figures.html#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survival)</span>
<span id="cb262-2"><a href="Visualization-Tables-Figures.html#cb262-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tableone)</span>
<span id="cb262-3"><a href="Visualization-Tables-Figures.html#cb262-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(skimr)</span>
<span id="cb262-4"><a href="Visualization-Tables-Figures.html#cb262-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Load data</span></span>
<span id="cb262-5"><a href="Visualization-Tables-Figures.html#cb262-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-6"><a href="Visualization-Tables-Figures.html#cb262-6" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(pbc)</span>
<span id="cb262-7"><a href="Visualization-Tables-Figures.html#cb262-7" aria-hidden="true" tabindex="-1"></a>pbc<span class="ot">=</span>pbc <span class="sc">%&gt;%</span> <span class="fu">as.tbl</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb262-8"><a href="Visualization-Tables-Figures.html#cb262-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">trt=</span><span class="fu">factor</span>(trt,<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;yes&quot;</span>,<span class="st">&quot;no&quot;</span>)),</span>
<span id="cb262-9"><a href="Visualization-Tables-Figures.html#cb262-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">status=</span><span class="fu">factor</span>(status, <span class="at">labels =</span><span class="fu">c</span>(<span class="st">&quot;status&quot;</span>,<span class="st">&quot;edema&quot;</span>,<span class="st">&quot;stage&quot;</span>)))</span>
<span id="cb262-10"><a href="Visualization-Tables-Figures.html#cb262-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-11"><a href="Visualization-Tables-Figures.html#cb262-11" aria-hidden="true" tabindex="-1"></a>df<span class="ot">=</span>pbc <span class="sc">%&gt;%</span> <span class="fu">as.tbl</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb262-12"><a href="Visualization-Tables-Figures.html#cb262-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">trt=</span><span class="fu">factor</span>(trt,<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;yes&quot;</span>,<span class="st">&quot;no&quot;</span>)),</span>
<span id="cb262-13"><a href="Visualization-Tables-Figures.html#cb262-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">status=</span><span class="fu">factor</span>(status, <span class="at">labels =</span><span class="fu">c</span>(<span class="st">&quot;status&quot;</span>,<span class="st">&quot;edema&quot;</span>,<span class="st">&quot;stage&quot;</span>))) <span class="sc">%&gt;%</span> <span class="fu">select</span>(time,age,sex,status,trt,bili,platelet)</span>
<span id="cb262-14"><a href="Visualization-Tables-Figures.html#cb262-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-15"><a href="Visualization-Tables-Figures.html#cb262-15" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb262-16"><a href="Visualization-Tables-Figures.html#cb262-16" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 418 x 7</span></span>
<span id="cb262-17"><a href="Visualization-Tables-Figures.html#cb262-17" aria-hidden="true" tabindex="-1"></a>    time   age sex   status trt    bili platelet</span>
<span id="cb262-18"><a href="Visualization-Tables-Figures.html#cb262-18" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>fct<span class="sc">&gt;</span> <span class="er">&lt;</span>fct<span class="sc">&gt;</span>  <span class="er">&lt;</span>fct<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>    <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb262-19"><a href="Visualization-Tables-Figures.html#cb262-19" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span>   <span class="dv">400</span>  <span class="fl">58.8</span> f     stage  yes    <span class="fl">14.5</span>      <span class="dv">190</span></span>
<span id="cb262-20"><a href="Visualization-Tables-Figures.html#cb262-20" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span>  <span class="dv">4500</span>  <span class="fl">56.4</span> f     status yes     <span class="fl">1.1</span>      <span class="dv">221</span></span>
<span id="cb262-21"><a href="Visualization-Tables-Figures.html#cb262-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-22"><a href="Visualization-Tables-Figures.html#cb262-22" aria-hidden="true" tabindex="-1"></a><span class="co"># … with 408 more rows</span></span>
<span id="cb262-23"><a href="Visualization-Tables-Figures.html#cb262-23" aria-hidden="true" tabindex="-1"></a><span class="do">## 构建统计展示：</span></span>
<span id="cb262-24"><a href="Visualization-Tables-Figures.html#cb262-24" aria-hidden="true" tabindex="-1"></a>T1<span class="ot">=</span><span class="fu">CreateTableOne</span>(<span class="at">data=</span>df,<span class="at">strata =</span> <span class="fu">c</span>(<span class="st">&quot;trt&quot;</span>))</span>
<span id="cb262-25"><a href="Visualization-Tables-Figures.html#cb262-25" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(T1,<span class="at">showAllLevels =</span> <span class="cn">TRUE</span>)</span>
<span id="cb262-26"><a href="Visualization-Tables-Figures.html#cb262-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-27"><a href="Visualization-Tables-Figures.html#cb262-27" aria-hidden="true" tabindex="-1"></a><span class="do">## 指定部分检验结果：</span></span>
<span id="cb262-28"><a href="Visualization-Tables-Figures.html#cb262-28" aria-hidden="true" tabindex="-1"></a><span class="co"># 有时候，并不是所有数据都是服从正态分布，频数分布有时候也需要用到Fisher 检验，这时候需要我们自定义了。</span></span>
<span id="cb262-29"><a href="Visualization-Tables-Figures.html#cb262-29" aria-hidden="true" tabindex="-1"></a><span class="co"># 这里在Print需要用nonnormal来指定哪些变量为非正态分布及exact 来指定确切概率法检验</span></span>
<span id="cb262-30"><a href="Visualization-Tables-Figures.html#cb262-30" aria-hidden="true" tabindex="-1"></a>T3<span class="ot">=</span><span class="fu">print</span>(T1,<span class="at">showAllLevels =</span> <span class="cn">TRUE</span>,<span class="at">nonnormal =</span> <span class="fu">c</span>(<span class="st">&quot;bili&quot;</span>,<span class="st">&quot;platelet&quot;</span>),</span>
<span id="cb262-31"><a href="Visualization-Tables-Figures.html#cb262-31" aria-hidden="true" tabindex="-1"></a>         <span class="at">exact =</span> <span class="st">&quot;sex&quot;</span>)</span></code></pre></div>
</div>
<div id="comparegroups包" class="section level4 hasAnchor" number="7.1.5.4">
<h4><span class="header-section-number">7.1.5.4</span> compareGroups包<a href="Visualization-Tables-Figures.html#comparegroups包" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="Visualization-Tables-Figures.html#cb263-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 参见：https://www.jianshu.com/p/8879d49064ae</span></span>
<span id="cb263-2"><a href="Visualization-Tables-Figures.html#cb263-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-3"><a href="Visualization-Tables-Figures.html#cb263-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 功能：</span></span>
<span id="cb263-4"><a href="Visualization-Tables-Figures.html#cb263-4" aria-hidden="true" tabindex="-1"></a>可支持多种数据导入，如haven、readxl、readr等，也接受Tibble类型数据集。</span>
<span id="cb263-5"><a href="Visualization-Tables-Figures.html#cb263-5" aria-hidden="true" tabindex="-1"></a>内置descrTable的新函数，只需一步就可以构建描述性表。</span>
<span id="cb263-6"><a href="Visualization-Tables-Figures.html#cb263-6" aria-hidden="true" tabindex="-1"></a>支持R<span class="sc">-</span>markdown文档，支持HTML的分层表。</span>
<span id="cb263-7"><a href="Visualization-Tables-Figures.html#cb263-7" aria-hidden="true" tabindex="-1"></a>内置strataTable的新功能，可以按层(变量的值或级别)构建描述性表。</span>
<span id="cb263-8"><a href="Visualization-Tables-Figures.html#cb263-8" aria-hidden="true" tabindex="-1"></a>日期变量被视为连续非正态，执行中位数、四分位数和非参数检验。</span>
<span id="cb263-9"><a href="Visualization-Tables-Figures.html#cb263-9" aria-hidden="true" tabindex="-1"></a>在compareGroups和descrTable中添加新的参数var.equal。这允许在比较两组以上的比较。</span>
<span id="cb263-10"><a href="Visualization-Tables-Figures.html#cb263-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-11"><a href="Visualization-Tables-Figures.html#cb263-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 基础函数数据值展示：</span></span>
<span id="cb263-12"><a href="Visualization-Tables-Figures.html#cb263-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(compareGroups)</span>
<span id="cb263-13"><a href="Visualization-Tables-Figures.html#cb263-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb263-14"><a href="Visualization-Tables-Figures.html#cb263-14" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(predimed)</span>
<span id="cb263-15"><a href="Visualization-Tables-Figures.html#cb263-15" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(predimed)</span>
<span id="cb263-16"><a href="Visualization-Tables-Figures.html#cb263-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ALL data</span></span>
<span id="cb263-17"><a href="Visualization-Tables-Figures.html#cb263-17" aria-hidden="true" tabindex="-1"></a><span class="fu">descrTable</span>( <span class="sc">~</span> ., <span class="at">data =</span> predimed)</span>
<span id="cb263-18"><a href="Visualization-Tables-Figures.html#cb263-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-19"><a href="Visualization-Tables-Figures.html#cb263-19" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">compareGroups</span>(group <span class="sc">~</span> age <span class="sc">+</span> sex <span class="sc">+</span> smoke <span class="sc">+</span> waist <span class="sc">+</span> hormo, </span>
<span id="cb263-20"><a href="Visualization-Tables-Figures.html#cb263-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> predimed)</span>
<span id="cb263-21"><a href="Visualization-Tables-Figures.html#cb263-21" aria-hidden="true" tabindex="-1"></a>res</span>
<span id="cb263-22"><a href="Visualization-Tables-Figures.html#cb263-22" aria-hidden="true" tabindex="-1"></a><span class="fu">createTable</span>(res) <span class="do">### 结果输出展示；</span></span>
<span id="cb263-23"><a href="Visualization-Tables-Figures.html#cb263-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-24"><a href="Visualization-Tables-Figures.html#cb263-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-25"><a href="Visualization-Tables-Figures.html#cb263-25" aria-hidden="true" tabindex="-1"></a><span class="do">## 函数输出默认为正态分布：</span></span>
<span id="cb263-26"><a href="Visualization-Tables-Figures.html#cb263-26" aria-hidden="true" tabindex="-1"></a>如果有非正态分布；我们需要对非正态分布进行指定，使用下面方法进行指定。</span>
<span id="cb263-27"><a href="Visualization-Tables-Figures.html#cb263-27" aria-hidden="true" tabindex="-1"></a>这里method 变量<span class="ot">=</span>1表示比较使用正态分布，</span>
<span id="cb263-28"><a href="Visualization-Tables-Figures.html#cb263-28" aria-hidden="true" tabindex="-1"></a>变量<span class="ot">=</span>2表示使用四分位间距，</span>
<span id="cb263-29"><a href="Visualization-Tables-Figures.html#cb263-29" aria-hidden="true" tabindex="-1"></a>变量<span class="ot">=</span>3表示使用分类变量比较，</span>
<span id="cb263-30"><a href="Visualization-Tables-Figures.html#cb263-30" aria-hidden="true" tabindex="-1"></a>变量<span class="ot">=</span>NA表示自动根据Shapiro<span class="sc">-</span>Wilks检测，做出是正态还是非正态方法</span>
<span id="cb263-31"><a href="Visualization-Tables-Figures.html#cb263-31" aria-hidden="true" tabindex="-1"></a><span class="fu">createTable</span>(res)</span>
<span id="cb263-32"><a href="Visualization-Tables-Figures.html#cb263-32" aria-hidden="true" tabindex="-1"></a><span class="do">## add non-normal test</span></span>
<span id="cb263-33"><a href="Visualization-Tables-Figures.html#cb263-33" aria-hidden="true" tabindex="-1"></a>res<span class="ot">=</span><span class="fu">compareGroups</span>(group <span class="sc">~</span> age <span class="sc">+</span> smoke <span class="sc">+</span> waist <span class="sc">+</span> hormo, <span class="at">data =</span> predimed, </span>
<span id="cb263-34"><a href="Visualization-Tables-Figures.html#cb263-34" aria-hidden="true" tabindex="-1"></a>                  <span class="at">method =</span> <span class="fu">c</span>(<span class="at">waist =</span> <span class="dv">2</span>, <span class="at">age =</span> <span class="dv">2</span>))</span>
<span id="cb263-35"><a href="Visualization-Tables-Figures.html#cb263-35" aria-hidden="true" tabindex="-1"></a><span class="fu">createTable</span>(res)</span>
<span id="cb263-36"><a href="Visualization-Tables-Figures.html#cb263-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-37"><a href="Visualization-Tables-Figures.html#cb263-37" aria-hidden="true" tabindex="-1"></a><span class="do">## OR或HR的展示</span></span>
<span id="cb263-38"><a href="Visualization-Tables-Figures.html#cb263-38" aria-hidden="true" tabindex="-1"></a>res1 <span class="ot">&lt;-</span> <span class="fu">compareGroups</span>(htn <span class="sc">~</span> age <span class="sc">+</span> sex <span class="sc">+</span> bmi <span class="sc">+</span> smoke, <span class="at">data =</span> predimed, </span>
<span id="cb263-39"><a href="Visualization-Tables-Figures.html#cb263-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">ref =</span> <span class="dv">1</span>)</span>
<span id="cb263-40"><a href="Visualization-Tables-Figures.html#cb263-40" aria-hidden="true" tabindex="-1"></a><span class="fu">createTable</span>(res1, <span class="at">show.ratio =</span> <span class="cn">TRUE</span>)</span>
<span id="cb263-41"><a href="Visualization-Tables-Figures.html#cb263-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-42"><a href="Visualization-Tables-Figures.html#cb263-42" aria-hidden="true" tabindex="-1"></a><span class="co"># HR展示：</span></span>
<span id="cb263-43"><a href="Visualization-Tables-Figures.html#cb263-43" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survival)</span>
<span id="cb263-44"><a href="Visualization-Tables-Figures.html#cb263-44" aria-hidden="true" tabindex="-1"></a>predimed<span class="sc">$</span>tmain <span class="ot">&lt;-</span> <span class="fu">with</span>(predimed, <span class="fu">Surv</span>(toevent, event <span class="sc">==</span> <span class="st">&quot;Yes&quot;</span>))</span>
<span id="cb263-45"><a href="Visualization-Tables-Figures.html#cb263-45" aria-hidden="true" tabindex="-1"></a><span class="fu">createTable</span>(<span class="fu">compareGroups</span>(tmain <span class="sc">~</span> group <span class="sc">+</span> age <span class="sc">+</span> sex, <span class="at">data =</span> predimed), </span>
<span id="cb263-46"><a href="Visualization-Tables-Figures.html#cb263-46" aria-hidden="true" tabindex="-1"></a>            <span class="at">show.ratio =</span> <span class="cn">TRUE</span>)</span>
<span id="cb263-47"><a href="Visualization-Tables-Figures.html#cb263-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-48"><a href="Visualization-Tables-Figures.html#cb263-48" aria-hidden="true" tabindex="-1"></a><span class="do">## 输出xlxs格式：</span></span>
<span id="cb263-49"><a href="Visualization-Tables-Figures.html#cb263-49" aria-hidden="true" tabindex="-1"></a><span class="fu">export2xls</span>(<span class="fu">createTable</span>(res), <span class="at">file=</span><span class="st">&#39;table1.xlsx&#39;</span>)</span></code></pre></div>
</div>
<div id="gtsummary" class="section level4 hasAnchor" number="7.1.5.5">
<h4><span class="header-section-number">7.1.5.5</span> gtsummary()<a href="Visualization-Tables-Figures.html#gtsummary" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="基础配置" class="section level5 hasAnchor" number="7.1.5.5.1">
<h5><span class="header-section-number">7.1.5.5.1</span> 基础配置<a href="Visualization-Tables-Figures.html#基础配置" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="Visualization-Tables-Figures.html#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="do">### 常用默认主题配置：</span></span>
<span id="cb264-2"><a href="Visualization-Tables-Figures.html#cb264-2" aria-hidden="true" tabindex="-1"></a><span class="fu">reset_gtsummary_theme</span>()</span>
<span id="cb264-3"><a href="Visualization-Tables-Figures.html#cb264-3" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_gtsummary_language</span>(</span>
<span id="cb264-4"><a href="Visualization-Tables-Figures.html#cb264-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">language =</span>  <span class="st">&quot;zh-cn&quot;</span>,</span>
<span id="cb264-5"><a href="Visualization-Tables-Figures.html#cb264-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">decimal.mark =</span> <span class="cn">NULL</span>,</span>
<span id="cb264-6"><a href="Visualization-Tables-Figures.html#cb264-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">set_theme =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="描述性统计" class="section level5 hasAnchor" number="7.1.5.5.2">
<h5><span class="header-section-number">7.1.5.5.2</span> 描述性统计<a href="Visualization-Tables-Figures.html#描述性统计" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div id="基础描述性统计" class="section level6 hasAnchor" number="7.1.5.5.2.1">
<h6><span class="header-section-number">7.1.5.5.2.1</span> 5.5.2.1 基础描述性统计<a href="Visualization-Tables-Figures.html#基础描述性统计" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="Visualization-Tables-Figures.html#cb265-1" aria-hidden="true" tabindex="-1"></a><span class="do">### tbl_summary式样，使用by分组统计：</span></span>
<span id="cb265-2"><a href="Visualization-Tables-Figures.html#cb265-2" aria-hidden="true" tabindex="-1"></a><span class="do">### 输出HTML格式的表格报告：</span></span>
<span id="cb265-3"><a href="Visualization-Tables-Figures.html#cb265-3" aria-hidden="true" tabindex="-1"></a>t1 <span class="ot">&lt;-</span> data_table4  <span class="sc">%&gt;%</span></span>
<span id="cb265-4"><a href="Visualization-Tables-Figures.html#cb265-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_summary</span>(<span class="at">by=</span>druggroup,</span>
<span id="cb265-5"><a href="Visualization-Tables-Figures.html#cb265-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">type =</span> <span class="fu">list</span>(<span class="fu">all_continuous</span>() <span class="sc">~</span> <span class="st">&#39;continuous2&#39;</span>,</span>
<span id="cb265-6"><a href="Visualization-Tables-Figures.html#cb265-6" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">all_dichotomous</span>() <span class="sc">~</span> <span class="st">&quot;dichotomous&quot;</span>),</span>
<span id="cb265-7"><a href="Visualization-Tables-Figures.html#cb265-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">statistic =</span> <span class="fu">all_continuous</span>()<span class="sc">~</span><span class="fu">c</span>(</span>
<span id="cb265-8"><a href="Visualization-Tables-Figures.html#cb265-8" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;{mean} ({sd})&quot;</span>,</span>
<span id="cb265-9"><a href="Visualization-Tables-Figures.html#cb265-9" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;{median} ({p25}, {p75})&quot;</span>,</span>
<span id="cb265-10"><a href="Visualization-Tables-Figures.html#cb265-10" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;{min}, {max}&quot;</span>),</span>
<span id="cb265-11"><a href="Visualization-Tables-Figures.html#cb265-11" aria-hidden="true" tabindex="-1"></a>              <span class="do">## 设定表格中小数的位数</span></span>
<span id="cb265-12"><a href="Visualization-Tables-Figures.html#cb265-12" aria-hidden="true" tabindex="-1"></a>              <span class="at">digits =</span> <span class="fu">list</span>(<span class="fu">c</span>(sex,age_cat,insurance_type)<span class="sc">~</span><span class="dv">2</span>),</span>
<span id="cb265-13"><a href="Visualization-Tables-Figures.html#cb265-13" aria-hidden="true" tabindex="-1"></a>              <span class="at">label=</span><span class="fu">list</span>(</span>
<span id="cb265-14"><a href="Visualization-Tables-Figures.html#cb265-14" aria-hidden="true" tabindex="-1"></a>                sex<span class="sc">~</span><span class="st">&quot;性别&quot;</span>,</span>
<span id="cb265-15"><a href="Visualization-Tables-Figures.html#cb265-15" aria-hidden="true" tabindex="-1"></a>                age<span class="sc">~</span><span class="st">&quot;入组年龄&quot;</span>,</span>
<span id="cb265-16"><a href="Visualization-Tables-Figures.html#cb265-16" aria-hidden="true" tabindex="-1"></a>                age_cat<span class="sc">~</span><span class="st">&quot;年龄组分布&quot;</span>,</span>
<span id="cb265-17"><a href="Visualization-Tables-Figures.html#cb265-17" aria-hidden="true" tabindex="-1"></a>                insurance_type<span class="sc">~</span><span class="st">&quot;医保类型&quot;</span>,</span>
<span id="cb265-18"><a href="Visualization-Tables-Figures.html#cb265-18" aria-hidden="true" tabindex="-1"></a>                lab_item_name.x<span class="sc">~</span><span class="st">&quot;肌钙蛋白cTn检查  [人数(比例)]&quot;</span>,</span>
<span id="cb265-19"><a href="Visualization-Tables-Figures.html#cb265-19" aria-hidden="true" tabindex="-1"></a>              ),</span>
<span id="cb265-20"><a href="Visualization-Tables-Figures.html#cb265-20" aria-hidden="true" tabindex="-1"></a>              <span class="at">missing_text =</span> <span class="st">&quot;Missing&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb265-21"><a href="Visualization-Tables-Figures.html#cb265-21" aria-hidden="true" tabindex="-1"></a>              <span class="fu">as_gt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb265-22"><a href="Visualization-Tables-Figures.html#cb265-22" aria-hidden="true" tabindex="-1"></a>              <span class="fu">tab_spanner</span>(</span>
<span id="cb265-23"><a href="Visualization-Tables-Figures.html#cb265-23" aria-hidden="true" tabindex="-1"></a>             <span class="at">label=</span><span class="st">&quot;DRUG GROUP&quot;</span>,</span>
<span id="cb265-24"><a href="Visualization-Tables-Figures.html#cb265-24" aria-hidden="true" tabindex="-1"></a>             <span class="at">columns =</span> <span class="fu">starts_with</span>(<span class="st">&quot;stat_&quot;</span>)</span>
<span id="cb265-25"><a href="Visualization-Tables-Figures.html#cb265-25" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb265-26"><a href="Visualization-Tables-Figures.html#cb265-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gtsave</span>(<span class="st">&quot;t1.html&quot;</span>,<span class="at">path=</span><span class="st">&quot;E:/projects/RX021PD0908/coronary/yunxian.report&quot;</span>)</span>
<span id="cb265-27"><a href="Visualization-Tables-Figures.html#cb265-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb265-28"><a href="Visualization-Tables-Figures.html#cb265-28" aria-hidden="true" tabindex="-1"></a><span class="do">## 细节- 添加表格的次级合并分组：</span></span>
<span id="cb265-29"><a href="Visualization-Tables-Figures.html#cb265-29" aria-hidden="true" tabindex="-1"></a><span class="fu">as_gt</span>() <span class="sc">%&gt;%</span>  <span class="do">## 还可以进行分组生成一级标题：</span></span>
<span id="cb265-30"><a href="Visualization-Tables-Figures.html#cb265-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb265-31"><a href="Visualization-Tables-Figures.html#cb265-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">&quot;用药分组&quot;</span>,</span>
<span id="cb265-32"><a href="Visualization-Tables-Figures.html#cb265-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">starts_with</span>(<span class="st">&quot;stat_&quot;</span>)  )</span></code></pre></div>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="Visualization-Tables-Figures.html#cb266-1" aria-hidden="true" tabindex="-1"></a>tbl_strata_ex1 <span class="ot">&lt;-</span></span>
<span id="cb266-2"><a href="Visualization-Tables-Figures.html#cb266-2" aria-hidden="true" tabindex="-1"></a>  trial <span class="sc">%&gt;%</span></span>
<span id="cb266-3"><a href="Visualization-Tables-Figures.html#cb266-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age, grade, stage, trt) <span class="sc">%&gt;%</span></span>
<span id="cb266-4"><a href="Visualization-Tables-Figures.html#cb266-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">grade =</span> <span class="fu">paste</span>(<span class="st">&quot;Grade&quot;</span>, grade)) <span class="sc">%&gt;%</span></span>
<span id="cb266-5"><a href="Visualization-Tables-Figures.html#cb266-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_strata</span>(</span>
<span id="cb266-6"><a href="Visualization-Tables-Figures.html#cb266-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">strata =</span> grade,</span>
<span id="cb266-7"><a href="Visualization-Tables-Figures.html#cb266-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">.tbl_fun =</span></span>
<span id="cb266-8"><a href="Visualization-Tables-Figures.html#cb266-8" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> .x <span class="sc">%&gt;%</span></span>
<span id="cb266-9"><a href="Visualization-Tables-Figures.html#cb266-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tbl_summary</span>(<span class="at">by =</span> trt, <span class="at">missing =</span> <span class="st">&quot;no&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb266-10"><a href="Visualization-Tables-Figures.html#cb266-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">add_n</span>(),</span>
<span id="cb266-11"><a href="Visualization-Tables-Figures.html#cb266-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">.header =</span> <span class="st">&quot;**{strata}**, N = {n}&quot;</span></span>
<span id="cb266-12"><a href="Visualization-Tables-Figures.html#cb266-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb266-13"><a href="Visualization-Tables-Figures.html#cb266-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb266-14"><a href="Visualization-Tables-Figures.html#cb266-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb266-15"><a href="Visualization-Tables-Figures.html#cb266-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Example 2 ----------------------------------</span></span>
<span id="cb266-16"><a href="Visualization-Tables-Figures.html#cb266-16" aria-hidden="true" tabindex="-1"></a>tbl_strata_ex2 <span class="ot">&lt;-</span></span>
<span id="cb266-17"><a href="Visualization-Tables-Figures.html#cb266-17" aria-hidden="true" tabindex="-1"></a>  trial <span class="sc">%&gt;%</span> </span>
<span id="cb266-18"><a href="Visualization-Tables-Figures.html#cb266-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(grade, response) <span class="sc">%&gt;%</span></span>
<span id="cb266-19"><a href="Visualization-Tables-Figures.html#cb266-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">grade =</span> <span class="fu">paste</span>(<span class="st">&quot;Grade&quot;</span>, grade)) <span class="sc">%&gt;%</span></span>
<span id="cb266-20"><a href="Visualization-Tables-Figures.html#cb266-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_strata2</span>(</span>
<span id="cb266-21"><a href="Visualization-Tables-Figures.html#cb266-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">strata =</span> grade,</span>
<span id="cb266-22"><a href="Visualization-Tables-Figures.html#cb266-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">.tbl_fun =</span></span>
<span id="cb266-23"><a href="Visualization-Tables-Figures.html#cb266-23" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span>.x <span class="sc">%&gt;%</span></span>
<span id="cb266-24"><a href="Visualization-Tables-Figures.html#cb266-24" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tbl_summary</span>(</span>
<span id="cb266-25"><a href="Visualization-Tables-Figures.html#cb266-25" aria-hidden="true" tabindex="-1"></a>      <span class="do">## 这里的response</span></span>
<span id="cb266-26"><a href="Visualization-Tables-Figures.html#cb266-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> <span class="fu">list</span>(<span class="at">response =</span> .y),</span>
<span id="cb266-27"><a href="Visualization-Tables-Figures.html#cb266-27" aria-hidden="true" tabindex="-1"></a>        <span class="at">missing =</span> <span class="st">&quot;no&quot;</span>,</span>
<span id="cb266-28"><a href="Visualization-Tables-Figures.html#cb266-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">statistic =</span> response <span class="sc">~</span> <span class="st">&quot;{p}%&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb266-29"><a href="Visualization-Tables-Figures.html#cb266-29" aria-hidden="true" tabindex="-1"></a>      <span class="fu">add_ci</span>(<span class="at">pattern =</span> <span class="st">&quot;{stat} ({ci})&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb266-30"><a href="Visualization-Tables-Figures.html#cb266-30" aria-hidden="true" tabindex="-1"></a>      <span class="fu">modify_header</span>(<span class="at">stat_0 =</span> <span class="st">&quot;**Rate (95% CI)**&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb266-31"><a href="Visualization-Tables-Figures.html#cb266-31" aria-hidden="true" tabindex="-1"></a>    <span class="do">## 这里上面一步的%&gt;% 也可以使用逗号来替换，但会增加一个百分号注释；</span></span>
<span id="cb266-32"><a href="Visualization-Tables-Figures.html#cb266-32" aria-hidden="true" tabindex="-1"></a>      <span class="fu">modify_footnote</span>(<span class="at">stat_0 =</span> <span class="cn">NA</span>),</span>
<span id="cb266-33"><a href="Visualization-Tables-Figures.html#cb266-33" aria-hidden="true" tabindex="-1"></a>    <span class="do">## 这个函数的作用是提取及合并数据：</span></span>
<span id="cb266-34"><a href="Visualization-Tables-Figures.html#cb266-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">.combine_with =</span> <span class="st">&quot;tbl_stack&quot;</span>,</span>
<span id="cb266-35"><a href="Visualization-Tables-Figures.html#cb266-35" aria-hidden="true" tabindex="-1"></a>    <span class="do">## 这一步是删除空白行：</span></span>
<span id="cb266-36"><a href="Visualization-Tables-Figures.html#cb266-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">.combine_args =</span> <span class="fu">list</span>(<span class="at">group_header =</span> <span class="cn">NULL</span>),</span>
<span id="cb266-37"><a href="Visualization-Tables-Figures.html#cb266-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">.quiet =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb266-38"><a href="Visualization-Tables-Figures.html#cb266-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modify_caption</span>(<span class="st">&quot;**Response Rate by Grade**&quot;</span>)</span></code></pre></div>
</div>
<div id="组间描述性统计p值" class="section level6 hasAnchor" number="7.1.5.5.2.2">
<h6><span class="header-section-number">7.1.5.5.2.2</span> 5.5.2.2 组间描述性统计（P值）<a href="Visualization-Tables-Figures.html#组间描述性统计p值" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="Visualization-Tables-Figures.html#cb267-1" aria-hidden="true" tabindex="-1"></a> trial <span class="sc">%&gt;%</span></span>
<span id="cb267-2"><a href="Visualization-Tables-Figures.html#cb267-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_summary</span>(</span>
<span id="cb267-3"><a href="Visualization-Tables-Figures.html#cb267-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> trt,</span>
<span id="cb267-4"><a href="Visualization-Tables-Figures.html#cb267-4" aria-hidden="true" tabindex="-1"></a>    <span class="do">## type = all_continuous() ~ &quot;continuous2&quot; ：将连续变量统计描述结果展示为多行，type设置为&quot;continuous2&quot;；  </span></span>
<span id="cb267-5"><a href="Visualization-Tables-Figures.html#cb267-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">type =</span> <span class="fu">all_continuous</span>() <span class="sc">~</span> <span class="st">&quot;continuous2&quot;</span>,</span>
<span id="cb267-6"><a href="Visualization-Tables-Figures.html#cb267-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">statistic =</span><span class="fu">all_continuous</span>() <span class="sc">~</span> <span class="fu">c</span>( <span class="st">&quot;{mean} ({sd})&quot;</span>,</span>
<span id="cb267-7"><a href="Visualization-Tables-Figures.html#cb267-7" aria-hidden="true" tabindex="-1"></a>                                     <span class="st">&quot;{median} ({p25}, {p75})&quot;</span>,  <span class="st">&quot;{min}, {max}&quot;</span>),</span>
<span id="cb267-8"><a href="Visualization-Tables-Figures.html#cb267-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">missing=</span><span class="st">&quot;always&quot;</span>, <span class="do">## 强制展示缺失值是否存在</span></span>
<span id="cb267-9"><a href="Visualization-Tables-Figures.html#cb267-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">missing_text=</span><span class="st">&#39;missing&#39;</span>)<span class="sc">%&gt;%</span>  <span class="do">## 修改缺失值的显示标签</span></span>
<span id="cb267-10"><a href="Visualization-Tables-Figures.html#cb267-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_p</span>(<span class="at">pvalue_fun =</span> <span class="sc">~</span><span class="fu">style_pvalue</span>(.x, <span class="at">digits =</span> <span class="dv">2</span>),</span>
<span id="cb267-11"><a href="Visualization-Tables-Figures.html#cb267-11" aria-hidden="true" tabindex="-1"></a>        <span class="do">## 定义检验形式：，组间比较，连续变量默认检验方法为秩和检验，分类变量为卡方检验，</span></span>
<span id="cb267-12"><a href="Visualization-Tables-Figures.html#cb267-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">list</span>(<span class="fu">all_continuous</span>() <span class="sc">~</span> <span class="st">&quot;t.test&quot;</span>,</span>
<span id="cb267-13"><a href="Visualization-Tables-Figures.html#cb267-13" aria-hidden="true" tabindex="-1"></a>             <span class="fu">all_categorical</span>() <span class="sc">~</span> <span class="st">&quot;fisher.test&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb267-14"><a href="Visualization-Tables-Figures.html#cb267-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_n</span>() <span class="sc">%&gt;%</span> <span class="do">## 添加每个样本的数量描述性统计 </span></span>
<span id="cb267-15"><a href="Visualization-Tables-Figures.html#cb267-15" aria-hidden="true" tabindex="-1"></a>  add_overall <span class="sc">%&gt;%</span>  </span>
<span id="cb267-16"><a href="Visualization-Tables-Figures.html#cb267-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modify_header</span>(<span class="at">label =</span> <span class="st">&quot;**Variable**&quot;</span>)  <span class="sc">%&gt;%</span> <span class="do">## 更新列名；</span></span>
<span id="cb267-17"><a href="Visualization-Tables-Figures.html#cb267-17" aria-hidden="true" tabindex="-1"></a>  <span class="do">## 添加表格标题</span></span>
<span id="cb267-18"><a href="Visualization-Tables-Figures.html#cb267-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modify_caption</span>(<span class="st">&quot;Patient Characteristics&quot;</span>)  <span class="sc">%&gt;%</span></span>
<span id="cb267-19"><a href="Visualization-Tables-Figures.html#cb267-19" aria-hidden="true" tabindex="-1"></a>  <span class="do">## 添加尾注：还有一种方法是直接使用modify_footnote</span></span>
<span id="cb267-20"><a href="Visualization-Tables-Figures.html#cb267-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># as_gt() %&gt;% #使用gt存在的问题是无法使用flex_table()</span></span>
<span id="cb267-21"><a href="Visualization-Tables-Figures.html#cb267-21" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  gt::tab_source_note(gt::md(&quot;*This data is simulated*&quot;)) </span></span>
<span id="cb267-22"><a href="Visualization-Tables-Figures.html#cb267-22" aria-hidden="true" tabindex="-1"></a>  <span class="do">## 表格导出保存;</span></span>
<span id="cb267-23"><a href="Visualization-Tables-Figures.html#cb267-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_flex_table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb267-24"><a href="Visualization-Tables-Figures.html#cb267-24" aria-hidden="true" tabindex="-1"></a>  flextable<span class="sc">::</span><span class="fu">save_as_docx</span>(.,<span class="at">path=</span><span class="st">&#39;C:/Users/DELL/tab_2.docx&#39;</span>)    </span></code></pre></div>
</div>
</div>
<div id="回归分析" class="section level5 hasAnchor" number="7.1.5.5.3">
<h5><span class="header-section-number">7.1.5.5.3</span> 回归分析<a href="Visualization-Tables-Figures.html#回归分析" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div id="线性回归逻辑回归" class="section level6 hasAnchor" number="7.1.5.5.3.1">
<h6><span class="header-section-number">7.1.5.5.3.1</span> 5.5.3.1 线性回归/逻辑回归<a href="Visualization-Tables-Figures.html#线性回归逻辑回归" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="Visualization-Tables-Figures.html#cb268-1" aria-hidden="true" tabindex="-1"></a><span class="do">##  Linear regression</span></span>
<span id="cb268-2"><a href="Visualization-Tables-Figures.html#cb268-2" aria-hidden="true" tabindex="-1"></a>table_35 <span class="ot">&lt;-</span> <span class="fu">glm</span>(inpatient_time <span class="sc">~</span> fbg_diff <span class="sc">+</span> fbg_reg <span class="sc">+</span> age <span class="sc">+</span> sex  <span class="sc">+</span> region <span class="sc">+</span> cad <span class="sc">+</span> hbp <span class="sc">+</span> stroke <span class="sc">+</span> ckd <span class="sc">+</span>  group_1 <span class="sc">+</span> treatment_plan,</span>
<span id="cb268-3"><a href="Visualization-Tables-Figures.html#cb268-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">family =</span> <span class="st">&quot;gaussian&quot;</span>, <span class="at">data =</span> secondary5) <span class="sc">%&gt;%</span> </span>
<span id="cb268-4"><a href="Visualization-Tables-Figures.html#cb268-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_regression</span>(</span>
<span id="cb268-5"><a href="Visualization-Tables-Figures.html#cb268-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">list</span>(</span>
<span id="cb268-6"><a href="Visualization-Tables-Figures.html#cb268-6" aria-hidden="true" tabindex="-1"></a>      fbg_diff <span class="sc">~</span> <span class="st">&quot;空腹血糖变化差值&quot;</span>,</span>
<span id="cb268-7"><a href="Visualization-Tables-Figures.html#cb268-7" aria-hidden="true" tabindex="-1"></a>      <span class="co"># pbg_diff ~ &quot;餐后血糖变化差值&quot;,</span></span>
<span id="cb268-8"><a href="Visualization-Tables-Figures.html#cb268-8" aria-hidden="true" tabindex="-1"></a>      fbg_reg <span class="sc">~</span> <span class="st">&quot;末次空腹血糖&lt;6.1mmol/l&quot;</span>,</span>
<span id="cb268-9"><a href="Visualization-Tables-Figures.html#cb268-9" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">~</span> <span class="st">&quot;年龄&quot;</span>,</span>
<span id="cb268-10"><a href="Visualization-Tables-Figures.html#cb268-10" aria-hidden="true" tabindex="-1"></a>      sex <span class="sc">~</span> <span class="st">&quot;性别&quot;</span>,</span>
<span id="cb268-11"><a href="Visualization-Tables-Figures.html#cb268-11" aria-hidden="true" tabindex="-1"></a>      <span class="co"># insurance_type ~ &quot;医疗保险&quot;,</span></span>
<span id="cb268-12"><a href="Visualization-Tables-Figures.html#cb268-12" aria-hidden="true" tabindex="-1"></a>      region <span class="sc">~</span> <span class="st">&quot;地区&quot;</span>,</span>
<span id="cb268-13"><a href="Visualization-Tables-Figures.html#cb268-13" aria-hidden="true" tabindex="-1"></a>      cad <span class="sc">~</span> <span class="st">&quot;冠心病&quot;</span>,</span>
<span id="cb268-14"><a href="Visualization-Tables-Figures.html#cb268-14" aria-hidden="true" tabindex="-1"></a>      <span class="co"># disease_num ~ &quot;合并疾病数目&quot;,</span></span>
<span id="cb268-15"><a href="Visualization-Tables-Figures.html#cb268-15" aria-hidden="true" tabindex="-1"></a>      group_1 <span class="sc">~</span> <span class="st">&quot;基础vs.预混&quot;</span>,</span>
<span id="cb268-16"><a href="Visualization-Tables-Figures.html#cb268-16" aria-hidden="true" tabindex="-1"></a>      treatment_plan <span class="sc">~</span> <span class="st">&quot;糖尿病用药方案&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb268-17"><a href="Visualization-Tables-Figures.html#cb268-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bold_p</span>(<span class="fl">0.05</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb268-18"><a href="Visualization-Tables-Figures.html#cb268-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modify_header</span>(<span class="at">label =</span> <span class="st">&quot;**变量**&quot;</span>)</span>
<span id="cb268-19"><a href="Visualization-Tables-Figures.html#cb268-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-20"><a href="Visualization-Tables-Figures.html#cb268-20" aria-hidden="true" tabindex="-1"></a>table_35</span>
<span id="cb268-21"><a href="Visualization-Tables-Figures.html#cb268-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-22"><a href="Visualization-Tables-Figures.html#cb268-22" aria-hidden="true" tabindex="-1"></a><span class="do">## 逻辑回归：</span></span>
<span id="cb268-23"><a href="Visualization-Tables-Figures.html#cb268-23" aria-hidden="true" tabindex="-1"></a>mod1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(response <span class="sc">~</span> trt <span class="sc">+</span> age <span class="sc">+</span> grade, trial, <span class="at">family =</span> binomial)</span>
<span id="cb268-24"><a href="Visualization-Tables-Figures.html#cb268-24" aria-hidden="true" tabindex="-1"></a>t1 <span class="ot">&lt;-</span> <span class="fu">tbl_regression</span>(mod1, <span class="at">exponentiate =</span> <span class="cn">TRUE</span>)</span>
<span id="cb268-25"><a href="Visualization-Tables-Figures.html#cb268-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-26"><a href="Visualization-Tables-Figures.html#cb268-26" aria-hidden="true" tabindex="-1"></a><span class="do">## tab_regression参数解析：</span></span>
<span id="cb268-27"><a href="Visualization-Tables-Figures.html#cb268-27" aria-hidden="true" tabindex="-1"></a><span class="fu">tbl_regression</span>(</span>
<span id="cb268-28"><a href="Visualization-Tables-Figures.html#cb268-28" aria-hidden="true" tabindex="-1"></a>  x,</span>
<span id="cb268-29"><a href="Visualization-Tables-Figures.html#cb268-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">label =</span> <span class="cn">NULL</span>, <span class="do">## 添加标签：</span></span>
<span id="cb268-30"><a href="Visualization-Tables-Figures.html#cb268-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">exponentiate =</span> <span class="cn">FALSE</span>,</span>
<span id="cb268-31"><a href="Visualization-Tables-Figures.html#cb268-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">include =</span> <span class="fu">everything</span>(),</span>
<span id="cb268-32"><a href="Visualization-Tables-Figures.html#cb268-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">show_single_row =</span> <span class="cn">NULL</span>,  <span class="do">## 单行或多行展示，例如性别是否要分组展示等情况；</span></span>
<span id="cb268-33"><a href="Visualization-Tables-Figures.html#cb268-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">conf.level =</span> <span class="cn">NULL</span>,</span>
<span id="cb268-34"><a href="Visualization-Tables-Figures.html#cb268-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">intercept =</span> <span class="cn">FALSE</span>,</span>
<span id="cb268-35"><a href="Visualization-Tables-Figures.html#cb268-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">estimate_fun =</span> <span class="cn">NULL</span>,</span>
<span id="cb268-36"><a href="Visualization-Tables-Figures.html#cb268-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">pvalue_fun =</span> <span class="cn">NULL</span>,</span>
<span id="cb268-37"><a href="Visualization-Tables-Figures.html#cb268-37" aria-hidden="true" tabindex="-1"></a>  <span class="at">tidy_fun =</span> <span class="cn">NULL</span>,</span>
<span id="cb268-38"><a href="Visualization-Tables-Figures.html#cb268-38" aria-hidden="true" tabindex="-1"></a>  <span class="at">add_estimate_to_reference_rows =</span> <span class="cn">FALSE</span>,</span>
<span id="cb268-39"><a href="Visualization-Tables-Figures.html#cb268-39" aria-hidden="true" tabindex="-1"></a>  <span class="at">show_yesno =</span> <span class="cn">NULL</span>,</span>
<span id="cb268-40"><a href="Visualization-Tables-Figures.html#cb268-40" aria-hidden="true" tabindex="-1"></a>  <span class="at">exclude =</span> <span class="cn">NULL</span>,</span>
<span id="cb268-41"><a href="Visualization-Tables-Figures.html#cb268-41" aria-hidden="true" tabindex="-1"></a>  ...</span>
<span id="cb268-42"><a href="Visualization-Tables-Figures.html#cb268-42" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb268-43"><a href="Visualization-Tables-Figures.html#cb268-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-44"><a href="Visualization-Tables-Figures.html#cb268-44" aria-hidden="true" tabindex="-1"></a><span class="do">## 使用add_glance_table来输出函数结果中更多的参数：</span></span>
<span id="cb268-45"><a href="Visualization-Tables-Figures.html#cb268-45" aria-hidden="true" tabindex="-1"></a><span class="do">## add_glance_table()来自一个补充的R包：</span></span>
<span id="cb268-46"><a href="Visualization-Tables-Figures.html#cb268-46" aria-hidden="true" tabindex="-1"></a>包括模型的R方、AIC信息、样本量等，仅能适用于lm函数，不适合glm</span>
<span id="cb268-47"><a href="Visualization-Tables-Figures.html#cb268-47" aria-hidden="true" tabindex="-1"></a>mod_va<span class="ot">&lt;-</span><span class="fu">lm</span>(retinol_μmolL<span class="sc">~</span>sex<span class="sc">+</span>age_cut<span class="sc">+</span>Region<span class="sc">+</span>SBP<span class="sc">+</span>DBP,<span class="at">data=</span>my2) <span class="sc">%&gt;%</span> <span class="fu">tbl_regression</span>()</span>
<span id="cb268-48"><a href="Visualization-Tables-Figures.html#cb268-48" aria-hidden="true" tabindex="-1"></a>mod_va<span class="sc">%&gt;%</span> <span class="fu">add_glance_table</span>(</span>
<span id="cb268-49"><a href="Visualization-Tables-Figures.html#cb268-49" aria-hidden="true" tabindex="-1"></a>  <span class="at">label =</span> <span class="fu">list</span>(sigma <span class="sc">~</span> <span class="st">&quot;\U03C3&quot;</span>),</span>
<span id="cb268-50"><a href="Visualization-Tables-Figures.html#cb268-50" aria-hidden="true" tabindex="-1"></a>   <span class="at">include =</span> <span class="fu">c</span>(r.squared, AIC, sigma,nobs))</span></code></pre></div>
</div>
<div id="生存分析-1" class="section level6 hasAnchor" number="7.1.5.5.3.2">
<h6><span class="header-section-number">7.1.5.5.3.2</span> 5.5.3.2 生存分析<a href="Visualization-Tables-Figures.html#生存分析-1" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="Visualization-Tables-Figures.html#cb269-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survival)</span>
<span id="cb269-2"><a href="Visualization-Tables-Figures.html#cb269-2" aria-hidden="true" tabindex="-1"></a>mod1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(response <span class="sc">~</span> trt <span class="sc">+</span> age <span class="sc">+</span> grade, trial, <span class="at">family =</span> binomial)</span>
<span id="cb269-3"><a href="Visualization-Tables-Figures.html#cb269-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb269-4"><a href="Visualization-Tables-Figures.html#cb269-4" aria-hidden="true" tabindex="-1"></a>t1 <span class="ot">&lt;-</span> <span class="fu">tbl_regression</span>(mod1, <span class="at">exponentiate =</span> <span class="cn">TRUE</span>)</span>
<span id="cb269-5"><a href="Visualization-Tables-Figures.html#cb269-5" aria-hidden="true" tabindex="-1"></a><span class="co"># build survival model table</span></span>
<span id="cb269-6"><a href="Visualization-Tables-Figures.html#cb269-6" aria-hidden="true" tabindex="-1"></a>t2 <span class="ot">&lt;-</span></span>
<span id="cb269-7"><a href="Visualization-Tables-Figures.html#cb269-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coxph</span>(<span class="fu">Surv</span>(ttdeath, death) <span class="sc">~</span> trt <span class="sc">+</span> grade <span class="sc">+</span> age, trial) <span class="sc">%&gt;%</span></span>
<span id="cb269-8"><a href="Visualization-Tables-Figures.html#cb269-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_regression</span>(<span class="at">exponentiate =</span> <span class="cn">TRUE</span>)</span>
<span id="cb269-9"><a href="Visualization-Tables-Figures.html#cb269-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb269-10"><a href="Visualization-Tables-Figures.html#cb269-10" aria-hidden="true" tabindex="-1"></a><span class="co"># merge tables </span></span>
<span id="cb269-11"><a href="Visualization-Tables-Figures.html#cb269-11" aria-hidden="true" tabindex="-1"></a>tbl_merge_ex1 <span class="ot">&lt;-</span></span>
<span id="cb269-12"><a href="Visualization-Tables-Figures.html#cb269-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_merge</span>(</span>
<span id="cb269-13"><a href="Visualization-Tables-Figures.html#cb269-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">tbls =</span> <span class="fu">list</span>(t1, t2),</span>
<span id="cb269-14"><a href="Visualization-Tables-Figures.html#cb269-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">tab_spanner =</span> <span class="fu">c</span>(<span class="st">&quot;**Tumor Response**&quot;</span>, <span class="st">&quot;**Time to Death**&quot;</span>)</span>
<span id="cb269-15"><a href="Visualization-Tables-Figures.html#cb269-15" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
</div>
</div>
<div id="自定义函数输出" class="section level5 hasAnchor" number="7.1.5.5.4">
<h5><span class="header-section-number">7.1.5.5.4</span> 自定义函数输出<a href="Visualization-Tables-Figures.html#自定义函数输出" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div id="自定义相关系数" class="section level6 hasAnchor" number="7.1.5.5.4.1">
<h6><span class="header-section-number">7.1.5.5.4.1</span> 5.5.4.1 自定义相关系数<a href="Visualization-Tables-Figures.html#自定义相关系数" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="Visualization-Tables-Figures.html#cb270-1" aria-hidden="true" tabindex="-1"></a>作者：一个柒</span>
<span id="cb270-2"><a href="Visualization-Tables-Figures.html#cb270-2" aria-hidden="true" tabindex="-1"></a>链接：https<span class="sc">:</span><span class="er">//</span>zhuanlan.zhihu.com<span class="sc">/</span>p<span class="sc">/</span><span class="dv">506580074</span></span>
<span id="cb270-3"><a href="Visualization-Tables-Figures.html#cb270-3" aria-hidden="true" tabindex="-1"></a>来源：知乎</span>
<span id="cb270-4"><a href="Visualization-Tables-Figures.html#cb270-4" aria-hidden="true" tabindex="-1"></a>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span>
<span id="cb270-5"><a href="Visualization-Tables-Figures.html#cb270-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-6"><a href="Visualization-Tables-Figures.html#cb270-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 示例中，vars为所有自变量，`SUA`为因变量，数据集为ds</span></span>
<span id="cb270-7"><a href="Visualization-Tables-Figures.html#cb270-7" aria-hidden="true" tabindex="-1"></a><span class="co"># vars &lt;- c(&quot;age&quot;,&quot;BMI&quot;)</span></span>
<span id="cb270-8"><a href="Visualization-Tables-Figures.html#cb270-8" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb270-9"><a href="Visualization-Tables-Figures.html#cb270-9" aria-hidden="true" tabindex="-1"></a>fun_spearman_r <span class="ot">&lt;-</span> <span class="cf">function</span>(data, variable, ...) {</span>
<span id="cb270-10"><a href="Visualization-Tables-Figures.html#cb270-10" aria-hidden="true" tabindex="-1"></a>  r <span class="ot">=</span> <span class="fu">cor.test</span>(data[[variable]],data<span class="sc">$</span><span class="st">`</span><span class="at">SUA</span><span class="st">`</span>,<span class="at">method =</span> <span class="st">&quot;spearman&quot;</span>)<span class="sc">$</span>estimate</span>
<span id="cb270-11"><a href="Visualization-Tables-Figures.html#cb270-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">tibble</span>(<span class="at">r =</span> r)</span>
<span id="cb270-12"><a href="Visualization-Tables-Figures.html#cb270-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb270-13"><a href="Visualization-Tables-Figures.html#cb270-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 此处tibble(r=r)很必要</span></span>
<span id="cb270-14"><a href="Visualization-Tables-Figures.html#cb270-14" aria-hidden="true" tabindex="-1"></a>fun_spearman_p <span class="ot">&lt;-</span> <span class="cf">function</span>(data, variable, ...) {</span>
<span id="cb270-15"><a href="Visualization-Tables-Figures.html#cb270-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor.test</span>(data[[variable]],data<span class="sc">$</span><span class="st">`</span><span class="at">SUA</span><span class="st">`</span>,<span class="at">method =</span> <span class="st">&quot;spearman&quot;</span>)<span class="sc">$</span>p.value</span>
<span id="cb270-16"><a href="Visualization-Tables-Figures.html#cb270-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb270-17"><a href="Visualization-Tables-Figures.html#cb270-17" aria-hidden="true" tabindex="-1"></a><span class="co"># p不需要(p=p)，因为r为主体自定义函数，p为add_stat</span></span>
<span id="cb270-18"><a href="Visualization-Tables-Figures.html#cb270-18" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb270-19"><a href="Visualization-Tables-Figures.html#cb270-19" aria-hidden="true" tabindex="-1"></a>ds[vars]<span class="ot">&lt;-</span> <span class="fu">sapply</span>(ds[vars],as.numeric)</span>
<span id="cb270-20"><a href="Visualization-Tables-Figures.html#cb270-20" aria-hidden="true" tabindex="-1"></a>tbl_custom_summary_ex <span class="ot">&lt;-</span> ds <span class="sc">%&gt;%</span></span>
<span id="cb270-21"><a href="Visualization-Tables-Figures.html#cb270-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="fu">all_of</span>(vars),SUA) <span class="sc">%&gt;%</span></span>
<span id="cb270-22"><a href="Visualization-Tables-Figures.html#cb270-22" aria-hidden="true" tabindex="-1"></a>  <span class="do">## tbl_custom_summary:输入自定义函数并且能解析tidyr的结果:</span></span>
<span id="cb270-23"><a href="Visualization-Tables-Figures.html#cb270-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tbl_custom_summary</span>(<span class="at">include =</span> <span class="fu">all_of</span>(vars),</span>
<span id="cb270-24"><a href="Visualization-Tables-Figures.html#cb270-24" aria-hidden="true" tabindex="-1"></a>                       <span class="at">stat_fns =</span> <span class="fu">everything</span>() <span class="sc">~</span> fun_spearman_r,</span>
<span id="cb270-25"><a href="Visualization-Tables-Figures.html#cb270-25" aria-hidden="true" tabindex="-1"></a>                       <span class="at">statistic =</span> <span class="fu">everything</span>() <span class="sc">~</span> <span class="st">&quot;{r}&quot;</span>,</span>
<span id="cb270-26"><a href="Visualization-Tables-Figures.html#cb270-26" aria-hidden="true" tabindex="-1"></a>                       <span class="at">digits =</span> <span class="fu">everything</span>() <span class="sc">~</span> <span class="dv">3</span>, <span class="co"># 保留3位小数</span></span>
<span id="cb270-27"><a href="Visualization-Tables-Figures.html#cb270-27" aria-hidden="true" tabindex="-1"></a>                       <span class="at">type =</span> <span class="fu">list</span>(<span class="fu">everything</span>() <span class="sc">~</span> <span class="st">&quot;continuous&quot;</span>),</span>
<span id="cb270-28"><a href="Visualization-Tables-Figures.html#cb270-28" aria-hidden="true" tabindex="-1"></a>                       <span class="at">missing =</span> <span class="st">&quot;no&quot;</span>,</span>
<span id="cb270-29"><a href="Visualization-Tables-Figures.html#cb270-29" aria-hidden="true" tabindex="-1"></a>                       <span class="at">label =</span> <span class="fu">list</span>(<span class="st">`</span><span class="at">age</span><span class="st">`</span> <span class="sc">~</span> <span class="st">&quot;年龄&quot;</span>,</span>
<span id="cb270-30"><a href="Visualization-Tables-Figures.html#cb270-30" aria-hidden="true" tabindex="-1"></a>                                    <span class="st">`</span><span class="at">BMI</span><span class="st">`</span> <span class="sc">~</span> <span class="st">&quot;身体质量指数(BMI)&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb270-31"><a href="Visualization-Tables-Figures.html#cb270-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_stat</span>(<span class="at">fns =</span> <span class="fu">everything</span>() <span class="sc">~</span> fun_spearman_p) <span class="sc">%&gt;%</span></span>
<span id="cb270-32"><a href="Visualization-Tables-Figures.html#cb270-32" aria-hidden="true" tabindex="-1"></a>    <span class="do">## 不太理解，这里也要使用自定义的函数来输入数据：</span></span>
<span id="cb270-33"><a href="Visualization-Tables-Figures.html#cb270-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modify_fmt_fun</span>(add_stat_1 <span class="sc">~</span> <span class="cf">function</span>(x) <span class="fu">style_pvalue</span>(x, <span class="at">digits =</span> <span class="dv">3</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb270-34"><a href="Visualization-Tables-Figures.html#cb270-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># p值如果先保留小数再style_pvalue会出现本来应`&lt;0.001`但变成`0.001`的情况</span></span>
<span id="cb270-35"><a href="Visualization-Tables-Figures.html#cb270-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modify_header</span>(<span class="at">label =</span> <span class="st">&#39;**变量**&#39;</span>,stat_0 <span class="sc">~</span> <span class="st">&quot;**r**&quot;</span>, add_stat_1 <span class="sc">~</span> <span class="st">&quot;**P值**&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb270-36"><a href="Visualization-Tables-Figures.html#cb270-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">bold_labels</span>() <span class="sc">%&gt;%</span></span>
<span id="cb270-37"><a href="Visualization-Tables-Figures.html#cb270-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modify_footnote</span>(<span class="fu">all_stat_cols</span>() <span class="sc">~</span> <span class="cn">NA</span>) <span class="co"># 不要脚注</span></span></code></pre></div>
</div>
<div id="效应值计算" class="section level6 hasAnchor" number="7.1.5.5.4.2">
<h6><span class="header-section-number">7.1.5.5.4.2</span> 5.4.4.2 效应值计算<a href="Visualization-Tables-Figures.html#效应值计算" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="Visualization-Tables-Figures.html#cb271-1" aria-hidden="true" tabindex="-1"></a><span class="do">### 效应值计算函数方法1： </span></span>
<span id="cb271-2"><a href="Visualization-Tables-Figures.html#cb271-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gtsummary)</span>
<span id="cb271-3"><a href="Visualization-Tables-Figures.html#cb271-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb271-4"><a href="Visualization-Tables-Figures.html#cb271-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb271-5"><a href="Visualization-Tables-Figures.html#cb271-5" aria-hidden="true" tabindex="-1"></a><span class="co"># function that returns either Cohen&#39;s D or the 1988 interpretation of its size</span></span>
<span id="cb271-6"><a href="Visualization-Tables-Figures.html#cb271-6" aria-hidden="true" tabindex="-1"></a>CohenD <span class="ot">&lt;-</span> <span class="cf">function</span>(data, variable, by, <span class="at">interpret_d =</span> <span class="cn">FALSE</span>, ...) {</span>
<span id="cb271-7"><a href="Visualization-Tables-Figures.html#cb271-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Cohen&#39;s d, Hedges&#39;s g (correction=TRUE or FALSE) and Glass’s delta</span></span>
<span id="cb271-8"><a href="Visualization-Tables-Figures.html#cb271-8" aria-hidden="true" tabindex="-1"></a>  ES <span class="ot">&lt;-</span> effectsize<span class="sc">::</span><span class="fu">cohens_d</span>(data[[variable]], <span class="fu">factor</span>(data[[by]]),</span>
<span id="cb271-9"><a href="Visualization-Tables-Figures.html#cb271-9" aria-hidden="true" tabindex="-1"></a>                             <span class="at">ci=</span>.<span class="dv">90</span>,</span>
<span id="cb271-10"><a href="Visualization-Tables-Figures.html#cb271-10" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pooled_sd=</span><span class="cn">TRUE</span>,</span>
<span id="cb271-11"><a href="Visualization-Tables-Figures.html#cb271-11" aria-hidden="true" tabindex="-1"></a>                             <span class="at">paired=</span><span class="cn">FALSE</span>,</span>
<span id="cb271-12"><a href="Visualization-Tables-Figures.html#cb271-12" aria-hidden="true" tabindex="-1"></a>                             <span class="at">correction=</span><span class="cn">TRUE</span>)</span>
<span id="cb271-13"><a href="Visualization-Tables-Figures.html#cb271-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb271-14"><a href="Visualization-Tables-Figures.html#cb271-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (interpret_d <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb271-15"><a href="Visualization-Tables-Figures.html#cb271-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(stringr<span class="sc">::</span><span class="fu">str_glue</span>(<span class="st">&quot;{effectsize::interpret_d(ES$Cohens_d, rules = &#39;cohen1988&#39;)}&quot;</span>))</span>
<span id="cb271-16"><a href="Visualization-Tables-Figures.html#cb271-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb271-17"><a href="Visualization-Tables-Figures.html#cb271-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Formatting statistic with CI</span></span>
<span id="cb271-18"><a href="Visualization-Tables-Figures.html#cb271-18" aria-hidden="true" tabindex="-1"></a>  est <span class="ot">&lt;-</span> <span class="fu">style_sigfig</span>(ES<span class="sc">$</span>Cohens_d)</span>
<span id="cb271-19"><a href="Visualization-Tables-Figures.html#cb271-19" aria-hidden="true" tabindex="-1"></a>  ci_lower <span class="ot">&lt;-</span> <span class="fu">style_sigfig</span>(ES<span class="sc">$</span>CI_low)</span>
<span id="cb271-20"><a href="Visualization-Tables-Figures.html#cb271-20" aria-hidden="true" tabindex="-1"></a>  ci_upper <span class="ot">&lt;-</span> <span class="fu">style_sigfig</span>(ES<span class="sc">$</span>CI_high)</span>
<span id="cb271-21"><a href="Visualization-Tables-Figures.html#cb271-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb271-22"><a href="Visualization-Tables-Figures.html#cb271-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Returning estimate with CI together</span></span>
<span id="cb271-23"><a href="Visualization-Tables-Figures.html#cb271-23" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_glue</span>(<span class="st">&quot;{est} ({ci_lower}, {ci_upper})&quot;</span>)</span>
<span id="cb271-24"><a href="Visualization-Tables-Figures.html#cb271-24" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb271-25"><a href="Visualization-Tables-Figures.html#cb271-25" aria-hidden="true" tabindex="-1"></a>CohenD_interpret_d <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">partial</span>(CohenD, <span class="at">interpret_d =</span> <span class="cn">TRUE</span>)</span>
<span id="cb271-26"><a href="Visualization-Tables-Figures.html#cb271-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb271-27"><a href="Visualization-Tables-Figures.html#cb271-27" aria-hidden="true" tabindex="-1"></a>trial <span class="sc">%&gt;%</span></span>
<span id="cb271-28"><a href="Visualization-Tables-Figures.html#cb271-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(trt, age, marker) <span class="sc">%&gt;%</span></span>
<span id="cb271-29"><a href="Visualization-Tables-Figures.html#cb271-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_summary</span>(<span class="at">by =</span> trt, <span class="at">missing =</span> <span class="st">&quot;no&quot;</span>, <span class="at">statistic =</span> <span class="fu">all_continuous</span>() <span class="sc">~</span> <span class="st">&quot;{mean} ± {sd}&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb271-30"><a href="Visualization-Tables-Figures.html#cb271-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_p</span>(<span class="at">test =</span> <span class="fu">everything</span>() <span class="sc">~</span> t.test) <span class="sc">%&gt;%</span></span>
<span id="cb271-31"><a href="Visualization-Tables-Figures.html#cb271-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_stat</span>(<span class="at">fns =</span> <span class="fu">everything</span>() <span class="sc">~</span> CohenD, <span class="at">header =</span> <span class="st">&quot;**ES (90% CI)**&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb271-32"><a href="Visualization-Tables-Figures.html#cb271-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_stat</span>(<span class="at">fns =</span> <span class="fu">everything</span>() <span class="sc">~</span> CohenD_interpret_d, <span class="at">header =</span> <span class="st">&quot;**Interpretation**&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="Visualization-Tables-Figures.html#cb272-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 效应值计算函数方法2：</span></span>
<span id="cb272-2"><a href="Visualization-Tables-Figures.html#cb272-2" aria-hidden="true" tabindex="-1"></a><span class="do">## 使用使用该add_stat()函数的方法：增加额外的函数或者置信区间：效应大小[90％CI]</span></span>
<span id="cb272-3"><a href="Visualization-Tables-Figures.html#cb272-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 关于效应大小的计算：</span></span>
<span id="cb272-4"><a href="Visualization-Tables-Figures.html#cb272-4" aria-hidden="true" tabindex="-1"></a>效应量可以解决P值无法刻画相关程度大小和差异大小的问题，也可以避免“P值操控”现象。</span>
<span id="cb272-5"><a href="Visualization-Tables-Figures.html#cb272-5" aria-hidden="true" tabindex="-1"></a>效应量衡量实验真实效果大小或者变量关联强度的指标, 它不受样本容量大小的影响 。</span>
<span id="cb272-6"><a href="Visualization-Tables-Figures.html#cb272-6" aria-hidden="true" tabindex="-1"></a>依据效应量的大小, 能够判断具有显著差异的研究结果是否具有实际意义或重要性。</span>
<span id="cb272-7"><a href="Visualization-Tables-Figures.html#cb272-7" aria-hidden="true" tabindex="-1"></a>P值代表的是统计学上的意义，而效应量是能反映实际上的意义，有时候即使有显著的统计学意义，但是效应量却可以很小。</span>
<span id="cb272-8"><a href="Visualization-Tables-Figures.html#cb272-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-9"><a href="Visualization-Tables-Figures.html#cb272-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-10"><a href="Visualization-Tables-Figures.html#cb272-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-11"><a href="Visualization-Tables-Figures.html#cb272-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb272-12"><a href="Visualization-Tables-Figures.html#cb272-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gtsummary)</span>
<span id="cb272-13"><a href="Visualization-Tables-Figures.html#cb272-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-14"><a href="Visualization-Tables-Figures.html#cb272-14" aria-hidden="true" tabindex="-1"></a>my_EStest <span class="ot">&lt;-</span> <span class="cf">function</span>(data, variable, by, ...) {</span>
<span id="cb272-15"><a href="Visualization-Tables-Figures.html#cb272-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Cohen&#39;s D</span></span>
<span id="cb272-16"><a href="Visualization-Tables-Figures.html#cb272-16" aria-hidden="true" tabindex="-1"></a>  d <span class="ot">&lt;-</span> effsize<span class="sc">::</span><span class="fu">cohen.d</span>(data[[variable]] <span class="sc">~</span> <span class="fu">as.factor</span>(data[[by]]), </span>
<span id="cb272-17"><a href="Visualization-Tables-Figures.html#cb272-17" aria-hidden="true" tabindex="-1"></a>                   <span class="at">conf.level=</span>.<span class="dv">90</span>, <span class="at">pooled=</span><span class="cn">TRUE</span>, <span class="at">paired=</span><span class="cn">FALSE</span>, </span>
<span id="cb272-18"><a href="Visualization-Tables-Figures.html#cb272-18" aria-hidden="true" tabindex="-1"></a>                   <span class="at">hedges.correction=</span><span class="cn">TRUE</span>)</span>
<span id="cb272-19"><a href="Visualization-Tables-Figures.html#cb272-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Formatting statistic with CI</span></span>
<span id="cb272-20"><a href="Visualization-Tables-Figures.html#cb272-20" aria-hidden="true" tabindex="-1"></a>  est <span class="ot">&lt;-</span> <span class="fu">style_sigfig</span>(d<span class="sc">$</span>estimate)</span>
<span id="cb272-21"><a href="Visualization-Tables-Figures.html#cb272-21" aria-hidden="true" tabindex="-1"></a>  ci <span class="ot">&lt;-</span> <span class="fu">style_sigfig</span>(d<span class="sc">$</span>conf.int) <span class="sc">%&gt;%</span> <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>)</span>
<span id="cb272-22"><a href="Visualization-Tables-Figures.html#cb272-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># returning estimate with CI together</span></span>
<span id="cb272-23"><a href="Visualization-Tables-Figures.html#cb272-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_glue</span>(<span class="st">&quot;{est} ({ci})&quot;</span>)</span>
<span id="cb272-24"><a href="Visualization-Tables-Figures.html#cb272-24" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb272-25"><a href="Visualization-Tables-Figures.html#cb272-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-26"><a href="Visualization-Tables-Figures.html#cb272-26" aria-hidden="true" tabindex="-1"></a>add_ES <span class="ot">&lt;-</span></span>
<span id="cb272-27"><a href="Visualization-Tables-Figures.html#cb272-27" aria-hidden="true" tabindex="-1"></a>  trial <span class="sc">%&gt;%</span></span>
<span id="cb272-28"><a href="Visualization-Tables-Figures.html#cb272-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(trt, age) <span class="sc">%&gt;%</span></span>
<span id="cb272-29"><a href="Visualization-Tables-Figures.html#cb272-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_summary</span>(<span class="at">by =</span> trt, <span class="at">missing =</span> <span class="st">&quot;no&quot;</span>,</span>
<span id="cb272-30"><a href="Visualization-Tables-Figures.html#cb272-30" aria-hidden="true" tabindex="-1"></a>              <span class="at">statistic =</span> <span class="fu">list</span>(<span class="fu">all_continuous</span>() <span class="sc">~</span> <span class="st">&quot;{mean} ({sd})&quot;</span>),</span>
<span id="cb272-31"><a href="Visualization-Tables-Figures.html#cb272-31" aria-hidden="true" tabindex="-1"></a>              <span class="at">digits =</span> <span class="fu">list</span>(<span class="fu">all_continuous</span>() <span class="sc">~</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb272-32"><a href="Visualization-Tables-Figures.html#cb272-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_p</span>(<span class="at">test =</span> <span class="fu">everything</span>() <span class="sc">~</span> t.test) <span class="sc">%&gt;%</span></span>
<span id="cb272-33"><a href="Visualization-Tables-Figures.html#cb272-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_stat</span>(</span>
<span id="cb272-34"><a href="Visualization-Tables-Figures.html#cb272-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">fns =</span> <span class="fu">everything</span>() <span class="sc">~</span> my_EStest,</span>
<span id="cb272-35"><a href="Visualization-Tables-Figures.html#cb272-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">fmt_fun =</span> <span class="cn">NULL</span>,</span>
<span id="cb272-36"><a href="Visualization-Tables-Figures.html#cb272-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">header =</span> <span class="st">&quot;**ES (90% CI)**&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb272-37"><a href="Visualization-Tables-Figures.html#cb272-37" aria-hidden="true" tabindex="-1"></a>  <span class="do">## 添加尾注：</span></span>
<span id="cb272-38"><a href="Visualization-Tables-Figures.html#cb272-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modify_footnote</span>(add_stat_1 <span class="sc">~</span> <span class="st">&quot;Cohen&#39;s D (90% CI)&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="辅助-参数化" class="section level5 hasAnchor" number="7.1.5.5.5">
<h5><span class="header-section-number">7.1.5.5.5</span> 辅助/ 参数化<a href="Visualization-Tables-Figures.html#辅助-参数化" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="Visualization-Tables-Figures.html#cb273-1" aria-hidden="true" tabindex="-1"></a> <span class="co"># 合并表格后：remove spanning headers</span></span>
<span id="cb273-2"><a href="Visualization-Tables-Figures.html#cb273-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modify_spanning_header</span>(<span class="fu">everything</span>() <span class="sc">~</span> <span class="cn">NA</span>)</span>
<span id="cb273-3"><a href="Visualization-Tables-Figures.html#cb273-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb273-4"><a href="Visualization-Tables-Figures.html#cb273-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 控制试验组和安慰剂组的位置顺序：</span></span>
<span id="cb273-5"><a href="Visualization-Tables-Figures.html#cb273-5" aria-hidden="true" tabindex="-1"></a>trial <span class="sc">%&gt;%</span></span>
<span id="cb273-6"><a href="Visualization-Tables-Figures.html#cb273-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(trt, age, marker) <span class="sc">%&gt;%</span>  <span class="co">#</span></span>
<span id="cb273-7"><a href="Visualization-Tables-Figures.html#cb273-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">trt =</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>(trt)) <span class="sc">%&gt;%</span>   <span class="co"># reverse the ordering of trt variable</span></span>
<span id="cb273-8"><a href="Visualization-Tables-Figures.html#cb273-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_summary</span>(<span class="at">by =</span> trt)</span>
<span id="cb273-9"><a href="Visualization-Tables-Figures.html#cb273-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb273-10"><a href="Visualization-Tables-Figures.html#cb273-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 两种合并表格的方法：</span></span>
<span id="cb273-11"><a href="Visualization-Tables-Figures.html#cb273-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 横向合并表格：</span></span>
<span id="cb273-12"><a href="Visualization-Tables-Figures.html#cb273-12" aria-hidden="true" tabindex="-1"></a>table_11 <span class="ot">&lt;-</span></span>
<span id="cb273-13"><a href="Visualization-Tables-Figures.html#cb273-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_merge</span>(<span class="at">tbls =</span> <span class="fu">list</span>(a, b, c),</span>
<span id="cb273-14"><a href="Visualization-Tables-Figures.html#cb273-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">tab_spanner =</span> <span class="fu">c</span>(<span class="st">&quot;**非内分泌科就诊**&quot;</span>, <span class="st">&quot;**内分泌科就诊**&quot;</span>, <span class="st">&quot;**总共**&quot;</span>) ) </span>
<span id="cb273-15"><a href="Visualization-Tables-Figures.html#cb273-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 纵向合并表格：</span></span>
<span id="cb273-16"><a href="Visualization-Tables-Figures.html#cb273-16" aria-hidden="true" tabindex="-1"></a><span class="fu">tbl_stack</span>(<span class="fu">list</span>(tbl1, tbl2), <span class="at">group_header =</span> <span class="fu">c</span>(<span class="st">&quot;versicolor&quot;</span>, <span class="st">&quot;virginica&quot;</span>))</span>
<span id="cb273-17"><a href="Visualization-Tables-Figures.html#cb273-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb273-18"><a href="Visualization-Tables-Figures.html#cb273-18" aria-hidden="true" tabindex="-1"></a><span class="do">## gtsummary自动化参数命名：</span></span>
<span id="cb273-19"><a href="Visualization-Tables-Figures.html#cb273-19" aria-hidden="true" tabindex="-1"></a>使用<span class="fu">attr</span>(.,<span class="st">&quot;label&quot;</span>)给参数变量命名，然后gtsummary会优先从列的label中读取描述。</span>
<span id="cb273-20"><a href="Visualization-Tables-Figures.html#cb273-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb273-21"><a href="Visualization-Tables-Figures.html#cb273-21" aria-hidden="true" tabindex="-1"></a><span class="do">## 控制列宽：</span></span>
<span id="cb273-22"><a href="Visualization-Tables-Figures.html#cb273-22" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb273-23"><a href="Visualization-Tables-Figures.html#cb273-23" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gtExtras)</span>
<span id="cb273-24"><a href="Visualization-Tables-Figures.html#cb273-24" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb273-25"><a href="Visualization-Tables-Figures.html#cb273-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb273-26"><a href="Visualization-Tables-Figures.html#cb273-26" aria-hidden="true" tabindex="-1"></a>cols_fn <span class="ot">&lt;-</span> <span class="cf">function</span>(data, y) {</span>
<span id="cb273-27"><a href="Visualization-Tables-Figures.html#cb273-27" aria-hidden="true" tabindex="-1"></a>  data <span class="sc">%&gt;%</span></span>
<span id="cb273-28"><a href="Visualization-Tables-Figures.html#cb273-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb273-29"><a href="Visualization-Tables-Figures.html#cb273-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb273-30"><a href="Visualization-Tables-Figures.html#cb273-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">gt_theme_espn</span>() <span class="sc">%&gt;%</span></span>
<span id="cb273-31"><a href="Visualization-Tables-Figures.html#cb273-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cols_width</span>(<span class="fu">as.formula</span>(glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">&quot;4~px({y})&quot;</span>)))}</span>
<span id="cb273-32"><a href="Visualization-Tables-Figures.html#cb273-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb273-33"><a href="Visualization-Tables-Figures.html#cb273-33" aria-hidden="true" tabindex="-1"></a><span class="fu">cols_fn</span>(<span class="fu">head</span>(mtcars), <span class="at">y =</span> <span class="dv">900</span>)</span>
<span id="cb273-34"><a href="Visualization-Tables-Figures.html#cb273-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb273-35"><a href="Visualization-Tables-Figures.html#cb273-35" aria-hidden="true" tabindex="-1"></a><span class="do">## gtsmmary的主题设计：</span></span>
<span id="cb273-36"><a href="Visualization-Tables-Figures.html#cb273-36" aria-hidden="true" tabindex="-1"></a>https<span class="sc">:</span><span class="er">//</span>cran.r<span class="sc">-</span>project.org<span class="sc">/</span>web<span class="sc">/</span>packages<span class="sc">/</span>gtsummary<span class="sc">/</span>vignettes<span class="sc">/</span>themes.html</span></code></pre></div>
</div>
</div>
<div id="finalfit简易高效" class="section level4 hasAnchor" number="7.1.5.6">
<h4><span class="header-section-number">7.1.5.6</span> finalfit(简易高效)<a href="Visualization-Tables-Figures.html#finalfit简易高效" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="Visualization-Tables-Figures.html#cb274-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(finalfit)</span>
<span id="cb274-2"><a href="Visualization-Tables-Figures.html#cb274-2" aria-hidden="true" tabindex="-1"></a>dependent <span class="ot">&lt;-</span> <span class="st">&quot;ulcer.factor&quot;</span></span>
<span id="cb274-3"><a href="Visualization-Tables-Figures.html#cb274-3" aria-hidden="true" tabindex="-1"></a>explanatory <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;sex.factor&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="st">&quot;t_stage.factor&quot;</span>)</span>
<span id="cb274-4"><a href="Visualization-Tables-Figures.html#cb274-4" aria-hidden="true" tabindex="-1"></a>melanoma <span class="sc">%&gt;%</span> </span>
<span id="cb274-5"><a href="Visualization-Tables-Figures.html#cb274-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 自动对分组变量和连续变量求p值，类似于tableone;</span></span>
<span id="cb274-6"><a href="Visualization-Tables-Figures.html#cb274-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary_factorlist</span>(dependent, explanatory, <span class="at">p =</span> <span class="cn">TRUE</span>,</span>
<span id="cb274-7"><a href="Visualization-Tables-Figures.html#cb274-7" aria-hidden="true" tabindex="-1"></a>                     <span class="at">add_dependent_label =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
</div>
<div id="统计结果表格可视化" class="section level3 hasAnchor" number="7.1.6">
<h3><span class="header-section-number">7.1.6</span> 统计结果表格可视化<a href="Visualization-Tables-Figures.html#统计结果表格可视化" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="sjplot" class="section level4 hasAnchor" number="7.1.6.1">
<h4><span class="header-section-number">7.1.6.1</span> sjplot()<a href="Visualization-Tables-Figures.html#sjplot" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="Visualization-Tables-Figures.html#cb275-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 参见：https://strengejacke.github.io/sjPlot/index.html</span></span>
<span id="cb275-2"><a href="Visualization-Tables-Figures.html#cb275-2" aria-hidden="true" tabindex="-1"></a>sjPlot <span class="sc">-</span> Data Visualization <span class="cf">for</span> Statistics <span class="cf">in</span> Social Science</span>
<span id="cb275-3"><a href="Visualization-Tables-Figures.html#cb275-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb275-4"><a href="Visualization-Tables-Figures.html#cb275-4" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(&quot;sjPlot&quot;) ####</span></span>
<span id="cb275-5"><a href="Visualization-Tables-Figures.html#cb275-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 支持类型出表：</span></span>
<span id="cb275-6"><a href="Visualization-Tables-Figures.html#cb275-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 经典回归、贝叶斯回归、混合效应回归；</span></span>
<span id="cb275-7"><a href="Visualization-Tables-Figures.html#cb275-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb275-8"><a href="Visualization-Tables-Figures.html#cb275-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 支持类型出图：</span></span>
<span id="cb275-9"><a href="Visualization-Tables-Figures.html#cb275-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 支持回归系数、边际效应和交互式出图；</span></span>
<span id="cb275-10"><a href="Visualization-Tables-Figures.html#cb275-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb275-11"><a href="Visualization-Tables-Figures.html#cb275-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 支持表格和图形的论文化出图：</span></span>
<span id="cb275-12"><a href="Visualization-Tables-Figures.html#cb275-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 支持灰度图：</span></span>
<span id="cb275-13"><a href="Visualization-Tables-Figures.html#cb275-13" aria-hidden="true" tabindex="-1"></a>使用colors <span class="ot">=</span> <span class="st">&quot;gs&quot;</span>，展示数据灰度；</span>
<span id="cb275-14"><a href="Visualization-Tables-Figures.html#cb275-14" aria-hidden="true" tabindex="-1"></a>使用colors <span class="ot">=</span> <span class="st">&quot;bw&quot;</span>，展示数据线条类型；</span>
<span id="cb275-15"><a href="Visualization-Tables-Figures.html#cb275-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb275-16"><a href="Visualization-Tables-Figures.html#cb275-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 支持论文发表为主题的自定义表格输出图</span></span>
<span id="cb275-17"><a href="Visualization-Tables-Figures.html#cb275-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 可以在一定程度上优化现有的ggplot2体系；</span></span>
<span id="cb275-18"><a href="Visualization-Tables-Figures.html#cb275-18" aria-hidden="true" tabindex="-1"></a><span class="co"># 比调整ggplot2的代码更便捷；</span></span>
<span id="cb275-19"><a href="Visualization-Tables-Figures.html#cb275-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb275-20"><a href="Visualization-Tables-Figures.html#cb275-20" aria-hidden="true" tabindex="-1"></a><span class="co"># load package</span></span>
<span id="cb275-21"><a href="Visualization-Tables-Figures.html#cb275-21" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sjPlot)</span>
<span id="cb275-22"><a href="Visualization-Tables-Figures.html#cb275-22" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sjmisc)</span>
<span id="cb275-23"><a href="Visualization-Tables-Figures.html#cb275-23" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sjlabelled)</span>
<span id="cb275-24"><a href="Visualization-Tables-Figures.html#cb275-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb275-25"><a href="Visualization-Tables-Figures.html#cb275-25" aria-hidden="true" tabindex="-1"></a><span class="co"># sample data</span></span>
<span id="cb275-26"><a href="Visualization-Tables-Figures.html#cb275-26" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;efc&quot;</span>)</span>
<span id="cb275-27"><a href="Visualization-Tables-Figures.html#cb275-27" aria-hidden="true" tabindex="-1"></a>efc <span class="ot">&lt;-</span> <span class="fu">as_factor</span>(efc, c161sex, c172code)</span>
<span id="cb275-28"><a href="Visualization-Tables-Figures.html#cb275-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb275-29"><a href="Visualization-Tables-Figures.html#cb275-29" aria-hidden="true" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(barthtot <span class="sc">~</span> c160age <span class="sc">+</span> c12hour <span class="sc">+</span> c161sex <span class="sc">+</span> c172code, <span class="at">data =</span> efc)</span>
<span id="cb275-30"><a href="Visualization-Tables-Figures.html#cb275-30" aria-hidden="true" tabindex="-1"></a>m2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(neg_c_7 <span class="sc">~</span> c160age <span class="sc">+</span> c12hour <span class="sc">+</span> c161sex <span class="sc">+</span> e17age, <span class="at">data =</span> efc)</span>
<span id="cb275-31"><a href="Visualization-Tables-Figures.html#cb275-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb275-32"><a href="Visualization-Tables-Figures.html#cb275-32" aria-hidden="true" tabindex="-1"></a><span class="do">## 自动聚类分组出统计表：太牛皮了吧。。。</span></span>
<span id="cb275-33"><a href="Visualization-Tables-Figures.html#cb275-33" aria-hidden="true" tabindex="-1"></a><span class="fu">tab_model</span>(m1)</span>
<span id="cb275-34"><a href="Visualization-Tables-Figures.html#cb275-34" aria-hidden="true" tabindex="-1"></a><span class="fu">tab_model</span>(m1, m2) <span class="do">## 多组统计表</span></span>
<span id="cb275-35"><a href="Visualization-Tables-Figures.html#cb275-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb275-36"><a href="Visualization-Tables-Figures.html#cb275-36" aria-hidden="true" tabindex="-1"></a><span class="do">## 支持各种统计过程汇总参数再导出：</span></span>
<span id="cb275-37"><a href="Visualization-Tables-Figures.html#cb275-37" aria-hidden="true" tabindex="-1"></a><span class="do">## 添加se/sts</span></span>
<span id="cb275-38"><a href="Visualization-Tables-Figures.html#cb275-38" aria-hidden="true" tabindex="-1"></a><span class="fu">tab_model</span>(m1, <span class="at">show.se =</span> <span class="cn">TRUE</span>, <span class="at">show.std =</span> <span class="cn">TRUE</span>, <span class="at">show.stat =</span> <span class="cn">TRUE</span>)</span>
<span id="cb275-39"><a href="Visualization-Tables-Figures.html#cb275-39" aria-hidden="true" tabindex="-1"></a><span class="do">##  关闭p值等操作；</span></span>
<span id="cb275-40"><a href="Visualization-Tables-Figures.html#cb275-40" aria-hidden="true" tabindex="-1"></a><span class="fu">tab_model</span>(m3, m4, <span class="at">show.ci =</span> <span class="cn">FALSE</span>, <span class="at">show.p =</span> <span class="cn">FALSE</span>, <span class="at">auto.label =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="mtable" class="section level4 hasAnchor" number="7.1.6.2">
<h4><span class="header-section-number">7.1.6.2</span> mtable<a href="Visualization-Tables-Figures.html#mtable" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="Visualization-Tables-Figures.html#cb276-1" aria-hidden="true" tabindex="-1"></a><span class="co"># we will define a fake model which includes all the IVs</span></span>
<span id="cb276-2"><a href="Visualization-Tables-Figures.html#cb276-2" aria-hidden="true" tabindex="-1"></a>mtables <span class="ot">&lt;-</span> <span class="fu">mtable</span>(<span class="st">&quot;Model fake&quot;</span> <span class="ot">=</span> <span class="fu">lm</span>(sr <span class="sc">~</span> dpi <span class="sc">+</span> ddpi <span class="sc">+</span> <span class="fu">log</span>(dpi) <span class="sc">+</span> <span class="fu">log</span>(ddpi), LifeCycleSavings),</span>
<span id="cb276-3"><a href="Visualization-Tables-Figures.html#cb276-3" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;Model 1&quot;</span> <span class="ot">=</span> <span class="fu">lm</span>(sr <span class="sc">~</span> dpi <span class="sc">+</span> pop15 <span class="sc">+</span> pop75, LifeCycleSavings),</span>
<span id="cb276-4"><a href="Visualization-Tables-Figures.html#cb276-4" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;Model 2&quot;</span> <span class="ot">=</span> <span class="fu">lm</span>(sr <span class="sc">~</span> ddpi <span class="sc">+</span> pop15 <span class="sc">+</span> pop75, LifeCycleSavings),</span>
<span id="cb276-5"><a href="Visualization-Tables-Figures.html#cb276-5" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;Model 3&quot;</span> <span class="ot">=</span> <span class="fu">lm</span>(sr <span class="sc">~</span> <span class="fu">log</span>(dpi) <span class="sc">+</span> pop15 <span class="sc">+</span> pop75, LifeCycleSavings),</span>
<span id="cb276-6"><a href="Visualization-Tables-Figures.html#cb276-6" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;Model 4&quot;</span> <span class="ot">=</span> <span class="fu">lm</span>(sr <span class="sc">~</span> <span class="fu">log</span>(ddpi) <span class="sc">+</span> pop15 <span class="sc">+</span> pop75, LifeCycleSavings))</span>
<span id="cb276-7"><a href="Visualization-Tables-Figures.html#cb276-7" aria-hidden="true" tabindex="-1"></a><span class="co"># we will display mtables without the fake model</span></span>
<span id="cb276-8"><a href="Visualization-Tables-Figures.html#cb276-8" aria-hidden="true" tabindex="-1"></a>mtables[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb276-9"><a href="Visualization-Tables-Figures.html#cb276-9" aria-hidden="true" tabindex="-1"></a><span class="co"># output</span></span>
<span id="cb276-10"><a href="Visualization-Tables-Figures.html#cb276-10" aria-hidden="true" tabindex="-1"></a>Calls<span class="sc">:</span></span>
<span id="cb276-11"><a href="Visualization-Tables-Figures.html#cb276-11" aria-hidden="true" tabindex="-1"></a>Model <span class="dv">1</span><span class="sc">:</span> <span class="fu">lm</span>(<span class="at">formula =</span> sr <span class="sc">~</span> dpi <span class="sc">+</span> pop15 <span class="sc">+</span> pop75, <span class="at">data =</span> LifeCycleSavings)</span>
<span id="cb276-12"><a href="Visualization-Tables-Figures.html#cb276-12" aria-hidden="true" tabindex="-1"></a>Model <span class="dv">2</span><span class="sc">:</span> <span class="fu">lm</span>(<span class="at">formula =</span> sr <span class="sc">~</span> ddpi <span class="sc">+</span> pop15 <span class="sc">+</span> pop75, <span class="at">data =</span> LifeCycleSavings)</span>
<span id="cb276-13"><a href="Visualization-Tables-Figures.html#cb276-13" aria-hidden="true" tabindex="-1"></a>Model <span class="dv">3</span><span class="sc">:</span> <span class="fu">lm</span>(<span class="at">formula =</span> sr <span class="sc">~</span> <span class="fu">log</span>(dpi) <span class="sc">+</span> pop15 <span class="sc">+</span> pop75, <span class="at">data =</span> LifeCycleSavings)</span>
<span id="cb276-14"><a href="Visualization-Tables-Figures.html#cb276-14" aria-hidden="true" tabindex="-1"></a>Model <span class="dv">4</span><span class="sc">:</span> <span class="fu">lm</span>(<span class="at">formula =</span> sr <span class="sc">~</span> <span class="fu">log</span>(ddpi) <span class="sc">+</span> pop15 <span class="sc">+</span> pop75, <span class="at">data =</span> LifeCycleSavings)</span>
<span id="cb276-15"><a href="Visualization-Tables-Figures.html#cb276-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb276-16"><a href="Visualization-Tables-Figures.html#cb276-16" aria-hidden="true" tabindex="-1"></a><span class="sc">==</span><span class="er">===================================================================</span></span>
<span id="cb276-17"><a href="Visualization-Tables-Figures.html#cb276-17" aria-hidden="true" tabindex="-1"></a>                    Model <span class="dv">1</span>      Model <span class="dv">2</span>     Model <span class="dv">3</span>      Model <span class="dv">4</span>    </span>
<span id="cb276-18"><a href="Visualization-Tables-Figures.html#cb276-18" aria-hidden="true" tabindex="-1"></a><span class="sc">---------------------------------------------------------------------</span></span>
<span id="cb276-19"><a href="Visualization-Tables-Figures.html#cb276-19" aria-hidden="true" tabindex="-1"></a>  (Intercept)       <span class="fl">31.457</span><span class="sc">**</span><span class="er">*</span>    <span class="fl">28.125</span><span class="sc">**</span><span class="er">*</span>    <span class="fl">36.304</span><span class="sc">**</span>    <span class="fl">26.118</span><span class="sc">**</span><span class="er">*</span>  </span>
<span id="cb276-20"><a href="Visualization-Tables-Figures.html#cb276-20" aria-hidden="true" tabindex="-1"></a>                    (<span class="fl">7.482</span>)      (<span class="fl">7.184</span>)     (<span class="fl">10.511</span>)     (<span class="fl">7.416</span>)    </span>
<span id="cb276-21"><a href="Visualization-Tables-Figures.html#cb276-21" aria-hidden="true" tabindex="-1"></a>  dpi               <span class="sc">-</span><span class="fl">0.001</span>                                           </span>
<span id="cb276-22"><a href="Visualization-Tables-Figures.html#cb276-22" aria-hidden="true" tabindex="-1"></a>                    (<span class="fl">0.001</span>)                                          </span>
<span id="cb276-23"><a href="Visualization-Tables-Figures.html#cb276-23" aria-hidden="true" tabindex="-1"></a>  ddpi                            <span class="fl">0.428</span><span class="sc">*</span>                             </span>
<span id="cb276-24"><a href="Visualization-Tables-Figures.html#cb276-24" aria-hidden="true" tabindex="-1"></a>                                 (<span class="fl">0.188</span>)                             </span>
<span id="cb276-25"><a href="Visualization-Tables-Figures.html#cb276-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span>(dpi)                                    <span class="sc">-</span><span class="fl">0.779</span>                 </span>
<span id="cb276-26"><a href="Visualization-Tables-Figures.html#cb276-26" aria-hidden="true" tabindex="-1"></a>                                              (<span class="fl">1.018</span>)                </span>
<span id="cb276-27"><a href="Visualization-Tables-Figures.html#cb276-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span>(ddpi)                                                <span class="fl">1.584</span><span class="sc">*</span>    </span>
<span id="cb276-28"><a href="Visualization-Tables-Figures.html#cb276-28" aria-hidden="true" tabindex="-1"></a>                                                          (<span class="fl">0.722</span>)    </span>
<span id="cb276-29"><a href="Visualization-Tables-Figures.html#cb276-29" aria-hidden="true" tabindex="-1"></a>  pop15             <span class="sc">-</span><span class="fl">0.492</span><span class="sc">**</span>     <span class="sc">-</span><span class="fl">0.452</span><span class="sc">**</span>     <span class="sc">-</span><span class="fl">0.506</span><span class="sc">**</span>    <span class="sc">-</span><span class="fl">0.408</span><span class="sc">**</span>   </span>
<span id="cb276-30"><a href="Visualization-Tables-Figures.html#cb276-30" aria-hidden="true" tabindex="-1"></a>                    (<span class="fl">0.149</span>)      (<span class="fl">0.141</span>)      (<span class="fl">0.154</span>)     (<span class="fl">0.144</span>)    </span>
<span id="cb276-31"><a href="Visualization-Tables-Figures.html#cb276-31" aria-hidden="true" tabindex="-1"></a>  pop75             <span class="sc">-</span><span class="fl">1.568</span>       <span class="sc">-</span><span class="fl">1.835</span>       <span class="sc">-</span><span class="fl">1.649</span>      <span class="sc">-</span><span class="fl">1.663</span>     </span>
<span id="cb276-32"><a href="Visualization-Tables-Figures.html#cb276-32" aria-hidden="true" tabindex="-1"></a>                    (<span class="fl">1.121</span>)      (<span class="fl">0.998</span>)      (<span class="fl">1.110</span>)     (<span class="fl">1.009</span>)    </span>
<span id="cb276-33"><a href="Visualization-Tables-Figures.html#cb276-33" aria-hidden="true" tabindex="-1"></a><span class="sc">---------------------------------------------------------------------</span></span>
<span id="cb276-34"><a href="Visualization-Tables-Figures.html#cb276-34" aria-hidden="true" tabindex="-1"></a>  R<span class="sc">-</span>squared          <span class="fl">0.274</span>        <span class="fl">0.337</span>        <span class="fl">0.271</span>       <span class="fl">0.332</span>     </span>
<span id="cb276-35"><a href="Visualization-Tables-Figures.html#cb276-35" aria-hidden="true" tabindex="-1"></a>  adj. R<span class="sc">-</span>squared     <span class="fl">0.227</span>        <span class="fl">0.293</span>        <span class="fl">0.223</span>       <span class="fl">0.288</span>     </span>
<span id="cb276-36"><a href="Visualization-Tables-Figures.html#cb276-36" aria-hidden="true" tabindex="-1"></a>  sigma              <span class="fl">3.939</span>        <span class="fl">3.767</span>        <span class="fl">3.948</span>       <span class="fl">3.780</span>     </span>
<span id="cb276-37"><a href="Visualization-Tables-Figures.html#cb276-37" aria-hidden="true" tabindex="-1"></a>  F                  <span class="fl">5.797</span>        <span class="fl">7.778</span>        <span class="fl">5.700</span>       <span class="fl">7.608</span>     </span>
<span id="cb276-38"><a href="Visualization-Tables-Figures.html#cb276-38" aria-hidden="true" tabindex="-1"></a>  p                  <span class="fl">0.002</span>        <span class="fl">0.000</span>        <span class="fl">0.002</span>       <span class="fl">0.000</span>     </span>
<span id="cb276-39"><a href="Visualization-Tables-Figures.html#cb276-39" aria-hidden="true" tabindex="-1"></a>  Log<span class="sc">-</span>likelihood  <span class="sc">-</span><span class="fl">137.410</span>     <span class="sc">-</span><span class="fl">135.171</span>     <span class="sc">-</span><span class="fl">137.525</span>    <span class="sc">-</span><span class="fl">135.355</span>     </span>
<span id="cb276-40"><a href="Visualization-Tables-Figures.html#cb276-40" aria-hidden="true" tabindex="-1"></a>  Deviance         <span class="fl">713.767</span>      <span class="fl">652.606</span>      <span class="fl">717.054</span>     <span class="fl">657.424</span>     </span>
<span id="cb276-41"><a href="Visualization-Tables-Figures.html#cb276-41" aria-hidden="true" tabindex="-1"></a>  AIC              <span class="fl">284.821</span>      <span class="fl">280.341</span>      <span class="fl">285.050</span>     <span class="fl">280.709</span>     </span>
<span id="cb276-42"><a href="Visualization-Tables-Figures.html#cb276-42" aria-hidden="true" tabindex="-1"></a>  BIC              <span class="fl">294.381</span>      <span class="fl">289.902</span>      <span class="fl">294.610</span>     <span class="fl">290.269</span>     </span>
<span id="cb276-43"><a href="Visualization-Tables-Figures.html#cb276-43" aria-hidden="true" tabindex="-1"></a>  N                 <span class="dv">50</span>           <span class="dv">50</span>           <span class="dv">50</span>          <span class="dv">50</span>         </span>
<span id="cb276-44"><a href="Visualization-Tables-Figures.html#cb276-44" aria-hidden="true" tabindex="-1"></a><span class="sc">==</span><span class="er">===================================================================</span></span></code></pre></div>
</div>
<div id="stargazer" class="section level4 hasAnchor" number="7.1.6.3">
<h4><span class="header-section-number">7.1.6.3</span> stargazer<a href="Visualization-Tables-Figures.html#stargazer" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="Visualization-Tables-Figures.html#cb277-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stargazer can be an option</span></span>
<span id="cb277-2"><a href="Visualization-Tables-Figures.html#cb277-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stargazer)</span>
<span id="cb277-3"><a href="Visualization-Tables-Figures.html#cb277-3" aria-hidden="true" tabindex="-1"></a><span class="fu">stargazer</span>(<span class="fu">lm</span>(sr <span class="sc">~</span> dpi <span class="sc">+</span> pop15 <span class="sc">+</span> pop75, LifeCycleSavings),</span>
<span id="cb277-4"><a href="Visualization-Tables-Figures.html#cb277-4" aria-hidden="true" tabindex="-1"></a>          <span class="fu">lm</span>(sr <span class="sc">~</span> ddpi <span class="sc">+</span> pop15 <span class="sc">+</span> pop75, LifeCycleSavings),</span>
<span id="cb277-5"><a href="Visualization-Tables-Figures.html#cb277-5" aria-hidden="true" tabindex="-1"></a>          <span class="fu">lm</span>(sr <span class="sc">~</span> <span class="fu">log</span>(dpi) <span class="sc">+</span> pop15 <span class="sc">+</span> pop75, LifeCycleSavings),</span>
<span id="cb277-6"><a href="Visualization-Tables-Figures.html#cb277-6" aria-hidden="true" tabindex="-1"></a>          <span class="fu">lm</span>(sr <span class="sc">~</span> <span class="fu">log</span>(ddpi) <span class="sc">+</span> pop15 <span class="sc">+</span> pop75, LifeCycleSavings),</span>
<span id="cb277-7"><a href="Visualization-Tables-Figures.html#cb277-7" aria-hidden="true" tabindex="-1"></a>          <span class="at">type =</span> <span class="st">&quot;text&quot;</span>, <span class="at">column.labels =</span> <span class="fu">c</span>(<span class="st">&quot;Model 1&quot;</span>, <span class="st">&quot;Model 2&quot;</span>, <span class="st">&quot;Model 3&quot;</span>, <span class="st">&quot;Model 4&quot;</span>),</span>
<span id="cb277-8"><a href="Visualization-Tables-Figures.html#cb277-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">model.numbers =</span> <span class="cn">FALSE</span>)</span>
<span id="cb277-9"><a href="Visualization-Tables-Figures.html#cb277-9" aria-hidden="true" tabindex="-1"></a><span class="co"># output</span></span>
<span id="cb277-10"><a href="Visualization-Tables-Figures.html#cb277-10" aria-hidden="true" tabindex="-1"></a><span class="sc">==</span><span class="er">===================================================================</span></span>
<span id="cb277-11"><a href="Visualization-Tables-Figures.html#cb277-11" aria-hidden="true" tabindex="-1"></a>                                        Dependent variable<span class="sc">:</span>          </span>
<span id="cb277-12"><a href="Visualization-Tables-Figures.html#cb277-12" aria-hidden="true" tabindex="-1"></a>                              <span class="sc">---------------------------------------</span></span>
<span id="cb277-13"><a href="Visualization-Tables-Figures.html#cb277-13" aria-hidden="true" tabindex="-1"></a>                                                sr                   </span>
<span id="cb277-14"><a href="Visualization-Tables-Figures.html#cb277-14" aria-hidden="true" tabindex="-1"></a>                               Model <span class="dv">1</span>   Model <span class="dv">2</span>   Model <span class="dv">3</span>   Model <span class="dv">4</span> </span>
<span id="cb277-15"><a href="Visualization-Tables-Figures.html#cb277-15" aria-hidden="true" tabindex="-1"></a><span class="sc">---------------------------------------------------------------------</span></span>
<span id="cb277-16"><a href="Visualization-Tables-Figures.html#cb277-16" aria-hidden="true" tabindex="-1"></a>dpi                            <span class="sc">-</span><span class="fl">0.001</span>                                </span>
<span id="cb277-17"><a href="Visualization-Tables-Figures.html#cb277-17" aria-hidden="true" tabindex="-1"></a>                               (<span class="fl">0.001</span>)                               </span>
<span id="cb277-18"><a href="Visualization-Tables-Figures.html#cb277-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb277-19"><a href="Visualization-Tables-Figures.html#cb277-19" aria-hidden="true" tabindex="-1"></a>ddpi                                     <span class="fl">0.428</span><span class="sc">**</span>                     </span>
<span id="cb277-20"><a href="Visualization-Tables-Figures.html#cb277-20" aria-hidden="true" tabindex="-1"></a>                                         (<span class="fl">0.188</span>)                     </span>
<span id="cb277-21"><a href="Visualization-Tables-Figures.html#cb277-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb277-22"><a href="Visualization-Tables-Figures.html#cb277-22" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(dpi)                                           <span class="sc">-</span><span class="fl">0.779</span>            </span>
<span id="cb277-23"><a href="Visualization-Tables-Figures.html#cb277-23" aria-hidden="true" tabindex="-1"></a>                                                   (<span class="fl">1.018</span>)           </span>
<span id="cb277-24"><a href="Visualization-Tables-Figures.html#cb277-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb277-25"><a href="Visualization-Tables-Figures.html#cb277-25" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(ddpi)                                                    <span class="fl">1.584</span><span class="sc">**</span> </span>
<span id="cb277-26"><a href="Visualization-Tables-Figures.html#cb277-26" aria-hidden="true" tabindex="-1"></a>                                                             (<span class="fl">0.722</span>) </span>
<span id="cb277-27"><a href="Visualization-Tables-Figures.html#cb277-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb277-28"><a href="Visualization-Tables-Figures.html#cb277-28" aria-hidden="true" tabindex="-1"></a>pop15                         <span class="sc">-</span><span class="fl">0.492</span><span class="sc">**</span><span class="er">*</span> <span class="sc">-</span><span class="fl">0.452</span><span class="sc">**</span><span class="er">*</span> <span class="sc">-</span><span class="fl">0.506</span><span class="sc">**</span><span class="er">*</span> <span class="sc">-</span><span class="fl">0.408</span><span class="sc">**</span><span class="er">*</span></span>
<span id="cb277-29"><a href="Visualization-Tables-Figures.html#cb277-29" aria-hidden="true" tabindex="-1"></a>                               (<span class="fl">0.149</span>)   (<span class="fl">0.141</span>)   (<span class="fl">0.154</span>)   (<span class="fl">0.144</span>) </span>
<span id="cb277-30"><a href="Visualization-Tables-Figures.html#cb277-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb277-31"><a href="Visualization-Tables-Figures.html#cb277-31" aria-hidden="true" tabindex="-1"></a>pop75                          <span class="sc">-</span><span class="fl">1.568</span>    <span class="sc">-</span><span class="fl">1.835</span><span class="sc">*</span>   <span class="sc">-</span><span class="fl">1.649</span>    <span class="sc">-</span><span class="fl">1.663</span>  </span>
<span id="cb277-32"><a href="Visualization-Tables-Figures.html#cb277-32" aria-hidden="true" tabindex="-1"></a>                               (<span class="fl">1.121</span>)   (<span class="fl">0.998</span>)   (<span class="fl">1.110</span>)   (<span class="fl">1.009</span>) </span>
<span id="cb277-33"><a href="Visualization-Tables-Figures.html#cb277-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb277-34"><a href="Visualization-Tables-Figures.html#cb277-34" aria-hidden="true" tabindex="-1"></a>Constant                      <span class="fl">31.457</span><span class="sc">**</span><span class="er">*</span> <span class="fl">28.125</span><span class="sc">**</span><span class="er">*</span> <span class="fl">36.304</span><span class="sc">**</span><span class="er">*</span> <span class="fl">26.118</span><span class="sc">**</span><span class="er">*</span></span>
<span id="cb277-35"><a href="Visualization-Tables-Figures.html#cb277-35" aria-hidden="true" tabindex="-1"></a>                               (<span class="fl">7.482</span>)   (<span class="fl">7.184</span>)  (<span class="fl">10.511</span>)   (<span class="fl">7.416</span>) </span>
<span id="cb277-36"><a href="Visualization-Tables-Figures.html#cb277-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb277-37"><a href="Visualization-Tables-Figures.html#cb277-37" aria-hidden="true" tabindex="-1"></a><span class="sc">---------------------------------------------------------------------</span></span>
<span id="cb277-38"><a href="Visualization-Tables-Figures.html#cb277-38" aria-hidden="true" tabindex="-1"></a>Observations                     <span class="dv">50</span>        <span class="dv">50</span>        <span class="dv">50</span>        <span class="dv">50</span>    </span>
<span id="cb277-39"><a href="Visualization-Tables-Figures.html#cb277-39" aria-hidden="true" tabindex="-1"></a>R2                              <span class="fl">0.274</span>     <span class="fl">0.337</span>     <span class="fl">0.271</span>     <span class="fl">0.332</span>  </span>
<span id="cb277-40"><a href="Visualization-Tables-Figures.html#cb277-40" aria-hidden="true" tabindex="-1"></a>Adjusted R2                     <span class="fl">0.227</span>     <span class="fl">0.293</span>     <span class="fl">0.223</span>     <span class="fl">0.288</span>  </span>
<span id="cb277-41"><a href="Visualization-Tables-Figures.html#cb277-41" aria-hidden="true" tabindex="-1"></a>Residual Std. <span class="fu">Error</span> (<span class="at">df =</span> <span class="dv">46</span>)   <span class="fl">3.939</span>     <span class="fl">3.767</span>     <span class="fl">3.948</span>     <span class="fl">3.780</span>  </span>
<span id="cb277-42"><a href="Visualization-Tables-Figures.html#cb277-42" aria-hidden="true" tabindex="-1"></a>F <span class="fu">Statistic</span> (<span class="at">df =</span> <span class="dv">3</span>; <span class="dv">46</span>)      <span class="fl">5.797</span><span class="sc">**</span><span class="er">*</span>  <span class="fl">7.778</span><span class="sc">**</span><span class="er">*</span>  <span class="fl">5.700</span><span class="sc">**</span><span class="er">*</span>  <span class="fl">7.608</span><span class="sc">**</span><span class="er">*</span> </span>
<span id="cb277-43"><a href="Visualization-Tables-Figures.html#cb277-43" aria-hidden="true" tabindex="-1"></a><span class="er">=====================================================================</span></span>
<span id="cb277-44"><a href="Visualization-Tables-Figures.html#cb277-44" aria-hidden="true" tabindex="-1"></a>Note<span class="sc">:</span>                                     <span class="er">*</span>p<span class="sc">&lt;</span><span class="fl">0.1</span>; <span class="sc">**</span>p<span class="sc">&lt;</span><span class="fl">0.05</span>; <span class="sc">**</span><span class="er">*</span>p<span class="sc">&lt;</span><span class="fl">0.01</span></span></code></pre></div>
</div>
</div>
<div id="补充表格包" class="section level3 hasAnchor" number="7.1.7">
<h3><span class="header-section-number">7.1.7</span> 补充表格包<a href="Visualization-Tables-Figures.html#补充表格包" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="cross-table" class="section level4 hasAnchor" number="7.1.7.1">
<h4><span class="header-section-number">7.1.7.1</span> CROSS-TABLE()<a href="Visualization-Tables-Figures.html#cross-table" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="Visualization-Tables-Figures.html#cb278-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 不太好用，暂存：</span></span>
<span id="cb278-2"><a href="Visualization-Tables-Figures.html#cb278-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(crosstable)</span>
<span id="cb278-3"><a href="Visualization-Tables-Figures.html#cb278-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 参见网址：https://cran.r-project.org/web/packages/crosstable/vignettes/crosstable.html</span></span>
<span id="cb278-4"><a href="Visualization-Tables-Figures.html#cb278-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 需要指定分类变量后再批量转为表格导出：</span></span>
<span id="cb278-5"><a href="Visualization-Tables-Figures.html#cb278-5" aria-hidden="true" tabindex="-1"></a><span class="fu">crosstable</span>(mtcars2, <span class="fu">c</span>(mpg, cyl), <span class="at">by=</span>am) <span class="sc">%&gt;%</span></span>
<span id="cb278-6"><a href="Visualization-Tables-Figures.html#cb278-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_flextable</span>(<span class="at">keep_id=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="tableone-1" class="section level4 hasAnchor" number="7.1.7.2">
<h4><span class="header-section-number">7.1.7.2</span> tableone<a href="Visualization-Tables-Figures.html#tableone-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="Visualization-Tables-Figures.html#cb279-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tableone)</span>
<span id="cb279-2"><a href="Visualization-Tables-Figures.html#cb279-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tableone&quot;</span>)</span>
<span id="cb279-3"><a href="Visualization-Tables-Figures.html#cb279-3" aria-hidden="true" tabindex="-1"></a>tab2 <span class="ot">&lt;-</span> <span class="fu">CreateTableOne</span>(<span class="at">data=</span>iris)  </span>
<span id="cb279-4"><a href="Visualization-Tables-Figures.html#cb279-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(tab2) <span class="do">## 返回(mean (SD))</span></span></code></pre></div>
</div>
</div>
</div>
<div id="图形可视化" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> 图形可视化<a href="Visualization-Tables-Figures.html#图形可视化" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="画图参考网站" class="section level3 hasAnchor" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> 画图参考网站<a href="Visualization-Tables-Figures.html#画图参考网站" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<pre><code>https://r-graph-gallery.com/

https://chart-studio.plotly.com/feed/?q=plottype:violin#/

## 配色：
https://c.runoob.com/front-end/55/


## 动态地图可视化：
https://rstudio.github.io/leaflet/markers.html

## 其他类型的可视化方案：
https://vultr.ywbb.com/4186.html</code></pre>
</div>
<div id="免代码绘制" class="section level3 hasAnchor" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span> 免代码绘制<a href="Visualization-Tables-Figures.html#免代码绘制" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="esquisse包" class="section level4 hasAnchor" number="7.2.2.1">
<h4><span class="header-section-number">7.2.2.1</span> esquisse包<a href="Visualization-Tables-Figures.html#esquisse包" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="Visualization-Tables-Figures.html#cb281-1" aria-hidden="true" tabindex="-1"></a>免代码ggplot 生成器，鼠标点点点就能在R<span class="sc">-</span>studio里面画图。</span>
<span id="cb281-2"><a href="Visualization-Tables-Figures.html#cb281-2" aria-hidden="true" tabindex="-1"></a>类似BI工具，支持代码导出：</span>
<span id="cb281-3"><a href="Visualization-Tables-Figures.html#cb281-3" aria-hidden="true" tabindex="-1"></a>esquisse<span class="sc">::</span><span class="fu">esquisser</span>() <span class="do">## 有局限性；</span></span></code></pre></div>
</div>
<div id="ggthemeassist包" class="section level4 hasAnchor" number="7.2.2.2">
<h4><span class="header-section-number">7.2.2.2</span> ggThemeAssist包<a href="Visualization-Tables-Figures.html#ggthemeassist包" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>调节ggplot对象的神器, 免代码调节ggplot的细节参数，比如字体，背景颜色等</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="Visualization-Tables-Figures.html#cb282-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb282-2"><a href="Visualization-Tables-Figures.html#cb282-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggThemeAssist)</span>
<span id="cb282-3"><a href="Visualization-Tables-Figures.html#cb282-3" aria-hidden="true" tabindex="-1"></a>使用mtcars生成一个点图示例</span>
<span id="cb282-4"><a href="Visualization-Tables-Figures.html#cb282-4" aria-hidden="true" tabindex="-1"></a>注意这里必须指定定义为gg输出后，再输入；</span>
<span id="cb282-5"><a href="Visualization-Tables-Figures.html#cb282-5" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">gg &lt;- ggplot(mtcars, aes(x = hp, y = mpg, colour = as.factor(cyl))) + geom_point()  </span><span class="st">```</span></span>
<span id="cb282-6"><a href="Visualization-Tables-Figures.html#cb282-6" aria-hidden="true" tabindex="-1"></a>开始调整主题</span>
<span id="cb282-7"><a href="Visualization-Tables-Figures.html#cb282-7" aria-hidden="true" tabindex="-1"></a><span class="sc">**</span><span class="fu">ggThemeAssistGadget</span>(gg)<span class="sc">**</span> <span class="do">##这个更好用一些</span></span></code></pre></div>
</div>
<div id="ggplotgui包" class="section level4 hasAnchor" number="7.2.2.3">
<h4><span class="header-section-number">7.2.2.3</span> ggplotgui包<a href="Visualization-Tables-Figures.html#ggplotgui包" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>免代码绘图，导入数据，根据已有类型图绘图！
<strong>提供R包包括：</strong>
仅实现了广泛使用的图表：箱线图、密度图、点 + 误差图、点图、直方图、散点图和小提# 琴图。只能更改选定数量的美学特征。并且支持对应代码的导出；</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="Visualization-Tables-Figures.html#cb283-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)</span>
<span id="cb283-2"><a href="Visualization-Tables-Figures.html#cb283-2" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;gertstulp/ggplotgui&quot;</span>)</span>
<span id="cb283-3"><a href="Visualization-Tables-Figures.html#cb283-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;ggplotgui&quot;</span>)</span>
<span id="cb283-4"><a href="Visualization-Tables-Figures.html#cb283-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot_shiny</span>()</span>
<span id="cb283-5"><a href="Visualization-Tables-Figures.html#cb283-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot_shiny</span>(mpg)                                                   </span></code></pre></div>
</div>
</div>
<div id="统计辅助绘图" class="section level3 hasAnchor" number="7.2.3">
<h3><span class="header-section-number">7.2.3</span> 统计辅助绘图<a href="Visualization-Tables-Figures.html#统计辅助绘图" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="smplottrelliscopejs" class="section level4 hasAnchor" number="7.2.3.1">
<h4><span class="header-section-number">7.2.3.1</span> smplot/trelliscopejs<a href="Visualization-Tables-Figures.html#smplottrelliscopejs" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="Visualization-Tables-Figures.html#cb284-1" aria-hidden="true" tabindex="-1"></a><span class="do">### 可视化优化R 包 -- smplot ####</span></span>
<span id="cb284-2"><a href="Visualization-Tables-Figures.html#cb284-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&#39;devtools&#39;</span>)</span>
<span id="cb284-3"><a href="Visualization-Tables-Figures.html#cb284-3" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&#39;smin95/smplot&#39;</span>)</span>
<span id="cb284-4"><a href="Visualization-Tables-Figures.html#cb284-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 参见；https://smin95.github.io/dataviz/manual-and-examples-of-smplot.html</span></span>
<span id="cb284-5"><a href="Visualization-Tables-Figures.html#cb284-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb284-6"><a href="Visualization-Tables-Figures.html#cb284-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(smplot)</span>
<span id="cb284-7"><a href="Visualization-Tables-Figures.html#cb284-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 简单来说，这个程序优化了以往写ggplot2的不便之处，</span></span>
<span id="cb284-8"><a href="Visualization-Tables-Figures.html#cb284-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 加强了统计可视化的便利性，以及增加了画图的易用性：</span></span>
<span id="cb284-9"><a href="Visualization-Tables-Figures.html#cb284-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb284-10"><a href="Visualization-Tables-Figures.html#cb284-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 改变主题：</span></span>
<span id="cb284-11"><a href="Visualization-Tables-Figures.html#cb284-11" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> <span class="fu">sm_corr_theme</span>()</span>
<span id="cb284-12"><a href="Visualization-Tables-Figures.html#cb284-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb284-13"><a href="Visualization-Tables-Figures.html#cb284-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 去除边框和图例：</span></span>
<span id="cb284-14"><a href="Visualization-Tables-Figures.html#cb284-14" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> p1 <span class="sc">+</span> <span class="fu">sm_corr_theme</span>(<span class="at">borders =</span> <span class="cn">FALSE</span>, <span class="at">legends =</span> <span class="cn">FALSE</span>)</span>
<span id="cb284-15"><a href="Visualization-Tables-Figures.html#cb284-15" aria-hidden="true" tabindex="-1"></a>p2</span>
<span id="cb284-16"><a href="Visualization-Tables-Figures.html#cb284-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb284-17"><a href="Visualization-Tables-Figures.html#cb284-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 改变颜色：</span></span>
<span id="cb284-18"><a href="Visualization-Tables-Figures.html#cb284-18" aria-hidden="true" tabindex="-1"></a>p2 <span class="sc">+</span> <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">sm_palette</span>(<span class="dv">7</span>))</span>
<span id="cb284-19"><a href="Visualization-Tables-Figures.html#cb284-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb284-20"><a href="Visualization-Tables-Figures.html#cb284-20" aria-hidden="true" tabindex="-1"></a><span class="do">## 相关图：-添加R和P值；</span></span>
<span id="cb284-21"><a href="Visualization-Tables-Figures.html#cb284-21" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> <span class="fu">sm_corr_theme</span>() <span class="sc">+</span> </span>
<span id="cb284-22"><a href="Visualization-Tables-Figures.html#cb284-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sm_statCorr</span>(<span class="at">color =</span> <span class="fu">sm_color</span>(<span class="st">&#39;green&#39;</span>))</span>
<span id="cb284-23"><a href="Visualization-Tables-Figures.html#cb284-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb284-24"><a href="Visualization-Tables-Figures.html#cb284-24" aria-hidden="true" tabindex="-1"></a><span class="do">## 箱线图+散点图：</span></span>
<span id="cb284-25"><a href="Visualization-Tables-Figures.html#cb284-25" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> <span class="fu">sm_corr_theme</span>() <span class="sc">+</span> </span>
<span id="cb284-26"><a href="Visualization-Tables-Figures.html#cb284-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sm_statCorr</span>(<span class="at">color =</span> <span class="fu">sm_color</span>(<span class="st">&#39;green&#39;</span>))</span></code></pre></div>
</div>
<div id="可视化优化facet_trelliscope" class="section level4 hasAnchor" number="7.2.3.2">
<h4><span class="header-section-number">7.2.3.2</span> 可视化优化facet_trelliscope<a href="Visualization-Tables-Figures.html#可视化优化facet_trelliscope" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="Visualization-Tables-Figures.html#cb285-1" aria-hidden="true" tabindex="-1"></a>优化分图显示太多造成的困扰，使用滑窗展示的方法：</span>
<span id="cb285-2"><a href="Visualization-Tables-Figures.html#cb285-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(trelliscopejs)</span>
<span id="cb285-3"><a href="Visualization-Tables-Figures.html#cb285-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb285-4"><a href="Visualization-Tables-Figures.html#cb285-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb285-5"><a href="Visualization-Tables-Figures.html#cb285-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 参见；https://cran.r-project.org/web/packages/trelliscopejs/vignettes/trelliscopejs.html</span></span>
<span id="cb285-6"><a href="Visualization-Tables-Figures.html#cb285-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 支持行列数量控制、标签控制、筛选控制和排序控制；</span></span>
<span id="cb285-7"><a href="Visualization-Tables-Figures.html#cb285-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb285-8"><a href="Visualization-Tables-Figures.html#cb285-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb285-9"><a href="Visualization-Tables-Figures.html#cb285-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 作为参数参与ggplot2的相关下游可视化：</span></span>
<span id="cb285-10"><a href="Visualization-Tables-Figures.html#cb285-10" aria-hidden="true" tabindex="-1"></a><span class="fu">qplot</span>(year, lifeExp, <span class="at">data =</span> gapminder) <span class="sc">+</span></span>
<span id="cb285-11"><a href="Visualization-Tables-Figures.html#cb285-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="dv">1948</span>, <span class="dv">2011</span>) <span class="sc">+</span> <span class="fu">ylim</span>(<span class="dv">10</span>, <span class="dv">95</span>) <span class="sc">+</span> <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb285-12"><a href="Visualization-Tables-Figures.html#cb285-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_trelliscope</span>(<span class="sc">~</span> country <span class="sc">+</span> continent, <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">7</span>, <span class="at">width =</span> <span class="dv">300</span>)</span>
<span id="cb285-13"><a href="Visualization-Tables-Figures.html#cb285-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb285-14"><a href="Visualization-Tables-Figures.html#cb285-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 作为管道，直接接受上游ggplot2的图层，再优化：</span></span>
<span id="cb285-15"><a href="Visualization-Tables-Figures.html#cb285-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(trelliscopejs)</span>
<span id="cb285-16"><a href="Visualization-Tables-Figures.html#cb285-16" aria-hidden="true" tabindex="-1"></a>country_plot <span class="ot">&lt;-</span> <span class="cf">function</span>(data, model) {</span>
<span id="cb285-17"><a href="Visualization-Tables-Figures.html#cb285-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_ly</span>(<span class="at">data =</span> data, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>lifeExp,</span>
<span id="cb285-18"><a href="Visualization-Tables-Figures.html#cb285-18" aria-hidden="true" tabindex="-1"></a>          <span class="at">type =</span> <span class="st">&quot;scatter&quot;</span>, <span class="at">mode =</span> <span class="st">&quot;markers&quot;</span>, <span class="at">name =</span> <span class="st">&quot;data&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb285-19"><a href="Visualization-Tables-Figures.html#cb285-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_trace</span>(<span class="at">data =</span> data, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span><span class="fu">predict</span>(model),</span>
<span id="cb285-20"><a href="Visualization-Tables-Figures.html#cb285-20" aria-hidden="true" tabindex="-1"></a>              <span class="at">mode =</span> <span class="st">&quot;lines&quot;</span>, <span class="at">name =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb285-21"><a href="Visualization-Tables-Figures.html#cb285-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">layout</span>(</span>
<span id="cb285-22"><a href="Visualization-Tables-Figures.html#cb285-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1948</span>, <span class="dv">2011</span>)),</span>
<span id="cb285-23"><a href="Visualization-Tables-Figures.html#cb285-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">95</span>)),</span>
<span id="cb285-24"><a href="Visualization-Tables-Figures.html#cb285-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">showlegend =</span> <span class="cn">FALSE</span>)</span>
<span id="cb285-25"><a href="Visualization-Tables-Figures.html#cb285-25" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb285-26"><a href="Visualization-Tables-Figures.html#cb285-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb285-27"><a href="Visualization-Tables-Figures.html#cb285-27" aria-hidden="true" tabindex="-1"></a><span class="do">## 需要注意这里使用purrr包对应的map_系列的绘图函数；</span></span>
<span id="cb285-28"><a href="Visualization-Tables-Figures.html#cb285-28" aria-hidden="true" tabindex="-1"></a>by_country <span class="ot">&lt;-</span> by_country <span class="sc">%&gt;%</span></span>
<span id="cb285-29"><a href="Visualization-Tables-Figures.html#cb285-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data_plot =</span> <span class="fu">map2_plot</span>(data, model, country_plot))</span>
<span id="cb285-30"><a href="Visualization-Tables-Figures.html#cb285-30" aria-hidden="true" tabindex="-1"></a><span class="do">## 然后输入后进行管道运算优化：</span></span>
<span id="cb285-31"><a href="Visualization-Tables-Figures.html#cb285-31" aria-hidden="true" tabindex="-1"></a>by_country <span class="sc">%&gt;%</span></span>
<span id="cb285-32"><a href="Visualization-Tables-Figures.html#cb285-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>resid_mad) <span class="sc">%&gt;%</span></span>
<span id="cb285-33"><a href="Visualization-Tables-Figures.html#cb285-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">trelliscope</span>(<span class="at">name =</span> <span class="st">&quot;by_country_lm&quot;</span>, <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">4</span>)</span></code></pre></div>
</div>
<div id="ggpubr" class="section level4 hasAnchor" number="7.2.3.3">
<h4><span class="header-section-number">7.2.3.3</span> ggpubr<a href="Visualization-Tables-Figures.html#ggpubr" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<pre><code>## 描述：一次绘制一个或一组变量。
内容：
基因表达数据
箱线图
小提琴情节
条形图和点图
密度图
直方图
经验累积密度函数
分位数 - 分位数图
将 P 值和显着性水平添加到 ggplots

## 描述：计算并自动将 p 值和显着性水平添加到 ggplots。
内容：
比较均值的方法
R函数添加p值
比较均值（）
stat_compare_means()
比较两个独立的组
比较两个配对样本
比较两个以上的组
多个分组变量
具有相关性和边际直方图的完美散点图

## 描述：使用相关系数和边际直方图/密度创建漂亮的散点图。
内容：
基本地块
按组着色
添加浓度椭圆
添加点标签
气泡图
按连续变量着色
添加边际图
添加二维密度估计
应用于基因表达数据
绘制均值/中位数和误差线

描述：用误差线轻松绘制均值或中位数。
内容：
误差图
线图
条形图
添加标签
应用于基因表达数据
条形图和现代替代方案

描述：轻松创建基本和有序的条形图，以及条形图的一些现代替代品，包括棒棒糖图和克利夫兰的点图。
内容：
基本条形图
多个分组变量
有序条形图
偏差图
条形图的替代方案
棒棒糖图表
克利夫兰的散点图
将文本标签添加到直方图和密度图

## 描述：创建直方图/密度图并突出显示图中的一些关键元素。
ggplot2 - 在同一页面上混合多个图形的简单方法
描述：在同一页面上以及在多个页面上组合多个 ggplot 的分步指南。
内容：
创建一些图
在一页上排列
注释排列的图形
对齐绘图面板
更改绘图的列/行跨度
为组合 ggplots 使用公共图例
带有边际密度图的散点图
混合表格、文本和 ggplot2 图表
在 ggplot 中插入图形元素
在 ggplot 中放置一个表格
在 ggplot 中放置一个箱形图
将背景图像添加到 ggplot2 图形
排列多个页面
使用 ggarrange() 的嵌套布局
导出地块
ggplot2 - 更改图形参数的简便方法

# 描述：描述函数 ggpar() [in ggpubr]，可用于简单轻松地自定义任何基于 ggplot2 的图形。
内容:
更改标题和轴标签
更改图例位置和外观
更改调色板
组颜色
渐变色
更改轴限制和比例
自定义轴文本和刻度
旋转绘图
更改主题
移除 ggplot 组件
创建和自定义多面板 ggplots：Facet 简单指南

# 描述：通过一个或多个变量拆分您的数据，并将数据的子集可视化在一起。
内容：        
按一个分组变量分面
由两个分组变量分面
修改面板标签外观</code></pre>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="Visualization-Tables-Figures.html#cb287-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 参见网页：</span></span>
<span id="cb287-2"><a href="Visualization-Tables-Figures.html#cb287-2" aria-hidden="true" tabindex="-1"></a>https<span class="sc">:</span><span class="er">//</span>rpkgs.datanovia.com<span class="sc">/</span>ggpubr<span class="sc">/</span></span>
<span id="cb287-3"><a href="Visualization-Tables-Figures.html#cb287-3" aria-hidden="true" tabindex="-1"></a><span class="do">## ggpubr全参数详解：</span></span>
<span id="cb287-4"><a href="Visualization-Tables-Figures.html#cb287-4" aria-hidden="true" tabindex="-1"></a>http<span class="sc">:</span><span class="er">//</span>www.sthda.com<span class="sc">/</span>english<span class="sc">/</span>articles<span class="sc">/</span><span class="dv">24</span><span class="sc">-</span>ggpubr<span class="sc">-</span>publication<span class="sc">-</span>ready<span class="sc">-</span>plots<span class="sc">/</span></span>
<span id="cb287-5"><a href="Visualization-Tables-Figures.html#cb287-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb287-6"><a href="Visualization-Tables-Figures.html#cb287-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 密度图： </span></span>
<span id="cb287-7"><a href="Visualization-Tables-Figures.html#cb287-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggdensity</span>(wdata, <span class="at">x =</span> <span class="st">&quot;weight&quot;</span>,</span>
<span id="cb287-8"><a href="Visualization-Tables-Figures.html#cb287-8" aria-hidden="true" tabindex="-1"></a>   <span class="at">add =</span> <span class="st">&quot;mean&quot;</span>, <span class="at">rug =</span> <span class="cn">TRUE</span>,</span>
<span id="cb287-9"><a href="Visualization-Tables-Figures.html#cb287-9" aria-hidden="true" tabindex="-1"></a>   <span class="at">color =</span> <span class="st">&quot;sex&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;sex&quot;</span>,</span>
<span id="cb287-10"><a href="Visualization-Tables-Figures.html#cb287-10" aria-hidden="true" tabindex="-1"></a>   <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">&quot;#00AFBB&quot;</span>, <span class="st">&quot;#E7B800&quot;</span>))</span>
<span id="cb287-11"><a href="Visualization-Tables-Figures.html#cb287-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb287-12"><a href="Visualization-Tables-Figures.html#cb287-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 柱状图：</span></span>
<span id="cb287-13"><a href="Visualization-Tables-Figures.html#cb287-13" aria-hidden="true" tabindex="-1"></a><span class="fu">gghistogram</span>(wdata, <span class="at">x =</span> <span class="st">&quot;weight&quot;</span>,</span>
<span id="cb287-14"><a href="Visualization-Tables-Figures.html#cb287-14" aria-hidden="true" tabindex="-1"></a>   <span class="at">add =</span> <span class="st">&quot;mean&quot;</span>, <span class="at">rug =</span> <span class="cn">TRUE</span>,</span>
<span id="cb287-15"><a href="Visualization-Tables-Figures.html#cb287-15" aria-hidden="true" tabindex="-1"></a>   <span class="at">color =</span> <span class="st">&quot;sex&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;sex&quot;</span>,</span>
<span id="cb287-16"><a href="Visualization-Tables-Figures.html#cb287-16" aria-hidden="true" tabindex="-1"></a>   <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">&quot;#00AFBB&quot;</span>, <span class="st">&quot;#E7B800&quot;</span>))</span>
<span id="cb287-17"><a href="Visualization-Tables-Figures.html#cb287-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb287-18"><a href="Visualization-Tables-Figures.html#cb287-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 箱线图病添加统计p值：</span></span>
<span id="cb287-19"><a href="Visualization-Tables-Figures.html#cb287-19" aria-hidden="true" tabindex="-1"></a><span class="fu">ggboxplot</span>(df, <span class="at">x =</span> <span class="st">&quot;dose&quot;</span>, <span class="at">y =</span> <span class="st">&quot;len&quot;</span>,</span>
<span id="cb287-20"><a href="Visualization-Tables-Figures.html#cb287-20" aria-hidden="true" tabindex="-1"></a>                <span class="at">color =</span> <span class="st">&quot;dose&quot;</span>, <span class="at">palette =</span><span class="fu">c</span>(<span class="st">&quot;#00AFBB&quot;</span>, <span class="st">&quot;#E7B800&quot;</span>, <span class="st">&quot;#FC4E07&quot;</span>),</span>
<span id="cb287-21"><a href="Visualization-Tables-Figures.html#cb287-21" aria-hidden="true" tabindex="-1"></a>                <span class="at">add =</span> <span class="st">&quot;jitter&quot;</span>, <span class="at">shape =</span> <span class="st">&quot;dose&quot;</span>)</span>
<span id="cb287-22"><a href="Visualization-Tables-Figures.html#cb287-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb287-23"><a href="Visualization-Tables-Figures.html#cb287-23" aria-hidden="true" tabindex="-1"></a>my_comparisons <span class="ot">&lt;-</span> <span class="fu">list</span>( <span class="fu">c</span>(<span class="st">&quot;0.5&quot;</span>, <span class="st">&quot;1&quot;</span>), <span class="fu">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>), <span class="fu">c</span>(<span class="st">&quot;0.5&quot;</span>, <span class="st">&quot;2&quot;</span>) )</span>
<span id="cb287-24"><a href="Visualization-Tables-Figures.html#cb287-24" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">stat_compare_means</span>(<span class="at">comparisons =</span> my_comparisons)<span class="sc">+</span> <span class="co"># Add pairwise comparisons p-value</span></span>
<span id="cb287-25"><a href="Visualization-Tables-Figures.html#cb287-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_compare_means</span>(<span class="at">label.y =</span> <span class="dv">50</span>)    </span>
<span id="cb287-26"><a href="Visualization-Tables-Figures.html#cb287-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb287-27"><a href="Visualization-Tables-Figures.html#cb287-27" aria-hidden="true" tabindex="-1"></a><span class="do">## 小提琴图</span></span>
<span id="cb287-28"><a href="Visualization-Tables-Figures.html#cb287-28" aria-hidden="true" tabindex="-1"></a><span class="fu">ggviolin</span>(df, <span class="at">x =</span> <span class="st">&quot;dose&quot;</span>, <span class="at">y =</span> <span class="st">&quot;len&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;dose&quot;</span>,</span>
<span id="cb287-29"><a href="Visualization-Tables-Figures.html#cb287-29" aria-hidden="true" tabindex="-1"></a>         <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">&quot;#00AFBB&quot;</span>, <span class="st">&quot;#E7B800&quot;</span>, <span class="st">&quot;#FC4E07&quot;</span>),</span>
<span id="cb287-30"><a href="Visualization-Tables-Figures.html#cb287-30" aria-hidden="true" tabindex="-1"></a>         <span class="at">add =</span> <span class="st">&quot;boxplot&quot;</span>, <span class="at">add.params =</span> <span class="fu">list</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>))<span class="sc">+</span></span>
<span id="cb287-31"><a href="Visualization-Tables-Figures.html#cb287-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_compare_means</span>(<span class="at">comparisons =</span> my_comparisons, <span class="at">label =</span> <span class="st">&quot;p.signif&quot;</span>)<span class="sc">+</span> <span class="co"># Add significance levels</span></span>
<span id="cb287-32"><a href="Visualization-Tables-Figures.html#cb287-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_compare_means</span>(<span class="at">label.y =</span> <span class="dv">50</span>)     </span>
<span id="cb287-33"><a href="Visualization-Tables-Figures.html#cb287-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb287-34"><a href="Visualization-Tables-Figures.html#cb287-34" aria-hidden="true" tabindex="-1"></a><span class="do">## 条线图：</span></span>
<span id="cb287-35"><a href="Visualization-Tables-Figures.html#cb287-35" aria-hidden="true" tabindex="-1"></a><span class="fu">ggbarplot</span>(dfm, <span class="at">x =</span> <span class="st">&quot;name&quot;</span>, <span class="at">y =</span> <span class="st">&quot;mpg&quot;</span>,</span>
<span id="cb287-36"><a href="Visualization-Tables-Figures.html#cb287-36" aria-hidden="true" tabindex="-1"></a>          <span class="at">fill =</span> <span class="st">&quot;cyl&quot;</span>,               <span class="co"># change fill color by cyl</span></span>
<span id="cb287-37"><a href="Visualization-Tables-Figures.html#cb287-37" aria-hidden="true" tabindex="-1"></a>          <span class="at">color =</span> <span class="st">&quot;white&quot;</span>,            <span class="co"># Set bar border colors to white</span></span>
<span id="cb287-38"><a href="Visualization-Tables-Figures.html#cb287-38" aria-hidden="true" tabindex="-1"></a>          <span class="at">palette =</span> <span class="st">&quot;jco&quot;</span>,            <span class="co"># jco journal color palett. see ?ggpar</span></span>
<span id="cb287-39"><a href="Visualization-Tables-Figures.html#cb287-39" aria-hidden="true" tabindex="-1"></a>          <span class="at">sort.val =</span> <span class="st">&quot;desc&quot;</span>,          <span class="co"># Sort the value in dscending order</span></span>
<span id="cb287-40"><a href="Visualization-Tables-Figures.html#cb287-40" aria-hidden="true" tabindex="-1"></a>          <span class="at">sort.by.groups =</span> <span class="cn">FALSE</span>,     <span class="co"># Don&#39;t sort inside each group</span></span>
<span id="cb287-41"><a href="Visualization-Tables-Figures.html#cb287-41" aria-hidden="true" tabindex="-1"></a>          <span class="at">x.text.angle =</span> <span class="dv">90</span>           <span class="co"># Rotate vertically x axis texts</span></span>
<span id="cb287-42"><a href="Visualization-Tables-Figures.html#cb287-42" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb287-43"><a href="Visualization-Tables-Figures.html#cb287-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb287-44"><a href="Visualization-Tables-Figures.html#cb287-44" aria-hidden="true" tabindex="-1"></a><span class="do">## 点线图：</span></span>
<span id="cb287-45"><a href="Visualization-Tables-Figures.html#cb287-45" aria-hidden="true" tabindex="-1"></a><span class="fu">ggdotchart</span>(dfm, <span class="at">x =</span> <span class="st">&quot;name&quot;</span>, <span class="at">y =</span> <span class="st">&quot;mpg&quot;</span>,</span>
<span id="cb287-46"><a href="Visualization-Tables-Figures.html#cb287-46" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="st">&quot;cyl&quot;</span>,                                <span class="co"># Color by groups</span></span>
<span id="cb287-47"><a href="Visualization-Tables-Figures.html#cb287-47" aria-hidden="true" tabindex="-1"></a>           <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">&quot;#00AFBB&quot;</span>, <span class="st">&quot;#E7B800&quot;</span>, <span class="st">&quot;#FC4E07&quot;</span>), <span class="co"># Custom color palette</span></span>
<span id="cb287-48"><a href="Visualization-Tables-Figures.html#cb287-48" aria-hidden="true" tabindex="-1"></a>           <span class="at">sorting =</span> <span class="st">&quot;ascending&quot;</span>,                        <span class="co"># Sort value in descending order</span></span>
<span id="cb287-49"><a href="Visualization-Tables-Figures.html#cb287-49" aria-hidden="true" tabindex="-1"></a>           <span class="at">add =</span> <span class="st">&quot;segments&quot;</span>,                             <span class="co"># Add segments from y = 0 to dots</span></span>
<span id="cb287-50"><a href="Visualization-Tables-Figures.html#cb287-50" aria-hidden="true" tabindex="-1"></a>           <span class="at">ggtheme =</span> <span class="fu">theme_pubr</span>()                        <span class="co"># ggplot2 theme</span></span>
<span id="cb287-51"><a href="Visualization-Tables-Figures.html#cb287-51" aria-hidden="true" tabindex="-1"></a>           )</span></code></pre></div>
</div>
</div>
<div id="base-plotggplot2" class="section level3 hasAnchor" number="7.2.4">
<h3><span class="header-section-number">7.2.4</span> base-plot()/ggplot2()<a href="Visualization-Tables-Figures.html#base-plotggplot2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="符号和线条" class="section level4 hasAnchor" number="7.2.4.1">
<h4><span class="header-section-number">7.2.4.1</span> 符号和线条<a href="Visualization-Tables-Figures.html#符号和线条" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="Visualization-Tables-Figures.html#cb288-1" aria-hidden="true" tabindex="-1"></a><span class="do">## base-R:</span></span>
<span id="cb288-2"><a href="Visualization-Tables-Figures.html#cb288-2" aria-hidden="true" tabindex="-1"></a>pch指定图形（在type<span class="ot">=</span>”p”<span class="sc">/</span>”o”<span class="sc">/</span>”b”时）,可加cex参数，用来控制图中的符号大小，默认为cex<span class="ot">=</span><span class="dv">1</span>,</span>
<span id="cb288-3"><a href="Visualization-Tables-Figures.html#cb288-3" aria-hidden="true" tabindex="-1"></a>lty指定线形,lwd改变线条粗细;</span>
<span id="cb288-4"><a href="Visualization-Tables-Figures.html#cb288-4" aria-hidden="true" tabindex="-1"></a>type指定线性的类型：</span>
<span id="cb288-5"><a href="Visualization-Tables-Figures.html#cb288-5" aria-hidden="true" tabindex="-1"></a>“p”点图 、 “l”线图 、 “b”点线图，线不穿过点 、“c”虚线图 、“o”点线图，线穿过点</span>
<span id="cb288-6"><a href="Visualization-Tables-Figures.html#cb288-6" aria-hidden="true" tabindex="-1"></a>“h”直方图、 “s”阶梯图、 “S”步骤图 、“n”无图</span>
<span id="cb288-7"><a href="Visualization-Tables-Figures.html#cb288-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-8"><a href="Visualization-Tables-Figures.html#cb288-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 绘制：</span></span>
<span id="cb288-9"><a href="Visualization-Tables-Figures.html#cb288-9" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb288-10"><a href="Visualization-Tables-Figures.html#cb288-10" aria-hidden="true" tabindex="-1"></a><span class="fu">png</span>(<span class="st">&quot;~/plotSamples.png&quot;</span>,<span class="at">width=</span><span class="dv">9</span>,<span class="at">height=</span><span class="dv">9</span>,<span class="at">unit=</span><span class="st">&quot;in&quot;</span>,<span class="at">res=</span><span class="dv">108</span>)   <span class="co">#在工作目录下创建plotSamples.png图</span></span>
<span id="cb288-11"><a href="Visualization-Tables-Figures.html#cb288-11" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfcol=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>))</span>
<span id="cb288-12"><a href="Visualization-Tables-Figures.html#cb288-12" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(x,<span class="at">type=</span><span class="st">&quot;p&quot;</span>,<span class="at">main=</span><span class="st">&quot;p&quot;</span>)</span>
<span id="cb288-13"><a href="Visualization-Tables-Figures.html#cb288-13" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
</div>
<div id="颜色参数" class="section level4 hasAnchor" number="7.2.4.2">
<h4><span class="header-section-number">7.2.4.2</span> 颜色参数：<a href="Visualization-Tables-Figures.html#颜色参数" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="颜色参数配置" class="section level5 hasAnchor" number="7.2.4.2.1">
<h5><span class="header-section-number">7.2.4.2.1</span> 颜色参数配置：<a href="Visualization-Tables-Figures.html#颜色参数配置" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="Visualization-Tables-Figures.html#cb289-1" aria-hidden="true" tabindex="-1"></a><span class="do">## base-R</span></span>
<span id="cb289-2"><a href="Visualization-Tables-Figures.html#cb289-2" aria-hidden="true" tabindex="-1"></a>  col：默认绘图颜色。某些函数(如lines、pie)可以接受一个含有颜色值的向量，并自动循环使用。</span>
<span id="cb289-3"><a href="Visualization-Tables-Figures.html#cb289-3" aria-hidden="true" tabindex="-1"></a>  例如：col<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;blue&quot;</span>)需要绘制三条线，那么三条颜色分别为red、blue、red</span>
<span id="cb289-4"><a href="Visualization-Tables-Figures.html#cb289-4" aria-hidden="true" tabindex="-1"></a>  col.axis：坐标轴刻度文字的颜色，不是坐标轴的颜色</span>
<span id="cb289-5"><a href="Visualization-Tables-Figures.html#cb289-5" aria-hidden="true" tabindex="-1"></a>  col.lab：坐标轴标签(名称)的颜色</span>
<span id="cb289-6"><a href="Visualization-Tables-Figures.html#cb289-6" aria-hidden="true" tabindex="-1"></a>  col.main：标题的颜色</span>
<span id="cb289-7"><a href="Visualization-Tables-Figures.html#cb289-7" aria-hidden="true" tabindex="-1"></a>  col.sub：副标题的颜色</span>
<span id="cb289-8"><a href="Visualization-Tables-Figures.html#cb289-8" aria-hidden="true" tabindex="-1"></a>  fg：图形的前景色</span>
<span id="cb289-9"><a href="Visualization-Tables-Figures.html#cb289-9" aria-hidden="true" tabindex="-1"></a>  bg：图形的背景色</span>
<span id="cb289-10"><a href="Visualization-Tables-Figures.html#cb289-10" aria-hidden="true" tabindex="-1"></a>col指定图形颜色</span>
<span id="cb289-11"><a href="Visualization-Tables-Figures.html#cb289-11" aria-hidden="true" tabindex="-1"></a><span class="fu">colors</span>()方法可以查看R中所有可用的颜色名，一共有657种颜色名，根据颜色名可直接设置图形的显示颜色。下面是部分颜色，完整的图见链接：R语言颜色表</span>
<span id="cb289-12"><a href="Visualization-Tables-Figures.html#cb289-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-13"><a href="Visualization-Tables-Figures.html#cb289-13" aria-hidden="true" tabindex="-1"></a>除了名称外，同样可以用下标，十六进制颜色值，RGB值和HSV值来指定颜色。例子：col<span class="ot">=</span>1、col<span class="ot">=</span><span class="st">&quot;white&quot;</span>、col<span class="ot">=</span><span class="st">&quot;#FFFFFF&quot;</span>、col<span class="ot">=</span><span class="fu">rgb</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>)和col<span class="ot">=</span><span class="fu">hsv</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>)。</span>
<span id="cb289-14"><a href="Visualization-Tables-Figures.html#cb289-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-15"><a href="Visualization-Tables-Figures.html#cb289-15" aria-hidden="true" tabindex="-1"></a>另外，R中还有许多生成颜色变量的函数。有<span class="fu">rainbow</span>()、<span class="fu">heat.colors</span>()、<span class="fu">terrain.colors</span>()、<span class="fu">topo.colors</span>()、<span class="fu">cm.colors</span>()方法，<span class="fu">gray</span>()方法生成多阶灰度色。</span></code></pre></div>
</div>
<div id="颜色梯度" class="section level5 hasAnchor" number="7.2.4.2.2">
<h5><span class="header-section-number">7.2.4.2.2</span> 颜色梯度：<a href="Visualization-Tables-Figures.html#颜色梯度" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="Visualization-Tables-Figures.html#cb290-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 设置</span></span>
<span id="cb290-2"><a href="Visualization-Tables-Figures.html#cb290-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 方法1：</span></span>
<span id="cb290-3"><a href="Visualization-Tables-Figures.html#cb290-3" aria-hidden="true" tabindex="-1"></a>col <span class="ot">=</span> <span class="fu">grey</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span><span class="sc">/</span><span class="dv">100</span>)</span>
<span id="cb290-4"><a href="Visualization-Tables-Figures.html#cb290-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 方法2：</span></span>
<span id="cb290-5"><a href="Visualization-Tables-Figures.html#cb290-5" aria-hidden="true" tabindex="-1"></a>ttt <span class="ot">&lt;-</span> <span class="fu">colorRampPalette</span>(<span class="at">colors =</span> <span class="fu">c</span>(<span class="st">&#39;black&#39;</span>, <span class="st">&#39;white&#39;</span>))( <span class="dv">100</span> )</span>
<span id="cb290-6"><a href="Visualization-Tables-Figures.html#cb290-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(env_bgExt_na,<span class="at">col=</span>ttt )</span></code></pre></div>
<pre><code>## 00:全透明
## FF:不透明
### 蓝色：#0000FF7F
### 黄色：#FFFF008c
### 绿色：#00FF0080
##  透明色：#FFFFFF0
浅黄色：khaki
深黄色：yellow
深蓝色：&quot;lightskyblue&quot;
浅蓝色：&quot;slateblue1&quot;
浅绿色：seagreen1
亮绿色：chartreuse
浅红色：pink
深红色：red

## 参见网站：https://c.runoob.com/front-end/55
透明度 16进制值
00% FF（不透明）
5%  F2
10% E5
15% D8
20% CC
25% BF
30% B2
35% A5
40% 99
45% 8c
50% 7F
55% 72
60% 66
65% 59
70% 4c
75% 3F
80% 33
85% 21
90% 19
95% 0c
100% 00（全透明  ncores = 30

## 参见网站：
https://www.cnblogs.com/summary-2017/p/7504126.html

## 写16进制代码的方式是将颜色加入到前面，最后再加透明度即可！！</code></pre>
</div>
</div>
<div id="文本配置" class="section level4 hasAnchor" number="7.2.4.3">
<h4><span class="header-section-number">7.2.4.3</span> 4.3 文本配置<a href="Visualization-Tables-Figures.html#文本配置" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<pre><code>## base-R:
## 配置全局的文字：
windowsFonts(myFont=windowsFont(&quot;华文中宋&quot;))


## 文本属性(用来指定字号、字体、字样)
cex.axis：坐标轴刻度文字的缩放倍数
cex.lab：坐标轴标签(名称)的缩放倍数
cex.main：标题的缩放倍数
cex.sub：副标题的缩放倍数
font：整数。用于指定字体样式。1常规、2粗体、3斜体、4粗斜体

## </code></pre>
</div>
<div id="图形尺寸与边界" class="section level4 hasAnchor" number="7.2.4.4">
<h4><span class="header-section-number">7.2.4.4</span> 图形尺寸与边界<a href="Visualization-Tables-Figures.html#图形尺寸与边界" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<pre><code>## base -R
pin：以英寸表示图形的宽和高
mai：以数值向量表示边界大小，顺序为&quot;下、左、上、右&quot;，单位为英寸
mar：以数值向量表示边界大小，顺序为&quot;下、左、上、右&quot;，单位为英分，默认值c(5, 4, 4, 2)+0.1</code></pre>
</div>
<div id="坐标轴" class="section level4 hasAnchor" number="7.2.4.5">
<h4><span class="header-section-number">7.2.4.5</span> 坐标轴：<a href="Visualization-Tables-Figures.html#坐标轴" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<pre><code>## base -R:
plot参数
     axes=FALSE  将禁用全部坐标轴，框架和刻度全部没有了
     xaxt=&quot;n&quot;   禁用x轴的刻度线
     yaxt=&quot;n&quot;   禁用y轴的刻度线
也可以通过axis函数自定义axis(……)    
     side：一个整数。表示在图形的哪边绘制坐标轴（1=下，2=左，3=上，4=右）
     at：一个数值向量，表示需要绘制刻度线的位置
     labels：一个字符型向量(也可以是数值型)，表示刻度线旁边的文字标签(刻度值)，如果整个不写，则直接使用at的值
     col：线条和刻度的颜色
     lty：线条类型
     las：标签的字体是否平行(=0)或者垂直(=2)坐标轴
     tck：刻度线的长度(默认值-0.01，负值表示刻度在图形外，正值表示刻度在图形内侧)</code></pre>
<pre><code>## GGPLOT2:
# 笛卡尔坐标：从来看coord_cartesian的参数相对比较简单，x和y的数据限定范围
coord_cartesian(xlim = NULL, ylim = NULL)
# 横向转换坐标：把x轴和y轴互换，没有特殊参数
coord_flip(...)

# 坐标形式转换：包括对数转换，平方根转换等，这里x和y 的值可以是log10,log2或squal等，另外两个参数也是限定坐标范围
coord_trans(x = &quot;identity&quot;, y = &quot;identity&quot;, limx = NULL, limy = NULL)

# 等坐标转换：使用这个函数后，x轴和y轴坐标会被转换成相等形式，此时图形会产生较大的缩放，radio可以进一步调整缩放比例（x和y的比值）
coord_equal(ratio=1, ...)

# 极坐标转换：可以做出蜘蛛图或饼图的效果，参数方面theta 可以选择x或y，表示外延的坐标，start是坐标开始的角度，默认其实位置是12点钟，
coord_polar(theta = &quot;x&quot;, start = 0, direction = 1)
direction 表示数据的方向，1是顺时针，-1为逆时针。</code></pre>
</div>
<div id="参考线辅助线" class="section level4 hasAnchor" number="7.2.4.6">
<h4><span class="header-section-number">7.2.4.6</span> 参考线/辅助线：<a href="Visualization-Tables-Figures.html#参考线辅助线" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<pre><code>## base -R:
abline(h=yvalues, v=xvalues)
例如：plot(1:10)
     abline(h = c(1, 5))  #则在y=1和5处各有一条水平线
     abline(v = c(1, 5))  #则在x=1和5处各有一条垂直线

contour(elev_sa, nlevels=7, 
levels=c(0, 500, 1000, 1500, 2000, 3000, 4000, 5000), 
add=T, labels=““, lwd=0.2)


## GGPLOT2:
 geom_vline(xintercept = 0, color = &#39;gray&#39;, size = 0.4) + 
  geom_hline(yintercept = 0, color = &#39;gray&#39;, size = 0.4) </code></pre>
</div>
<div id="标题配置" class="section level4 hasAnchor" number="7.2.4.7">
<h4><span class="header-section-number">7.2.4.7</span> 标题配置：<a href="Visualization-Tables-Figures.html#标题配置" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<pre><code># base-R
title(main = &quot; &quot;, sub = &quot; &quot;, xlab = &quot; &quot;,  ylab = &quot; &quot;)
也可以直接把title里面的参数直接放在plot()里面</code></pre>
</div>
<div id="图例设置" class="section level4 hasAnchor" number="7.2.4.8">
<h4><span class="header-section-number">7.2.4.8</span> 图例设置：<a href="Visualization-Tables-Figures.html#图例设置" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="Visualization-Tables-Figures.html#cb298-1" aria-hidden="true" tabindex="-1"></a><span class="do">## base-R:</span></span>
<span id="cb298-2"><a href="Visualization-Tables-Figures.html#cb298-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 通过legend函数我们可以添加图例。</span></span>
<span id="cb298-3"><a href="Visualization-Tables-Figures.html#cb298-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="sc">-</span>pi, pi, <span class="at">len =</span> <span class="dv">65</span>)</span>
<span id="cb298-4"><a href="Visualization-Tables-Figures.html#cb298-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(x, <span class="fu">sin</span>(x), <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">1.2</span>, <span class="fl">1.8</span>), <span class="at">col =</span> <span class="dv">3</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb298-5"><a href="Visualization-Tables-Figures.html#cb298-5" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(x, <span class="fu">cos</span>(x), <span class="at">pch =</span> <span class="dv">3</span>, <span class="at">col =</span> <span class="dv">4</span>)</span>
<span id="cb298-6"><a href="Visualization-Tables-Figures.html#cb298-6" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(x, <span class="fu">tan</span>(x), <span class="at">type =</span> <span class="st">&quot;b&quot;</span>, <span class="at">lty =</span> <span class="dv">1</span>, <span class="at">pch =</span> <span class="dv">4</span>, <span class="at">col =</span> <span class="dv">6</span>)</span>
<span id="cb298-7"><a href="Visualization-Tables-Figures.html#cb298-7" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="st">&quot;legend(..., lty = c(2, -1, 1), </span></span>
<span id="cb298-8"><a href="Visualization-Tables-Figures.html#cb298-8" aria-hidden="true" tabindex="-1"></a><span class="st">       pch = c(NA, 3, 4), merge = TRUE)&quot;</span>,</span>
<span id="cb298-9"><a href="Visualization-Tables-Figures.html#cb298-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">cex.main =</span> <span class="fl">1.1</span>)</span>
<span id="cb298-10"><a href="Visualization-Tables-Figures.html#cb298-10" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="fl">1.9</span>, </span>
<span id="cb298-11"><a href="Visualization-Tables-Figures.html#cb298-11" aria-hidden="true" tabindex="-1"></a>       <span class="fu">c</span>(<span class="st">&quot;sin&quot;</span>, <span class="st">&quot;cos&quot;</span>, <span class="st">&quot;tan&quot;</span>), </span>
<span id="cb298-12"><a href="Visualization-Tables-Figures.html#cb298-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">6</span>),</span>
<span id="cb298-13"><a href="Visualization-Tables-Figures.html#cb298-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">text.col =</span> <span class="st">&quot;green4&quot;</span>, </span>
<span id="cb298-14"><a href="Visualization-Tables-Figures.html#cb298-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">lty =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>), </span>
<span id="cb298-15"><a href="Visualization-Tables-Figures.html#cb298-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">pch =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">3</span>, <span class="dv">4</span>),</span>
<span id="cb298-16"><a href="Visualization-Tables-Figures.html#cb298-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">merge =</span> <span class="cn">TRUE</span>, </span>
<span id="cb298-17"><a href="Visualization-Tables-Figures.html#cb298-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">bg =</span> <span class="st">&quot;gray90&quot;</span>)</span>
<span id="cb298-18"><a href="Visualization-Tables-Figures.html#cb298-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb298-19"><a href="Visualization-Tables-Figures.html#cb298-19" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">&quot;bottom&quot;</span>, <span class="at">legend =</span> <span class="fu">levels</span>(iris<span class="sc">$</span>Species),</span>
<span id="cb298-20"><a href="Visualization-Tables-Figures.html#cb298-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span>  <span class="fu">c</span>(<span class="st">&quot;#999999&quot;</span>, <span class="st">&quot;#E69F00&quot;</span>, <span class="st">&quot;#56B4E9&quot;</span>), </span>
<span id="cb298-21"><a href="Visualization-Tables-Figures.html#cb298-21" aria-hidden="true" tabindex="-1"></a>       <span class="at">pch =</span> <span class="fu">c</span>(<span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>), </span>
<span id="cb298-22"><a href="Visualization-Tables-Figures.html#cb298-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">inset =</span> <span class="sc">-</span><span class="fl">0.25</span>, <span class="at">xpd =</span> <span class="cn">TRUE</span>, <span class="at">horiz =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="图形边距设置" class="section level4 hasAnchor" number="7.2.4.9">
<h4><span class="header-section-number">7.2.4.9</span> 图形边距设置：<a href="Visualization-Tables-Figures.html#图形边距设置" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<pre><code>## base-R
par函数可以用来设置图形参数
par函数设置的参数默认值
## 调整图片间的间距：
par(mfcol=c(2,1),mar=c(1,4,1,1),oma=c(2,2,2,2))
## 参见：
https://www.cnblogs.com/mmtinfo/p/12106309.html
## 解决plot.new() : figure margins too large
op &lt;- par(mar = rep(0, 4))  
plot.new()
par(op)</code></pre>
</div>
<div id="添加额外图层" class="section level4 hasAnchor" number="7.2.4.10">
<h4><span class="header-section-number">7.2.4.10</span> 添加额外图层：<a href="Visualization-Tables-Figures.html#添加额外图层" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="Visualization-Tables-Figures.html#cb300-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb300-2"><a href="Visualization-Tables-Figures.html#cb300-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cowplot)</span>
<span id="cb300-3"><a href="Visualization-Tables-Figures.html#cb300-3" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, cty)) <span class="sc">+</span></span>
<span id="cb300-4"><a href="Visualization-Tables-Figures.html#cb300-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb300-5"><a href="Visualization-Tables-Figures.html#cb300-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal_grid</span>()</span>
<span id="cb300-6"><a href="Visualization-Tables-Figures.html#cb300-6" aria-hidden="true" tabindex="-1"></a>cowplot<span class="sc">::</span><span class="fu">ggdraw</span>(p) <span class="sc">+</span> <span class="fu">draw_label</span>(<span class="st">&quot;Draft&quot;</span>, <span class="at">colour =</span> <span class="st">&quot;#80404080&quot;</span>, <span class="at">size =</span> <span class="dv">120</span>, <span class="at">angle =</span> <span class="dv">45</span>)</span></code></pre></div>
</div>
</div>
<div id="绘图" class="section level3 hasAnchor" number="7.2.5">
<h3><span class="header-section-number">7.2.5</span> 绘图<a href="Visualization-Tables-Figures.html#绘图" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="绘制组图" class="section level4 hasAnchor" number="7.2.5.1">
<h4><span class="header-section-number">7.2.5.1</span> 绘制组图<a href="Visualization-Tables-Figures.html#绘制组图" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="Visualization-Tables-Figures.html#cb301-1" aria-hidden="true" tabindex="-1"></a><span class="do">## base-R:</span></span>
<span id="cb301-2"><a href="Visualization-Tables-Figures.html#cb301-2" aria-hidden="true" tabindex="-1"></a><span class="do">## 借助par扩大画幅：</span></span>
<span id="cb301-3"><a href="Visualization-Tables-Figures.html#cb301-3" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>), <span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>), <span class="at">oma=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">0</span>))</span>
<span id="cb301-4"><a href="Visualization-Tables-Figures.html#cb301-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">nndist</span>(ppp.random), <span class="at">main=</span><span class="st">&#39;independant&#39;</span>, <span class="at">pch=</span><span class="dv">16</span>, <span class="at">cex=</span><span class="fl">0.8</span>)</span>
<span id="cb301-5"><a href="Visualization-Tables-Figures.html#cb301-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">nndist</span>(ppp.regular), <span class="at">main=</span><span class="st">&#39;regular&#39;</span>, <span class="at">pch=</span><span class="dv">16</span>, <span class="at">cex=</span><span class="fl">0.8</span>)</span>
<span id="cb301-6"><a href="Visualization-Tables-Figures.html#cb301-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">nndist</span>(ppp.locations), <span class="at">main=</span><span class="st">&#39;clustered&#39;</span>, <span class="at">pch=</span><span class="dv">16</span>, <span class="at">cex=</span><span class="fl">0.8</span>)</span>
<span id="cb301-7"><a href="Visualization-Tables-Figures.html#cb301-7" aria-hidden="true" tabindex="-1"></a><span class="fu">mtext</span>(<span class="st">&quot;Nearest Neighbor Distances&quot;</span>, <span class="at">outer =</span> <span class="cn">TRUE</span>, <span class="at">cex =</span> <span class="fl">1.5</span>)</span>
<span id="cb301-8"><a href="Visualization-Tables-Figures.html#cb301-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb301-9"><a href="Visualization-Tables-Figures.html#cb301-9" aria-hidden="true" tabindex="-1"></a><span class="do">## ggplot2系列：</span></span>
<span id="cb301-10"><a href="Visualization-Tables-Figures.html#cb301-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggtree)</span>
<span id="cb301-11"><a href="Visualization-Tables-Figures.html#cb301-11" aria-hidden="true" tabindex="-1"></a><span class="fu">multiplot</span>(p1, <span class="fu">revts</span>(p1), <span class="at">ncol =</span> <span class="dv">2</span>)</span>
<span id="cb301-12"><a href="Visualization-Tables-Figures.html#cb301-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb301-13"><a href="Visualization-Tables-Figures.html#cb301-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 多图-相似图例：</span></span>
<span id="cb301-14"><a href="Visualization-Tables-Figures.html#cb301-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rasterVis)</span>
<span id="cb301-15"><a href="Visualization-Tables-Figures.html#cb301-15" aria-hidden="true" tabindex="-1"></a><span class="fu">levelplot</span>(all2,<span class="at">layout=</span><span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">4</span>),<span class="at">col.regions=</span>cols,</span>
<span id="cb301-16"><a href="Visualization-Tables-Figures.html#cb301-16" aria-hidden="true" tabindex="-1"></a>          <span class="at">main=</span><span class="st">&quot;HTHI_FOREEST&quot;</span>)</span>
<span id="cb301-17"><a href="Visualization-Tables-Figures.html#cb301-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb301-18"><a href="Visualization-Tables-Figures.html#cb301-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb301-19"><a href="Visualization-Tables-Figures.html#cb301-19" aria-hidden="true" tabindex="-1"></a><span class="do">## 另外的组图高级R包：</span></span>
<span id="cb301-20"><a href="Visualization-Tables-Figures.html#cb301-20" aria-hidden="true" tabindex="-1"></a><span class="do">## cowplot和patchwork</span></span></code></pre></div>
</div>
<div id="导出图形" class="section level4 hasAnchor" number="7.2.5.2">
<h4><span class="header-section-number">7.2.5.2</span> 导出图形<a href="Visualization-Tables-Figures.html#导出图形" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="Visualization-Tables-Figures.html#cb302-1" aria-hidden="true" tabindex="-1"></a><span class="do">## base-R:</span></span>
<span id="cb302-2"><a href="Visualization-Tables-Figures.html#cb302-2" aria-hidden="true" tabindex="-1"></a><span class="fu">png</span>(<span class="st">&quot;./fut_hthi_pro/BIOSNOW2.png&quot;</span>,<span class="at">width =</span><span class="dv">3200</span>, <span class="at">height =</span> <span class="dv">2000</span>,<span class="at">res =</span><span class="dv">300</span>)</span>
<span id="cb302-3"><a href="Visualization-Tables-Figures.html#cb302-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">raster</span>(all[<span class="dv">1</span>]),<span class="at">col =</span> cols)</span>
<span id="cb302-4"><a href="Visualization-Tables-Figures.html#cb302-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span>
<span id="cb302-5"><a href="Visualization-Tables-Figures.html#cb302-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb302-6"><a href="Visualization-Tables-Figures.html#cb302-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 配置图片参数：</span></span>
<span id="cb302-7"><a href="Visualization-Tables-Figures.html#cb302-7" aria-hidden="true" tabindex="-1"></a><span class="fu">png</span>(<span class="st">&#39;plot1.png&#39;</span>,<span class="at">height =</span> <span class="dv">20</span>,<span class="at">width =</span> <span class="dv">20</span>,<span class="at">units =</span> <span class="st">&#39;cm&#39;</span>,<span class="at">res =</span> <span class="dv">800</span>)</span>
<span id="cb302-8"><a href="Visualization-Tables-Figures.html#cb302-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p1_cor)</span>
<span id="cb302-9"><a href="Visualization-Tables-Figures.html#cb302-9" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span>
<span id="cb302-10"><a href="Visualization-Tables-Figures.html#cb302-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb302-11"><a href="Visualization-Tables-Figures.html#cb302-11" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb302-12"><a href="Visualization-Tables-Figures.html#cb302-12" aria-hidden="true" tabindex="-1"></a><span class="fu">tiff</span>(<span class="at">file =</span> <span class="st">&quot;./f3_论文出图/try4.tiff&quot;</span>, <span class="at">res =</span> <span class="dv">600</span>, <span class="at">width =</span> <span class="dv">2000</span>, </span>
<span id="cb302-13"><a href="Visualization-Tables-Figures.html#cb302-13" aria-hidden="true" tabindex="-1"></a><span class="at">height =</span><span class="dv">2500</span>, <span class="at">compression =</span> <span class="st">&quot;lzw&quot;</span>)</span>
<span id="cb302-14"><a href="Visualization-Tables-Figures.html#cb302-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb302-15"><a href="Visualization-Tables-Figures.html#cb302-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb302-16"><a href="Visualization-Tables-Figures.html#cb302-16" aria-hidden="true" tabindex="-1"></a><span class="do">## GGPLOT2风格：</span></span>
<span id="cb302-17"><a href="Visualization-Tables-Figures.html#cb302-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 批量出图：</span></span>
<span id="cb302-18"><a href="Visualization-Tables-Figures.html#cb302-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 使用ggpubr::ggexport()导出成pdf文件</span></span>
<span id="cb302-19"><a href="Visualization-Tables-Figures.html#cb302-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggpubr)</span>
<span id="cb302-20"><a href="Visualization-Tables-Figures.html#cb302-20" aria-hidden="true" tabindex="-1"></a><span class="do">##一张图一页；</span></span>
<span id="cb302-21"><a href="Visualization-Tables-Figures.html#cb302-21" aria-hidden="true" tabindex="-1"></a><span class="fu">ggexport</span>(<span class="at">plotlist =</span> <span class="fu">list</span>(scree.plot, ind.plot, var.plot), </span>
<span id="cb302-22"><a href="Visualization-Tables-Figures.html#cb302-22" aria-hidden="true" tabindex="-1"></a>         <span class="at">filename =</span> <span class="st">&quot;PCA.pdf&quot;</span>)</span>
<span id="cb302-23"><a href="Visualization-Tables-Figures.html#cb302-23" aria-hidden="true" tabindex="-1"></a><span class="do">## 一张图多页；</span></span>
<span id="cb302-24"><a href="Visualization-Tables-Figures.html#cb302-24" aria-hidden="true" tabindex="-1"></a><span class="fu">ggexport</span>(<span class="at">plotlist =</span> <span class="fu">list</span>(scree.plot, ind.plot, var.plot), </span>
<span id="cb302-25"><a href="Visualization-Tables-Figures.html#cb302-25" aria-hidden="true" tabindex="-1"></a>         <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">2</span>,</span>
<span id="cb302-26"><a href="Visualization-Tables-Figures.html#cb302-26" aria-hidden="true" tabindex="-1"></a>         <span class="at">filename =</span> <span class="st">&quot;PCA.pdf&quot;</span>)</span>
<span id="cb302-27"><a href="Visualization-Tables-Figures.html#cb302-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb302-28"><a href="Visualization-Tables-Figures.html#cb302-28" aria-hidden="true" tabindex="-1"></a><span class="do">##将图表导出到png文件。如果指定绘图列表，则将自动创建多个png文件以保存每个绘图</span></span>
<span id="cb302-29"><a href="Visualization-Tables-Figures.html#cb302-29" aria-hidden="true" tabindex="-1"></a><span class="fu">ggexport</span>(<span class="at">plotlist =</span> <span class="fu">list</span>(scree.plot, ind.plot, var.plot),</span>
<span id="cb302-30"><a href="Visualization-Tables-Figures.html#cb302-30" aria-hidden="true" tabindex="-1"></a>         <span class="at">filename =</span> <span class="st">&quot;PCA.png&quot;</span>)</span>
<span id="cb302-31"><a href="Visualization-Tables-Figures.html#cb302-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb302-32"><a href="Visualization-Tables-Figures.html#cb302-32" aria-hidden="true" tabindex="-1"></a><span class="do">## 批量导出图片到pdf格式：</span></span>
<span id="cb302-33"><a href="Visualization-Tables-Figures.html#cb302-33" aria-hidden="true" tabindex="-1"></a>ff <span class="ot">&lt;-</span> <span class="fu">list</span>(bio11,BIO16)</span>
<span id="cb302-34"><a href="Visualization-Tables-Figures.html#cb302-34" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cowplot)</span>
<span id="cb302-35"><a href="Visualization-Tables-Figures.html#cb302-35" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="st">&quot;./f3_论文出图&quot;</span>)</span>
<span id="cb302-36"><a href="Visualization-Tables-Figures.html#cb302-36" aria-hidden="true" tabindex="-1"></a><span class="fu">pdf</span>(<span class="st">&quot;./f3_论文出图/boxplot4.pdf&quot;</span>)</span>
<span id="cb302-37"><a href="Visualization-Tables-Figures.html#cb302-37" aria-hidden="true" tabindex="-1"></a><span class="co"># tiff(file = &quot;./f3_论文出图/boxplot.tiff&quot;, res = 300, width = 2000, height =6000, compression = &quot;lzw&quot;)</span></span>
<span id="cb302-38"><a href="Visualization-Tables-Figures.html#cb302-38" aria-hidden="true" tabindex="-1"></a><span class="fu">ggdraw</span>(<span class="fu">plot_grid</span>(<span class="fu">plot_grid</span>(<span class="at">plotlist =</span> ff,<span class="at">ncol=</span><span class="dv">1</span>,<span class="at">nrow=</span><span class="dv">2</span>, <span class="at">align=</span><span class="st">&#39;v&#39;</span>),</span>
<span id="cb302-39"><a href="Visualization-Tables-Figures.html#cb302-39" aria-hidden="true" tabindex="-1"></a>                 <span class="co"># plot_grid(NULL, legend,ncol=2),</span></span>
<span id="cb302-40"><a href="Visualization-Tables-Figures.html#cb302-40" aria-hidden="true" tabindex="-1"></a>                 <span class="at">rel_widths=</span><span class="fu">c</span>(<span class="dv">1</span>, <span class="fl">0.2</span>)))</span>
<span id="cb302-41"><a href="Visualization-Tables-Figures.html#cb302-41" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span>
<span id="cb302-42"><a href="Visualization-Tables-Figures.html#cb302-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb302-43"><a href="Visualization-Tables-Figures.html#cb302-43" aria-hidden="true" tabindex="-1"></a><span class="do">### GGSAVE():</span></span>
<span id="cb302-44"><a href="Visualization-Tables-Figures.html#cb302-44" aria-hidden="true" tabindex="-1"></a><span class="do">## 保存图片：使用ggsvae：</span></span>
<span id="cb302-45"><a href="Visualization-Tables-Figures.html#cb302-45" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span><span class="st">&quot;ggplot2_point.png&quot;</span>,<span class="at">plot =</span>p1,</span>
<span id="cb302-46"><a href="Visualization-Tables-Figures.html#cb302-46" aria-hidden="true" tabindex="-1"></a>      <span class="at">width=</span><span class="fl">8.9</span>,<span class="at">height=</span> <span class="dv">6</span>,<span class="at">units=</span><span class="st">&quot;cm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span>
<span id="cb302-47"><a href="Visualization-Tables-Figures.html#cb302-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb302-48"><a href="Visualization-Tables-Figures.html#cb302-48" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">&quot;ggolot2-point.pdf&quot;</span>,<span class="at">plot=</span> p1,<span class="at">device=</span><span class="st">&quot;pdf&quot;</span>,</span>
<span id="cb302-49"><a href="Visualization-Tables-Figures.html#cb302-49" aria-hidden="true" tabindex="-1"></a>       <span class="at">width=</span><span class="fl">8.9</span>,<span class="at">height=</span> <span class="dv">6</span>,<span class="at">units=</span><span class="st">&quot;cm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span>
<span id="cb302-50"><a href="Visualization-Tables-Figures.html#cb302-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb302-51"><a href="Visualization-Tables-Figures.html#cb302-51" aria-hidden="true" tabindex="-1"></a><span class="do">## 保存为jpg格式：</span></span>
<span id="cb302-52"><a href="Visualization-Tables-Figures.html#cb302-52" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;p1.jpg&quot;</span>,<span class="at">width=</span><span class="dv">6</span>,<span class="at">height =</span><span class="dv">5</span>)</span>
<span id="cb302-53"><a href="Visualization-Tables-Figures.html#cb302-53" aria-hidden="true" tabindex="-1"></a><span class="fu">jpeg</span>(<span class="st">&quot;p1.jpg&quot;</span>,<span class="at">width =</span><span class="dv">1200</span>,<span class="at">height =</span> <span class="dv">2000</span>,<span class="at">units =</span><span class="st">&quot;px&quot;</span>)</span>
<span id="cb302-54"><a href="Visualization-Tables-Figures.html#cb302-54" aria-hidden="true" tabindex="-1"></a>p1 </span>
<span id="cb302-55"><a href="Visualization-Tables-Figures.html#cb302-55" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
</div>
</div>
<div id="统计图形代码" class="section level3 hasAnchor" number="7.2.6">
<h3><span class="header-section-number">7.2.6</span> 统计图形代码<a href="Visualization-Tables-Figures.html#统计图形代码" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="线性模型" class="section level4 hasAnchor" number="7.2.6.1">
<h4><span class="header-section-number">7.2.6.1</span> 线性模型<a href="Visualization-Tables-Figures.html#线性模型" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="一般线性模型可视化base-r" class="section level5 hasAnchor" number="7.2.6.1.1">
<h5><span class="header-section-number">7.2.6.1.1</span> 一般线性模型可视化base-R：<a href="Visualization-Tables-Figures.html#一般线性模型可视化base-r" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="Visualization-Tables-Figures.html#cb303-1" aria-hidden="true" tabindex="-1"></a><span class="do">## base-R:</span></span>
<span id="cb303-2"><a href="Visualization-Tables-Figures.html#cb303-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(data<span class="sc">$</span>height, data<span class="sc">$</span>weight)</span>
<span id="cb303-3"><a href="Visualization-Tables-Figures.html#cb303-3" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(model, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>)</span>
<span id="cb303-4"><a href="Visualization-Tables-Figures.html#cb303-4" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">&quot;topleft&quot;</span>,</span>
<span id="cb303-5"><a href="Visualization-Tables-Figures.html#cb303-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">&#39;data points&#39;</span>, <span class="st">&#39;regression line&#39;</span>), </span>
<span id="cb303-6"><a href="Visualization-Tables-Figures.html#cb303-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">cex =</span> <span class="fl">0.7</span>, </span>
<span id="cb303-7"><a href="Visualization-Tables-Figures.html#cb303-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&#39;black&#39;</span>, <span class="st">&#39;red&#39;</span>), </span>
<span id="cb303-8"><a href="Visualization-Tables-Figures.html#cb303-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">lwd =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">1</span>), </span>
<span id="cb303-9"><a href="Visualization-Tables-Figures.html#cb303-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">pch =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">NA</span>))</span>
<span id="cb303-10"><a href="Visualization-Tables-Figures.html#cb303-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb303-11"><a href="Visualization-Tables-Figures.html#cb303-11" aria-hidden="true" tabindex="-1"></a><span class="do">## GGPLOT2 - 标记R2和p：</span></span>
<span id="cb303-12"><a href="Visualization-Tables-Figures.html#cb303-12" aria-hidden="true" tabindex="-1"></a><span class="co">#读取鱼类物种丰度和水体环境数据</span></span>
<span id="cb303-13"><a href="Visualization-Tables-Figures.html#cb303-13" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(<span class="st">&#39;fish_data.txt&#39;</span>, <span class="at">sep =</span> <span class="st">&#39;</span><span class="sc">\t</span><span class="st">&#39;</span>, <span class="at">row.names =</span> <span class="dv">1</span>)</span>
<span id="cb303-14"><a href="Visualization-Tables-Figures.html#cb303-14" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb303-15"><a href="Visualization-Tables-Figures.html#cb303-15" aria-hidden="true" tabindex="-1"></a><span class="co">#绘制二维散点图观测各环境变量与鱼类物种丰度的关系</span></span>
<span id="cb303-16"><a href="Visualization-Tables-Figures.html#cb303-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb303-17"><a href="Visualization-Tables-Figures.html#cb303-17" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb303-18"><a href="Visualization-Tables-Figures.html#cb303-18" aria-hidden="true" tabindex="-1"></a>dat_plot <span class="ot">&lt;-</span> reshape2<span class="sc">::</span><span class="fu">melt</span>(dat, <span class="at">id =</span> <span class="st">&#39;fish&#39;</span>)</span>
<span id="cb303-19"><a href="Visualization-Tables-Figures.html#cb303-19" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb303-20"><a href="Visualization-Tables-Figures.html#cb303-20" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(dat_plot, <span class="fu">aes</span>(value, fish)) <span class="sc">+</span></span>
<span id="cb303-21"><a href="Visualization-Tables-Figures.html#cb303-21" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb303-22"><a href="Visualization-Tables-Figures.html#cb303-22" aria-hidden="true" tabindex="-1"></a><span class="fu">facet_wrap</span>(<span class="sc">~</span>variable, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">scale =</span> <span class="st">&#39;free&#39;</span>) <span class="sc">+</span></span>
<span id="cb303-23"><a href="Visualization-Tables-Figures.html#cb303-23" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&#39;lm&#39;</span>)</span>
<span id="cb303-24"><a href="Visualization-Tables-Figures.html#cb303-24" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb303-25"><a href="Visualization-Tables-Figures.html#cb303-25" aria-hidden="true" tabindex="-1"></a>p</span>
<span id="cb303-26"><a href="Visualization-Tables-Figures.html#cb303-26" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb303-27"><a href="Visualization-Tables-Figures.html#cb303-27" aria-hidden="true" tabindex="-1"></a><span class="co">#拟合各环境变量与鱼类物种丰度的一元回归，并提取各自 R2 和 p 值</span></span>
<span id="cb303-28"><a href="Visualization-Tables-Figures.html#cb303-28" aria-hidden="true" tabindex="-1"></a>env <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;acre&#39;</span>, <span class="st">&#39;do2&#39;</span>, <span class="st">&#39;depth&#39;</span>, <span class="st">&#39;no3&#39;</span>, <span class="st">&#39;so4&#39;</span>, <span class="st">&#39;temp&#39;</span>)</span>
<span id="cb303-29"><a href="Visualization-Tables-Figures.html#cb303-29" aria-hidden="true" tabindex="-1"></a>R2_adj <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb303-30"><a href="Visualization-Tables-Figures.html#cb303-30" aria-hidden="true" tabindex="-1"></a>p_value <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb303-31"><a href="Visualization-Tables-Figures.html#cb303-31" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb303-32"><a href="Visualization-Tables-Figures.html#cb303-32" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> env) {</span>
<span id="cb303-33"><a href="Visualization-Tables-Figures.html#cb303-33" aria-hidden="true" tabindex="-1"></a>    fit_stat <span class="ot">&lt;-</span> <span class="fu">summary</span>(<span class="fu">lm</span>(dat[[<span class="st">&#39;fish&#39;</span>]]<span class="sc">~</span>dat[[i]]))  <span class="co">#一元线性回归</span></span>
<span id="cb303-34"><a href="Visualization-Tables-Figures.html#cb303-34" aria-hidden="true" tabindex="-1"></a>    R2_adj <span class="ot">&lt;-</span> <span class="fu">c</span>(R2_adj, fit_stat<span class="sc">$</span>adj.r.squared)  <span class="co">#提取校正后 R2</span></span>
<span id="cb303-35"><a href="Visualization-Tables-Figures.html#cb303-35" aria-hidden="true" tabindex="-1"></a>    p_value <span class="ot">&lt;-</span> <span class="fu">c</span>(p_value, fit_stat<span class="sc">$</span>coefficients[<span class="dv">2</span>,<span class="dv">4</span>])  <span class="co">#提取显著性 p 值</span></span>
<span id="cb303-36"><a href="Visualization-Tables-Figures.html#cb303-36" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb303-37"><a href="Visualization-Tables-Figures.html#cb303-37" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb303-38"><a href="Visualization-Tables-Figures.html#cb303-38" aria-hidden="true" tabindex="-1"></a>env_stat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">row.names =</span> env, R2_adj, p_value)</span>
<span id="cb303-39"><a href="Visualization-Tables-Figures.html#cb303-39" aria-hidden="true" tabindex="-1"></a>env_stat  <span class="co">#数据框中存储了各环境变量与鱼类物种丰度的一元回归的 R2 和 p 值</span></span>
<span id="cb303-40"><a href="Visualization-Tables-Figures.html#cb303-40" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb303-41"><a href="Visualization-Tables-Figures.html#cb303-41" aria-hidden="true" tabindex="-1"></a><span class="co">#在散点图中添加各环境变量与鱼类物种丰度的一元回归的 R2 和 p 值作为标识</span></span>
<span id="cb303-42"><a href="Visualization-Tables-Figures.html#cb303-42" aria-hidden="true" tabindex="-1"></a><span class="co">#注：该 R2 和 p 值仅为单个变量一元回归的 R2 和 p 值，和下文即将提到的多元回归的 R2 和 p 值存在区别</span></span>
<span id="cb303-43"><a href="Visualization-Tables-Figures.html#cb303-43" aria-hidden="true" tabindex="-1"></a>env_stat<span class="sc">$</span>fish <span class="ot">&lt;-</span> <span class="fu">max</span>(dat<span class="sc">$</span>fish) <span class="sc">*</span> <span class="fl">0.8</span></span>
<span id="cb303-44"><a href="Visualization-Tables-Figures.html#cb303-44" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> env) env_stat[i,<span class="st">&#39;value&#39;</span>] <span class="ot">&lt;-</span> <span class="fu">max</span>(dat[[i]]) <span class="sc">*</span> <span class="fl">0.8</span>  <span class="co">#这句和上一句，定义文字在图中的展示坐标，这里仅粗略设置下</span></span>
<span id="cb303-45"><a href="Visualization-Tables-Figures.html#cb303-45" aria-hidden="true" tabindex="-1"></a>env_stat<span class="sc">$</span>variable <span class="ot">&lt;-</span> <span class="fu">rownames</span>(env_stat)</span>
<span id="cb303-46"><a href="Visualization-Tables-Figures.html#cb303-46" aria-hidden="true" tabindex="-1"></a>env_stat<span class="sc">$</span>label <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&#39;R2.adj =&#39;</span>, <span class="fu">round</span>(env_stat<span class="sc">$</span>R2_adj, <span class="dv">3</span>), <span class="st">&#39;</span><span class="sc">\n</span><span class="st">p =&#39;</span>, <span class="fu">round</span>(env_stat<span class="sc">$</span>p_value, <span class="dv">3</span>))  <span class="co">#文字标签</span></span>
<span id="cb303-47"><a href="Visualization-Tables-Figures.html#cb303-47" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb303-48"><a href="Visualization-Tables-Figures.html#cb303-48" aria-hidden="true" tabindex="-1"></a>env_stat <span class="ot">&lt;-</span> env_stat[<span class="fu">c</span>(<span class="st">&#39;fish&#39;</span>, <span class="st">&#39;variable&#39;</span>, <span class="st">&#39;value&#39;</span>, <span class="st">&#39;label&#39;</span>)]</span>
<span id="cb303-49"><a href="Visualization-Tables-Figures.html#cb303-49" aria-hidden="true" tabindex="-1"></a>dat_plot<span class="sc">$</span>label <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb303-50"><a href="Visualization-Tables-Figures.html#cb303-50" aria-hidden="true" tabindex="-1"></a>dat_plot <span class="ot">&lt;-</span> <span class="fu">rbind</span>(dat_plot, env_stat)  <span class="co">#和先前的数据框合并，便于作图</span></span>
<span id="cb303-51"><a href="Visualization-Tables-Figures.html#cb303-51" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb303-52"><a href="Visualization-Tables-Figures.html#cb303-52" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_text</span>(<span class="at">data =</span> dat_plot, <span class="fu">aes</span>(<span class="at">label =</span> label), <span class="at">size =</span> <span class="dv">3</span>)</span></code></pre></div>
</div>
<div id="一般线性模型可视化ggplot2-r" class="section level5 hasAnchor" number="7.2.6.1.2">
<h5><span class="header-section-number">7.2.6.1.2</span> 一般线性模型可视化ggplot2-R：<a href="Visualization-Tables-Figures.html#一般线性模型可视化ggplot2-r" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="Visualization-Tables-Figures.html#cb304-1" aria-hidden="true" tabindex="-1"></a>label_df <span class="ot">=</span> <span class="fu">data.frame</span>(</span>
<span id="cb304-2"><a href="Visualization-Tables-Figures.html#cb304-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.5</span>,<span class="sc">-</span><span class="fl">0.5</span>,<span class="sc">-</span><span class="fl">0.5</span>),</span>
<span id="cb304-3"><a href="Visualization-Tables-Figures.html#cb304-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">c</span>(<span class="fl">0.3</span>,<span class="fl">0.25</span>,<span class="fl">0.2</span>),</span>
<span id="cb304-4"><a href="Visualization-Tables-Figures.html#cb304-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">label =</span> <span class="fu">c</span>(<span class="fu">paste0</span>(<span class="st">&quot;COR = &quot;</span>, <span class="fu">round</span>(<span class="fu">cor</span>(train_simu,train<span class="sc">$</span>shortwave),<span class="dv">2</span>)),</span>
<span id="cb304-5"><a href="Visualization-Tables-Figures.html#cb304-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">paste0</span>(<span class="st">&quot;p = &quot;</span>, <span class="fu">formatC</span>(<span class="fu">cor.test</span>(train_simu,train<span class="sc">$</span>shortwave)<span class="sc">$</span>p.value)),</span>
<span id="cb304-6"><a href="Visualization-Tables-Figures.html#cb304-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">paste0</span>(<span class="st">&quot;RMSE = &quot;</span>, <span class="fu">round</span>(<span class="fu">rmse</span>(train_simu,train<span class="sc">$</span>shortwave),<span class="dv">3</span>)))</span>
<span id="cb304-7"><a href="Visualization-Tables-Figures.html#cb304-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb304-8"><a href="Visualization-Tables-Figures.html#cb304-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb304-9"><a href="Visualization-Tables-Figures.html#cb304-9" aria-hidden="true" tabindex="-1"></a>p1_cor <span class="ot">=</span> <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb304-10"><a href="Visualization-Tables-Figures.html#cb304-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> pl_point_df,</span>
<span id="cb304-11"><a href="Visualization-Tables-Figures.html#cb304-11" aria-hidden="true" tabindex="-1"></a>             <span class="fu">aes</span>(<span class="at">x =</span> SIMU, <span class="at">y=</span> TRAIN),</span>
<span id="cb304-12"><a href="Visualization-Tables-Figures.html#cb304-12" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">5</span>,</span>
<span id="cb304-13"><a href="Visualization-Tables-Figures.html#cb304-13" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&#39;blue&#39;</span>,</span>
<span id="cb304-14"><a href="Visualization-Tables-Figures.html#cb304-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb304-15"><a href="Visualization-Tables-Figures.html#cb304-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">0</span>,<span class="at">slope =</span> <span class="dv">1</span>,<span class="at">size =</span> <span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb304-16"><a href="Visualization-Tables-Figures.html#cb304-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> label_df,<span class="fu">aes</span>(<span class="at">x =</span> x,<span class="at">y =</span> y,<span class="at">label =</span> label),<span class="at">size =</span> <span class="dv">6</span>,<span class="at">color =</span> <span class="st">&#39;black&#39;</span>,</span>
<span id="cb304-17"><a href="Visualization-Tables-Figures.html#cb304-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">hjust =</span> <span class="dv">0</span>)<span class="sc">+</span></span>
<span id="cb304-18"><a href="Visualization-Tables-Figures.html#cb304-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb304-19"><a href="Visualization-Tables-Figures.html#cb304-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb304-20"><a href="Visualization-Tables-Figures.html#cb304-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span>  <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&#39;bold&#39;</span>,<span class="at">color =</span> <span class="st">&#39;black&#39;</span>,<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb304-21"><a href="Visualization-Tables-Figures.html#cb304-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span>  <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&#39;bold&#39;</span>,<span class="at">color =</span> <span class="st">&#39;black&#39;</span>,<span class="at">size =</span> <span class="dv">14</span>, <span class="at">hjust =</span> .<span class="dv">5</span>)</span>
<span id="cb304-22"><a href="Visualization-Tables-Figures.html#cb304-22" aria-hidden="true" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb304-23"><a href="Visualization-Tables-Figures.html#cb304-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&#39;SIMULATION RESULT&#39;</span>)<span class="sc">+</span></span>
<span id="cb304-24"><a href="Visualization-Tables-Figures.html#cb304-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&#39;REAL SHORTWAVE&#39;</span>)</span>
<span id="cb304-25"><a href="Visualization-Tables-Figures.html#cb304-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb304-26"><a href="Visualization-Tables-Figures.html#cb304-26" aria-hidden="true" tabindex="-1"></a><span class="do">### 添加P值和R2:</span></span>
<span id="cb304-27"><a href="Visualization-Tables-Figures.html#cb304-27" aria-hidden="true" tabindex="-1"></a>https<span class="sc">:</span><span class="er">//</span>lukemiller.org<span class="sc">/</span>index.php<span class="sc">/</span><span class="dv">2012</span><span class="sc">/</span><span class="dv">10</span><span class="sc">/</span>adding<span class="sc">-</span>p<span class="sc">-</span>values<span class="sc">-</span>and<span class="sc">-</span>r<span class="sc">-</span>squared<span class="sc">-</span>values<span class="sc">-</span>to<span class="sc">-</span>a<span class="sc">-</span>plot<span class="sc">-</span>using<span class="sc">-</span>expression<span class="sc">/</span></span></code></pre></div>
</div>
<div id="多变量相关性图" class="section level5 hasAnchor" number="7.2.6.1.3">
<h5><span class="header-section-number">7.2.6.1.3</span> 多变量相关性图：<a href="Visualization-Tables-Figures.html#多变量相关性图" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="Visualization-Tables-Figures.html#cb305-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally)</span>
<span id="cb305-2"><a href="Visualization-Tables-Figures.html#cb305-2" aria-hidden="true" tabindex="-1"></a><span class="do">### 第一种形式：</span></span>
<span id="cb305-3"><a href="Visualization-Tables-Figures.html#cb305-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggpairs</span>(dat[<span class="fu">which</span>(<span class="fu">names</span>(dat) <span class="sc">!=</span> <span class="st">&#39;fish&#39;</span>)])</span>
<span id="cb305-4"><a href="Visualization-Tables-Figures.html#cb305-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb305-5"><a href="Visualization-Tables-Figures.html#cb305-5" aria-hidden="true" tabindex="-1"></a><span class="do">### 第二种形式：</span></span>
<span id="cb305-6"><a href="Visualization-Tables-Figures.html#cb305-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggcorr</span>(mtcars[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">9</span>)], <span class="at">nbreaks =</span> <span class="cn">NULL</span>, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">low =</span> <span class="st">&#39;red3&#39;</span>, <span class="at">high =</span> <span class="st">&#39;green3&#39;</span>,</span>
<span id="cb305-7"><a href="Visualization-Tables-Figures.html#cb305-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">label_round =</span> <span class="dv">2</span>, <span class="at">name =</span> <span class="st">&#39;Correlation Scale&#39;</span>, <span class="at">label_alpha =</span> <span class="cn">TRUE</span>, <span class="at">hjust =</span> <span class="fl">0.75</span>) <span class="sc">+</span></span>
<span id="cb305-8"><a href="Visualization-Tables-Figures.html#cb305-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggtitle</span>(<span class="at">label =</span> <span class="st">&#39;Correlation Plot&#39;</span>) <span class="sc">+</span></span>
<span id="cb305-9"><a href="Visualization-Tables-Figures.html#cb305-9" aria-hidden="true" tabindex="-1"></a><span class="fu">theme</span>(<span class="at">plot.titl =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.6</span>))</span>
<span id="cb305-10"><a href="Visualization-Tables-Figures.html#cb305-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb305-11"><a href="Visualization-Tables-Figures.html#cb305-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 第三种形式</span></span>
<span id="cb305-12"><a href="Visualization-Tables-Figures.html#cb305-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lattice)</span>
<span id="cb305-13"><a href="Visualization-Tables-Figures.html#cb305-13" aria-hidden="true" tabindex="-1"></a><span class="fu">splom</span>(df)</span></code></pre></div>
</div>
<div id="三维散点图" class="section level5 hasAnchor" number="7.2.6.1.4">
<h5><span class="header-section-number">7.2.6.1.4</span> 三维散点图：<a href="Visualization-Tables-Figures.html#三维散点图" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="Visualization-Tables-Figures.html#cb306-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 可视化数据框：</span></span>
<span id="cb306-2"><a href="Visualization-Tables-Figures.html#cb306-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scatterplot3d)</span>
<span id="cb306-3"><a href="Visualization-Tables-Figures.html#cb306-3" aria-hidden="true" tabindex="-1"></a>scatter<span class="fl">.3</span>d <span class="ot">&lt;-</span> <span class="fu">with</span>(df, <span class="fu">scatterplot3d</span>(Girth, Height, Volume, </span>
<span id="cb306-4"><a href="Visualization-Tables-Figures.html#cb306-4" aria-hidden="true" tabindex="-1"></a>                              <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">highlight.3d =</span> <span class="cn">TRUE</span>, </span>
<span id="cb306-5"><a href="Visualization-Tables-Figures.html#cb306-5" aria-hidden="true" tabindex="-1"></a>                              <span class="at">angle =</span> <span class="dv">60</span>))</span>
<span id="cb306-6"><a href="Visualization-Tables-Figures.html#cb306-6" aria-hidden="true" tabindex="-1"></a>scatter<span class="fl">.3</span>d<span class="sc">$</span><span class="fu">plane3d</span>(model2)</span></code></pre></div>
</div>
</div>
<div id="分组统计图" class="section level4 hasAnchor" number="7.2.6.2">
<h4><span class="header-section-number">7.2.6.2</span> 分组统计图：<a href="Visualization-Tables-Figures.html#分组统计图" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="豆荚图" class="section level5 hasAnchor" number="7.2.6.2.1">
<h5><span class="header-section-number">7.2.6.2.1</span> 豆荚图<a href="Visualization-Tables-Figures.html#豆荚图" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="Visualization-Tables-Figures.html#cb307-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 学习制作豆荚图来优化数据的可视化流程：</span></span>
<span id="cb307-2"><a href="Visualization-Tables-Figures.html#cb307-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;beanplot&quot;</span>)</span>
<span id="cb307-3"><a href="Visualization-Tables-Figures.html#cb307-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb307-4"><a href="Visualization-Tables-Figures.html#cb307-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;beanplot&quot;</span>)</span>
<span id="cb307-5"><a href="Visualization-Tables-Figures.html#cb307-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb307-6"><a href="Visualization-Tables-Figures.html#cb307-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb307-7"><a href="Visualization-Tables-Figures.html#cb307-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建三组数据，分别为双峰，均匀和正态分布</span></span>
<span id="cb307-8"><a href="Visualization-Tables-Figures.html#cb307-8" aria-hidden="true" tabindex="-1"></a>bimodal <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rnorm</span>(<span class="dv">250</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="fl">0.6</span>), <span class="fu">rnorm</span>(<span class="dv">250</span>, <span class="dv">2</span>, <span class="fl">0.6</span>))</span>
<span id="cb307-9"><a href="Visualization-Tables-Figures.html#cb307-9" aria-hidden="true" tabindex="-1"></a>uniform <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">500</span>, <span class="sc">-</span><span class="dv">4</span>, <span class="dv">4</span>)</span>
<span id="cb307-10"><a href="Visualization-Tables-Figures.html#cb307-10" aria-hidden="true" tabindex="-1"></a>normal <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">500</span>, <span class="dv">0</span>, <span class="fl">1.5</span>)</span>
<span id="cb307-11"><a href="Visualization-Tables-Figures.html#cb307-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb307-12"><a href="Visualization-Tables-Figures.html#cb307-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 制作豆荚图</span></span>
<span id="cb307-13"><a href="Visualization-Tables-Figures.html#cb307-13" aria-hidden="true" tabindex="-1"></a><span class="fu">beanplot</span>(bimodal, uniform, normal, <span class="co"># 注明用于作图的三组数据</span></span>
<span id="cb307-14"><a href="Visualization-Tables-Figures.html#cb307-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">main =</span> <span class="st">&quot;Beanplot&quot;</span>, <span class="co"># 题目</span></span>
<span id="cb307-15"><a href="Visualization-Tables-Figures.html#cb307-15" aria-hidden="true" tabindex="-1"></a>         <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;#CAB2D6&quot;</span>, <span class="st">&quot;#33A02C&quot;</span>, <span class="st">&quot;#B2DF8A&quot;</span>), <span class="co"># 修改颜色：分布，豆荚内横线，豆荚外横线</span></span>
<span id="cb307-16"><a href="Visualization-Tables-Figures.html#cb307-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">border =</span> <span class="st">&quot;#CAB2D6&quot;</span>) <span class="co"># 豆荚图的边缘颜色</span></span>
<span id="cb307-17"><a href="Visualization-Tables-Figures.html#cb307-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb307-18"><a href="Visualization-Tables-Figures.html#cb307-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb307-19"><a href="Visualization-Tables-Figures.html#cb307-19" aria-hidden="true" tabindex="-1"></a><span class="do">## 另外一种例子：</span></span>
<span id="cb307-20"><a href="Visualization-Tables-Figures.html#cb307-20" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;singer&quot;</span>, <span class="at">package =</span> <span class="st">&quot;lattice&quot;</span>)</span>
<span id="cb307-21"><a href="Visualization-Tables-Figures.html#cb307-21" aria-hidden="true" tabindex="-1"></a>mydata <span class="ot">&lt;-</span> singer</span>
<span id="cb307-22"><a href="Visualization-Tables-Figures.html#cb307-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb307-23"><a href="Visualization-Tables-Figures.html#cb307-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 查看数据集</span></span>
<span id="cb307-24"><a href="Visualization-Tables-Figures.html#cb307-24" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mydata)</span>
<span id="cb307-25"><a href="Visualization-Tables-Figures.html#cb307-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb307-26"><a href="Visualization-Tables-Figures.html#cb307-26" aria-hidden="true" tabindex="-1"></a><span class="fu">beanplot</span>(height <span class="sc">~</span> voice.part, <span class="co"># 可以使用熟悉的模式: y ~ x</span></span>
<span id="cb307-27"><a href="Visualization-Tables-Figures.html#cb307-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">data =</span> mydata, <span class="co"># 数据</span></span>
<span id="cb307-28"><a href="Visualization-Tables-Figures.html#cb307-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">ll =</span> <span class="fl">0.05</span>, <span class="co"># 改变豆荚内横线的长度</span></span>
<span id="cb307-29"><a href="Visualization-Tables-Figures.html#cb307-29" aria-hidden="true" tabindex="-1"></a>         <span class="at">main =</span> <span class="st">&quot;Beanplot&quot;</span>, <span class="co"># 题目</span></span>
<span id="cb307-30"><a href="Visualization-Tables-Figures.html#cb307-30" aria-hidden="true" tabindex="-1"></a>         <span class="at">ylab =</span> <span class="st">&quot;Body height&quot;</span>, <span class="co"># y轴标签</span></span>
<span id="cb307-31"><a href="Visualization-Tables-Figures.html#cb307-31" aria-hidden="true" tabindex="-1"></a>         <span class="at">col =</span> <span class="st">&quot;gray90&quot;</span>) <span class="co"># 改变豆荚内的分布颜色</span></span></code></pre></div>
</div>
<div id="森林图" class="section level5 hasAnchor" number="7.2.6.2.2">
<h5><span class="header-section-number">7.2.6.2.2</span> 森林图<a href="Visualization-Tables-Figures.html#森林图" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div id="ggplot2" class="section level6 hasAnchor" number="7.2.6.2.2.1">
<h6><span class="header-section-number">7.2.6.2.2.1</span> 6.2.2.1 ggplot2<a href="Visualization-Tables-Figures.html#ggplot2" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="Visualization-Tables-Figures.html#cb308-1" aria-hidden="true" tabindex="-1"></a><span class="do">### 森林图：</span></span>
<span id="cb308-2"><a href="Visualization-Tables-Figures.html#cb308-2" aria-hidden="true" tabindex="-1"></a>forest_35 <span class="ot">&lt;-</span> <span class="fu">glm</span>(inpatient_time <span class="sc">~</span> fbg_diff <span class="sc">+</span> fbg_reg <span class="sc">+</span> age <span class="sc">+</span> sex <span class="sc">+</span> region <span class="sc">+</span> cad <span class="sc">+</span> hbp <span class="sc">+</span> stroke <span class="sc">+</span> ckd <span class="sc">+</span> group_1 <span class="sc">+</span> treatment_plan, <span class="at">family =</span> <span class="st">&quot;gaussian&quot;</span>, <span class="at">data =</span> secondary5) <span class="sc">%&gt;%</span></span>
<span id="cb308-3"><a href="Visualization-Tables-Figures.html#cb308-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy</span>(<span class="at">conf.int =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb308-4"><a href="Visualization-Tables-Figures.html#cb308-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), round, <span class="at">digits =</span> <span class="dv">2</span>),</span>
<span id="cb308-5"><a href="Visualization-Tables-Figures.html#cb308-5" aria-hidden="true" tabindex="-1"></a>           <span class="co">#set order of levels to appear along y-axis</span></span>
<span id="cb308-6"><a href="Visualization-Tables-Figures.html#cb308-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">term =</span> <span class="fu">fct_relevel</span>(term, ...),</span>
<span id="cb308-7"><a href="Visualization-Tables-Figures.html#cb308-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">term =</span> <span class="fu">recode</span>(term,</span>
<span id="cb308-8"><a href="Visualization-Tables-Figures.html#cb308-8" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;fbg_diff&quot;</span> <span class="ot">=</span> <span class="st">&quot;空腹血糖变化差值&quot;</span>,</span>
<span id="cb308-9"><a href="Visualization-Tables-Figures.html#cb308-9" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;fbg_reg&quot;</span> <span class="ot">=</span> <span class="st">&quot;末次空腹血糖&lt;6.1mmol/l&quot;</span>,</span>
<span id="cb308-10"><a href="Visualization-Tables-Figures.html#cb308-10" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;age&quot;</span> <span class="ot">=</span> <span class="st">&quot;年龄&quot;</span>,</span>
<span id="cb308-11"><a href="Visualization-Tables-Figures.html#cb308-11" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;sex女&quot;</span> <span class="ot">=</span> <span class="st">&quot;性别：女&quot;</span>,</span>
<span id="cb308-12"><a href="Visualization-Tables-Figures.html#cb308-12" aria-hidden="true" tabindex="-1"></a>                       <span class="co"># &quot;insurance_type医保类型缺失&quot; = &quot;医保类型缺失&quot;,</span></span>
<span id="cb308-13"><a href="Visualization-Tables-Figures.html#cb308-13" aria-hidden="true" tabindex="-1"></a>                       <span class="co"># &quot;insurance_type有基本医疗保险&quot; = &quot;有基本医疗保险&quot;,</span></span>
<span id="cb308-14"><a href="Visualization-Tables-Figures.html#cb308-14" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;region东部地区&quot;</span> <span class="ot">=</span> <span class="st">&quot;东部地区&quot;</span>,</span>
<span id="cb308-15"><a href="Visualization-Tables-Figures.html#cb308-15" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;region西部地区&quot;</span> <span class="ot">=</span> <span class="st">&quot;西部地区&quot;</span>,</span>
<span id="cb308-16"><a href="Visualization-Tables-Figures.html#cb308-16" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;cad&quot;</span> <span class="ot">=</span> <span class="st">&quot;冠心病&quot;</span>,</span>
<span id="cb308-17"><a href="Visualization-Tables-Figures.html#cb308-17" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;hbp&quot;</span> <span class="ot">=</span> <span class="st">&quot;高血压&quot;</span>,</span>
<span id="cb308-18"><a href="Visualization-Tables-Figures.html#cb308-18" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;stroke&quot;</span> <span class="ot">=</span> <span class="st">&quot;卒中&quot;</span>,</span>
<span id="cb308-19"><a href="Visualization-Tables-Figures.html#cb308-19" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;ckd&quot;</span> <span class="ot">=</span> <span class="st">&quot;慢性肾功能不全&quot;</span>,</span>
<span id="cb308-20"><a href="Visualization-Tables-Figures.html#cb308-20" aria-hidden="true" tabindex="-1"></a>                       <span class="co"># &quot;disease_num1&quot; = &quot;合并1种疾病&quot;,</span></span>
<span id="cb308-21"><a href="Visualization-Tables-Figures.html#cb308-21" aria-hidden="true" tabindex="-1"></a>                       <span class="co"># &quot;disease_num2&quot; = &quot;合并2种疾病&quot;,</span></span>
<span id="cb308-22"><a href="Visualization-Tables-Figures.html#cb308-22" aria-hidden="true" tabindex="-1"></a>                       <span class="co"># &quot;disease_num3&quot; = &quot;合并3种疾病&quot;,</span></span>
<span id="cb308-23"><a href="Visualization-Tables-Figures.html#cb308-23" aria-hidden="true" tabindex="-1"></a>                       <span class="co"># &quot;disease_num4&quot; = &quot;合并4种疾病&quot;,</span></span>
<span id="cb308-24"><a href="Visualization-Tables-Figures.html#cb308-24" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;group_1预混胰岛素组&quot;</span> <span class="ot">=</span> <span class="st">&quot;预混胰岛素&quot;</span>,</span>
<span id="cb308-25"><a href="Visualization-Tables-Figures.html#cb308-25" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;treatment_plan二联治疗&quot;</span> <span class="ot">=</span> <span class="st">&quot;二联治疗&quot;</span>,</span>
<span id="cb308-26"><a href="Visualization-Tables-Figures.html#cb308-26" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;treatment_plan三联治疗&quot;</span> <span class="ot">=</span> <span class="st">&quot;三联治疗&quot;</span>,</span>
<span id="cb308-27"><a href="Visualization-Tables-Figures.html#cb308-27" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;treatment_plan胰岛素多次治疗&quot;</span> <span class="ot">=</span> <span class="st">&quot;胰岛素多次治疗&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb308-28"><a href="Visualization-Tables-Figures.html#cb308-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(term <span class="sc">!=</span> <span class="st">&quot;(Intercept)&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb308-29"><a href="Visualization-Tables-Figures.html#cb308-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb308-30"><a href="Visualization-Tables-Figures.html#cb308-30" aria-hidden="true" tabindex="-1"></a>  <span class="do">## plot with variable on the y axis and estimate (OR) on the x axis</span></span>
<span id="cb308-31"><a href="Visualization-Tables-Figures.html#cb308-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> estimate, <span class="at">y =</span> term)) <span class="sc">+</span></span>
<span id="cb308-32"><a href="Visualization-Tables-Figures.html#cb308-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb308-33"><a href="Visualization-Tables-Figures.html#cb308-33" aria-hidden="true" tabindex="-1"></a>  <span class="do">## show the estimate as a point</span></span>
<span id="cb308-34"><a href="Visualization-Tables-Figures.html#cb308-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb308-35"><a href="Visualization-Tables-Figures.html#cb308-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb308-36"><a href="Visualization-Tables-Figures.html#cb308-36" aria-hidden="true" tabindex="-1"></a>  <span class="do">## add in an error bar for the confidence intervals</span></span>
<span id="cb308-37"><a href="Visualization-Tables-Figures.html#cb308-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> conf.low, <span class="at">xmax =</span> conf.high)) <span class="sc">+</span></span>
<span id="cb308-38"><a href="Visualization-Tables-Figures.html#cb308-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb308-39"><a href="Visualization-Tables-Figures.html#cb308-39" aria-hidden="true" tabindex="-1"></a>  <span class="do">## show where OR = 1 is for reference as a dashed line</span></span>
<span id="cb308-40"><a href="Visualization-Tables-Figures.html#cb308-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb308-41"><a href="Visualization-Tables-Figures.html#cb308-41" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb308-42"><a href="Visualization-Tables-Figures.html#cb308-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;变量&quot;</span>) <span class="sc">+</span></span>
<span id="cb308-43"><a href="Visualization-Tables-Figures.html#cb308-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb308-44"><a href="Visualization-Tables-Figures.html#cb308-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Beta&quot;</span>) <span class="sc">+</span></span>
<span id="cb308-45"><a href="Visualization-Tables-Figures.html#cb308-45" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb308-46"><a href="Visualization-Tables-Figures.html#cb308-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;表35森林图&quot;</span>)</span>
<span id="cb308-47"><a href="Visualization-Tables-Figures.html#cb308-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb308-48"><a href="Visualization-Tables-Figures.html#cb308-48" aria-hidden="true" tabindex="-1"></a>forest_35</span></code></pre></div>
</div>
<div id="森林表" class="section level6 hasAnchor" number="7.2.6.2.2.2">
<h6><span class="header-section-number">7.2.6.2.2.2</span> 6.2.1.2 森林表<a href="Visualization-Tables-Figures.html#森林表" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="Visualization-Tables-Figures.html#cb309-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survival)</span>
<span id="cb309-2"><a href="Visualization-Tables-Figures.html#cb309-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survminer)</span>
<span id="cb309-3"><a href="Visualization-Tables-Figures.html#cb309-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(eoffice) <span class="co">#导出ppt用</span></span>
<span id="cb309-4"><a href="Visualization-Tables-Figures.html#cb309-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb309-5"><a href="Visualization-Tables-Figures.html#cb309-5" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(&quot;eoffice&quot;)</span></span>
<span id="cb309-6"><a href="Visualization-Tables-Figures.html#cb309-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb309-7"><a href="Visualization-Tables-Figures.html#cb309-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb309-8"><a href="Visualization-Tables-Figures.html#cb309-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 第一种方法： -----</span></span>
<span id="cb309-9"><a href="Visualization-Tables-Figures.html#cb309-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 以colon数据为示例数据</span></span>
<span id="cb309-10"><a href="Visualization-Tables-Figures.html#cb309-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 时间变量是time，结局变量是status，自变量选择 sex，rx和 adhere</span></span>
<span id="cb309-11"><a href="Visualization-Tables-Figures.html#cb309-11" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">coxph</span>( <span class="fu">Surv</span>(time, status) <span class="sc">~</span> sex <span class="sc">+</span> rx <span class="sc">+</span> adhere,</span>
<span id="cb309-12"><a href="Visualization-Tables-Figures.html#cb309-12" aria-hidden="true" tabindex="-1"></a>                <span class="at">data =</span> colon )</span>
<span id="cb309-13"><a href="Visualization-Tables-Figures.html#cb309-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 森林图</span></span>
<span id="cb309-14"><a href="Visualization-Tables-Figures.html#cb309-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggforest</span>(model,  <span class="co">#coxph得到的Cox回归结果</span></span>
<span id="cb309-15"><a href="Visualization-Tables-Figures.html#cb309-15" aria-hidden="true" tabindex="-1"></a>         <span class="at">data =</span> colon,  <span class="co">#数据集</span></span>
<span id="cb309-16"><a href="Visualization-Tables-Figures.html#cb309-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">main =</span> <span class="st">&#39;Hazard ratio of colon&#39;</span>,  <span class="co">#标题</span></span>
<span id="cb309-17"><a href="Visualization-Tables-Figures.html#cb309-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">cpositions =</span> <span class="fu">c</span>(<span class="fl">0.05</span>, <span class="fl">0.15</span>, <span class="fl">0.35</span>),  <span class="co">#前三列距离</span></span>
<span id="cb309-18"><a href="Visualization-Tables-Figures.html#cb309-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">fontsize =</span> <span class="dv">1</span>, <span class="co">#字体大小</span></span>
<span id="cb309-19"><a href="Visualization-Tables-Figures.html#cb309-19" aria-hidden="true" tabindex="-1"></a>         <span class="at">refLabel =</span> <span class="st">&#39;reference&#39;</span>, <span class="co">#相对变量的数值标签，也可改为1</span></span>
<span id="cb309-20"><a href="Visualization-Tables-Figures.html#cb309-20" aria-hidden="true" tabindex="-1"></a>         <span class="at">noDigits =</span> <span class="dv">3</span> <span class="co">#保留HR值以及95%CI的小数位数)</span></span>
<span id="cb309-21"><a href="Visualization-Tables-Figures.html#cb309-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb309-22"><a href="Visualization-Tables-Figures.html#cb309-22" aria-hidden="true" tabindex="-1"></a><span class="co"># 第二种方法：-----</span></span>
<span id="cb309-23"><a href="Visualization-Tables-Figures.html#cb309-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 安装R包</span></span>
<span id="cb309-24"><a href="Visualization-Tables-Figures.html#cb309-24" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)</span>
<span id="cb309-25"><a href="Visualization-Tables-Figures.html#cb309-25" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;ddsjoberg/bstfun&quot;</span>)</span>
<span id="cb309-26"><a href="Visualization-Tables-Figures.html#cb309-26" aria-hidden="true" tabindex="-1"></a><span class="co"># 载入</span></span>
<span id="cb309-27"><a href="Visualization-Tables-Figures.html#cb309-27" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;gtsummary&quot;</span>)   <span class="co"># 表格制作</span></span>
<span id="cb309-28"><a href="Visualization-Tables-Figures.html#cb309-28" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;dplyr&quot;</span>)       <span class="co"># 数据处理</span></span>
<span id="cb309-29"><a href="Visualization-Tables-Figures.html#cb309-29" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;bstfun&quot;</span>)      <span class="co"># 画出森林图</span></span>
<span id="cb309-30"><a href="Visualization-Tables-Figures.html#cb309-30" aria-hidden="true" tabindex="-1"></a><span class="co"># 建立线性回归模型</span></span>
<span id="cb309-31"><a href="Visualization-Tables-Figures.html#cb309-31" aria-hidden="true" tabindex="-1"></a>linear_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> am <span class="sc">+</span> drat <span class="sc">+</span> wt <span class="sc">+</span> hp, <span class="at">data =</span> mtcars)</span>
<span id="cb309-32"><a href="Visualization-Tables-Figures.html#cb309-32" aria-hidden="true" tabindex="-1"></a><span class="co"># 制作回归结果的表格</span></span>
<span id="cb309-33"><a href="Visualization-Tables-Figures.html#cb309-33" aria-hidden="true" tabindex="-1"></a>linear_model <span class="sc">%&gt;%</span> <span class="fu">tbl_regression</span>()</span>
<span id="cb309-34"><a href="Visualization-Tables-Figures.html#cb309-34" aria-hidden="true" tabindex="-1"></a>linear_model <span class="sc">%&gt;%</span></span>
<span id="cb309-35"><a href="Visualization-Tables-Figures.html#cb309-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_regression</span>() <span class="sc">%&gt;%</span></span>
<span id="cb309-36"><a href="Visualization-Tables-Figures.html#cb309-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_inline_forest_plot</span>()</span>
<span id="cb309-37"><a href="Visualization-Tables-Figures.html#cb309-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb309-38"><a href="Visualization-Tables-Figures.html#cb309-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb309-39"><a href="Visualization-Tables-Figures.html#cb309-39" aria-hidden="true" tabindex="-1"></a><span class="do">## 第三种方法：----</span></span>
<span id="cb309-40"><a href="Visualization-Tables-Figures.html#cb309-40" aria-hidden="true" tabindex="-1"></a><span class="do">## 参见：https://zhuanlan.zhihu.com/p/493258386</span></span>
<span id="cb309-41"><a href="Visualization-Tables-Figures.html#cb309-41" aria-hidden="true" tabindex="-1"></a><span class="do">## 参数配置：https://www.jianshu.com/p/7331c8f40d87</span></span>
<span id="cb309-42"><a href="Visualization-Tables-Figures.html#cb309-42" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;forestplot&quot;</span>)</span>
<span id="cb309-43"><a href="Visualization-Tables-Figures.html#cb309-43" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forestplot)</span>
<span id="cb309-44"><a href="Visualization-Tables-Figures.html#cb309-44" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span><span class="fu">read.table</span>(<span class="st">&quot;clipboard&quot;</span>, <span class="at">header =</span> F, <span class="at">sep =</span> <span class="st">&#39;</span><span class="sc">\t</span><span class="st">&#39;</span>)</span>
<span id="cb309-45"><a href="Visualization-Tables-Figures.html#cb309-45" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(result[,<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="dv">7</span><span class="sc">:</span><span class="dv">8</span>)])</span>
<span id="cb309-46"><a href="Visualization-Tables-Figures.html#cb309-46" aria-hidden="true" tabindex="-1"></a><span class="do">## 核心构建思路是将图表中数据进行重构，搭建缺失数形式，然后其他数据自然出表，</span></span>
<span id="cb309-47"><a href="Visualization-Tables-Figures.html#cb309-47" aria-hidden="true" tabindex="-1"></a><span class="do">## 而森林图组分使用mean/lower/upper来构建对应的参数形式：</span></span>
<span id="cb309-48"><a href="Visualization-Tables-Figures.html#cb309-48" aria-hidden="true" tabindex="-1"></a><span class="fu">forestplot</span>(result[,<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="dv">7</span><span class="sc">:</span><span class="dv">8</span>)],            <span class="co"># {1:3，7:8指Excel中的列号}</span></span>
<span id="cb309-49"><a href="Visualization-Tables-Figures.html#cb309-49" aria-hidden="true" tabindex="-1"></a>                  <span class="at">mean=</span>result[,<span class="dv">4</span>],</span>
<span id="cb309-50"><a href="Visualization-Tables-Figures.html#cb309-50" aria-hidden="true" tabindex="-1"></a>                  <span class="at">lower=</span>result[,<span class="dv">5</span>],</span>
<span id="cb309-51"><a href="Visualization-Tables-Figures.html#cb309-51" aria-hidden="true" tabindex="-1"></a>                  <span class="at">upper=</span>result[,<span class="dv">6</span>],</span>
<span id="cb309-52"><a href="Visualization-Tables-Figures.html#cb309-52" aria-hidden="true" tabindex="-1"></a>                  <span class="at">zero=</span><span class="dv">1</span>,                         <span class="co"># {表示我们以坐标x轴=1为中心}</span></span>
<span id="cb309-53"><a href="Visualization-Tables-Figures.html#cb309-53" aria-hidden="true" tabindex="-1"></a>                  <span class="at">boxsize=</span><span class="fl">0.3</span>,</span>
<span id="cb309-54"><a href="Visualization-Tables-Figures.html#cb309-54" aria-hidden="true" tabindex="-1"></a>                  <span class="at">graph.pos =</span> <span class="dv">4</span>,</span>
<span id="cb309-55"><a href="Visualization-Tables-Figures.html#cb309-55" aria-hidden="true" tabindex="-1"></a>                  <span class="at">hrzl_lines=</span><span class="fu">list</span>(<span class="st">&#39;1&#39;</span><span class="ot">=</span><span class="fu">gpar</span>(<span class="at">lty=</span><span class="dv">1</span>,<span class="at">lwd=</span><span class="dv">2</span>),</span>
<span id="cb309-56"><a href="Visualization-Tables-Figures.html#cb309-56" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">&#39;2&#39;</span><span class="ot">=</span><span class="fu">gpar</span>(<span class="at">lty=</span><span class="dv">1</span>,<span class="at">lwd=</span><span class="dv">2</span>),</span>
<span id="cb309-57"><a href="Visualization-Tables-Figures.html#cb309-57" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">&#39;24&#39;</span><span class="ot">=</span><span class="fu">gpar</span>(<span class="at">lwd=</span><span class="dv">2</span>,<span class="at">lty=</span><span class="dv">1</span>)),      <span class="co">#  {绘制表格线，33表示所有行数+1}</span></span>
<span id="cb309-58"><a href="Visualization-Tables-Figures.html#cb309-58" aria-hidden="true" tabindex="-1"></a>                  <span class="at">graphwidth=</span><span class="fu">unit</span>(.<span class="dv">25</span>,<span class="st">&#39;npc&#39;</span>),</span>
<span id="cb309-59"><a href="Visualization-Tables-Figures.html#cb309-59" aria-hidden="true" tabindex="-1"></a>                  <span class="at">xticks=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>),    <span class="co"># {此处定义横坐标，so就设了1,2,3,4}</span></span>
<span id="cb309-60"><a href="Visualization-Tables-Figures.html#cb309-60" aria-hidden="true" tabindex="-1"></a>                  <span class="co"># is.summary=c(T,</span></span>
<span id="cb309-61"><a href="Visualization-Tables-Figures.html#cb309-61" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#              T,F,F,</span></span>
<span id="cb309-62"><a href="Visualization-Tables-Figures.html#cb309-62" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#              T,F,F,</span></span>
<span id="cb309-63"><a href="Visualization-Tables-Figures.html#cb309-63" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#              T,F,F,F,</span></span>
<span id="cb309-64"><a href="Visualization-Tables-Figures.html#cb309-64" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#              T,F,F,</span></span>
<span id="cb309-65"><a href="Visualization-Tables-Figures.html#cb309-65" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#              T,F,F,</span></span>
<span id="cb309-66"><a href="Visualization-Tables-Figures.html#cb309-66" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#              T,F,F,F,F,</span></span>
<span id="cb309-67"><a href="Visualization-Tables-Figures.html#cb309-67" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#              T,F,F,</span></span>
<span id="cb309-68"><a href="Visualization-Tables-Figures.html#cb309-68" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#              T,F,F,</span></span>
<span id="cb309-69"><a href="Visualization-Tables-Figures.html#cb309-69" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#              T,F,F,F),  #{T,F表示从第一行开始是否需要横杠，T表示不需要跑出}</span></span>
<span id="cb309-70"><a href="Visualization-Tables-Figures.html#cb309-70" aria-hidden="true" tabindex="-1"></a>                  <span class="at">txt_gp=</span><span class="fu">fpTxtGp</span>(<span class="at">label =</span> <span class="fu">gpar</span>(<span class="at">cex=</span><span class="dv">1</span>),</span>
<span id="cb309-71"><a href="Visualization-Tables-Figures.html#cb309-71" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">ticks =</span> <span class="fu">gpar</span>(<span class="at">cex=</span><span class="fl">1.1</span>),</span>
<span id="cb309-72"><a href="Visualization-Tables-Figures.html#cb309-72" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">xlab =</span> <span class="fu">gpar</span>(<span class="at">cex=</span><span class="dv">1</span>),</span>
<span id="cb309-73"><a href="Visualization-Tables-Figures.html#cb309-73" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">title =</span> <span class="fu">gpar</span>(<span class="at">cex=</span><span class="dv">2</span>)),</span>
<span id="cb309-74"><a href="Visualization-Tables-Figures.html#cb309-74" aria-hidden="true" tabindex="-1"></a>                   <span class="at">xlab=</span><span class="st">&#39;Hazard ratio&#39;</span>,   </span>
<span id="cb309-75"><a href="Visualization-Tables-Figures.html#cb309-75" aria-hidden="true" tabindex="-1"></a>                  <span class="at">lwd.zero=</span><span class="dv">2</span>,</span>
<span id="cb309-76"><a href="Visualization-Tables-Figures.html#cb309-76" aria-hidden="true" tabindex="-1"></a>                  <span class="at">lwd.ci=</span><span class="dv">2</span>,</span>
<span id="cb309-77"><a href="Visualization-Tables-Figures.html#cb309-77" aria-hidden="true" tabindex="-1"></a>                  <span class="at">lwd.xaxis=</span><span class="dv">1</span>,          </span>
<span id="cb309-78"><a href="Visualization-Tables-Figures.html#cb309-78" aria-hidden="true" tabindex="-1"></a>                  <span class="at">lty.ci=</span><span class="dv">1</span>,</span>
<span id="cb309-79"><a href="Visualization-Tables-Figures.html#cb309-79" aria-hidden="true" tabindex="-1"></a>                  <span class="at">ci.vertices=</span>T,</span>
<span id="cb309-80"><a href="Visualization-Tables-Figures.html#cb309-80" aria-hidden="true" tabindex="-1"></a>                  <span class="at">ci.vertices.height=</span><span class="fl">0.2</span>,</span>
<span id="cb309-81"><a href="Visualization-Tables-Figures.html#cb309-81" aria-hidden="true" tabindex="-1"></a>                  <span class="at">clip=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">4</span>),</span>
<span id="cb309-82"><a href="Visualization-Tables-Figures.html#cb309-82" aria-hidden="true" tabindex="-1"></a>                  <span class="at">ineheight=</span><span class="fu">unit</span>(<span class="dv">8</span>,<span class="st">&#39;mm&#39;</span>),</span>
<span id="cb309-83"><a href="Visualization-Tables-Figures.html#cb309-83" aria-hidden="true" tabindex="-1"></a>                  <span class="at">line.margin=</span><span class="fu">unit</span>(<span class="dv">8</span>,<span class="st">&#39;mm&#39;</span>),</span>
<span id="cb309-84"><a href="Visualization-Tables-Figures.html#cb309-84" aria-hidden="true" tabindex="-1"></a>                  <span class="at">colgap=</span><span class="fu">unit</span>(<span class="dv">6</span>,<span class="st">&#39;mm&#39;</span>),</span>
<span id="cb309-85"><a href="Visualization-Tables-Figures.html#cb309-85" aria-hidden="true" tabindex="-1"></a>                  <span class="at">col=</span><span class="fu">fpColors</span>(<span class="at">zero =</span> <span class="st">&#39;black&#39;</span>,</span>
<span id="cb309-86"><a href="Visualization-Tables-Figures.html#cb309-86" aria-hidden="true" tabindex="-1"></a>                               <span class="at">box =</span> <span class="st">&#39;black&#39;</span>,</span>
<span id="cb309-87"><a href="Visualization-Tables-Figures.html#cb309-87" aria-hidden="true" tabindex="-1"></a>                               <span class="at">lines =</span> <span class="st">&#39;black&#39;</span>),</span>
<span id="cb309-88"><a href="Visualization-Tables-Figures.html#cb309-88" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fn.ci_norm=</span><span class="st">&#39;fpDrawCircleCI&#39;</span></span>
<span id="cb309-89"><a href="Visualization-Tables-Figures.html#cb309-89" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb309-90"><a href="Visualization-Tables-Figures.html#cb309-90" aria-hidden="true" tabindex="-1"></a>fig</span></code></pre></div>
</div>
</div>
<div id="蜜蜂图" class="section level5 hasAnchor" number="7.2.6.2.3">
<h5><span class="header-section-number">7.2.6.2.3</span> 蜜蜂图：<a href="Visualization-Tables-Figures.html#蜜蜂图" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="Visualization-Tables-Figures.html#cb310-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 方案1：</span></span>
<span id="cb310-2"><a href="Visualization-Tables-Figures.html#cb310-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(beeswarm)</span>
<span id="cb310-3"><a href="Visualization-Tables-Figures.html#cb310-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(breast)</span>
<span id="cb310-4"><a href="Visualization-Tables-Figures.html#cb310-4" aria-hidden="true" tabindex="-1"></a><span class="fu">beeswarm</span>(time_survival <span class="sc">~</span> ER, <span class="at">data =</span> breast,</span>
<span id="cb310-5"><a href="Visualization-Tables-Figures.html#cb310-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">pwcol =</span> <span class="dv">1</span> <span class="sc">+</span> <span class="fu">as.numeric</span>(event_survival),</span>
<span id="cb310-6"><a href="Visualization-Tables-Figures.html#cb310-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">xlab =</span> <span class="st">&quot;&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;Follow-up time (months)&quot;</span>,</span>
<span id="cb310-7"><a href="Visualization-Tables-Figures.html#cb310-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;ER neg&quot;</span>, <span class="st">&quot;ER pos&quot;</span>))</span>
<span id="cb310-8"><a href="Visualization-Tables-Figures.html#cb310-8" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">&quot;topright&quot;</span>, <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;No&quot;</span>),</span>
<span id="cb310-9"><a href="Visualization-Tables-Figures.html#cb310-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Censored&quot;</span>, <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">col =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb310-10"><a href="Visualization-Tables-Figures.html#cb310-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 方案2</span></span>
<span id="cb310-11"><a href="Visualization-Tables-Figures.html#cb310-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(breast,<span class="fu">aes</span>(<span class="at">x=</span>ER,<span class="at">y=</span>time_survival))<span class="sc">+</span></span>
<span id="cb310-12"><a href="Visualization-Tables-Figures.html#cb310-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_beeswarm</span>(<span class="fu">aes</span>(<span class="at">color=</span><span class="fu">factor</span>(event_survival)),<span class="at">cex=</span><span class="fl">1.5</span>)<span class="sc">+</span><span class="co">#cex用于设置点的密集程度</span></span>
<span id="cb310-13"><a href="Visualization-Tables-Figures.html#cb310-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb310-14"><a href="Visualization-Tables-Figures.html#cb310-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb310-15"><a href="Visualization-Tables-Figures.html#cb310-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">&quot;top&quot;</span>),</span>
<span id="cb310-16"><a href="Visualization-Tables-Figures.html#cb310-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb310-17"><a href="Visualization-Tables-Figures.html#cb310-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb310-18"><a href="Visualization-Tables-Figures.html#cb310-18" aria-hidden="true" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb310-19"><a href="Visualization-Tables-Figures.html#cb310-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;Black&quot;</span>,<span class="st">&quot;Red&quot;</span>),<span class="at">name=</span><span class="st">&quot;Censored&quot;</span>,<span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Yes&quot;</span>,<span class="st">&quot;No&quot;</span>))<span class="sc">+</span></span>
<span id="cb310-20"><a href="Visualization-Tables-Figures.html#cb310-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;ER neg&quot;</span>,<span class="st">&quot;ER pos&quot;</span>))<span class="sc">+</span></span>
<span id="cb310-21"><a href="Visualization-Tables-Figures.html#cb310-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)<span class="sc">+</span></span>
<span id="cb310-22"><a href="Visualization-Tables-Figures.html#cb310-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Follow-up time (months)&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="栅格密度图" class="section level4 hasAnchor" number="7.2.6.3">
<h4><span class="header-section-number">7.2.6.3</span> 栅格密度图：<a href="Visualization-Tables-Figures.html#栅格密度图" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="Visualization-Tables-Figures.html#cb311-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 单个栅格：</span></span>
<span id="cb311-2"><a href="Visualization-Tables-Figures.html#cb311-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rastervis)</span>
<span id="cb311-3"><a href="Visualization-Tables-Figures.html#cb311-3" aria-hidden="true" tabindex="-1"></a><span class="fu">levelplot</span>(tmin1.c)</span>
<span id="cb311-4"><a href="Visualization-Tables-Figures.html#cb311-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb311-5"><a href="Visualization-Tables-Figures.html#cb311-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 多个栅格：</span></span>
<span id="cb311-6"><a href="Visualization-Tables-Figures.html#cb311-6" aria-hidden="true" tabindex="-1"></a>raster<span class="sc">::</span><span class="fu">pairs</span>(clim_subset,<span class="at">maxpixels=</span><span class="dv">1000</span></span>
<span id="cb311-7"><a href="Visualization-Tables-Figures.html#cb311-7" aria-hidden="true" tabindex="-1"></a>              </span>
<span id="cb311-8"><a href="Visualization-Tables-Figures.html#cb311-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 使用par(mfrow =c(2,4)) </span></span>
<span id="cb311-9"><a href="Visualization-Tables-Figures.html#cb311-9" aria-hidden="true" tabindex="-1"></a>       </span>
<span id="cb311-10"><a href="Visualization-Tables-Figures.html#cb311-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  在给定范围内可视化：</span></span>
<span id="cb311-11"><a href="Visualization-Tables-Figures.html#cb311-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 绘图中extent的范围：</span></span>
<span id="cb311-12"><a href="Visualization-Tables-Figures.html#cb311-12" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(predictors[[<span class="dv">1</span>]], <span class="at">col=</span><span class="st">&quot;gray80&quot;</span>, <span class="at">ext=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">8</span>, <span class="sc">-</span><span class="dv">3</span>, <span class="dv">42</span>, <span class="dv">44</span>))</span>
<span id="cb311-13"><a href="Visualization-Tables-Figures.html#cb311-13" aria-hidden="true" tabindex="-1"></a>              </span>
<span id="cb311-14"><a href="Visualization-Tables-Figures.html#cb311-14" aria-hidden="true" tabindex="-1"></a>              </span>
<span id="cb311-15"><a href="Visualization-Tables-Figures.html#cb311-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 地图可视化：</span></span>
<span id="cb311-16"><a href="Visualization-Tables-Figures.html#cb311-16" aria-hidden="true" tabindex="-1"></a><span class="co">#plot the map</span></span>
<span id="cb311-17"><a href="Visualization-Tables-Figures.html#cb311-17" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb311-18"><a href="Visualization-Tables-Figures.html#cb311-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="at">data =</span> G1,</span>
<span id="cb311-19"><a href="Visualization-Tables-Figures.html#cb311-19" aria-hidden="true" tabindex="-1"></a>               <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group),</span>
<span id="cb311-20"><a href="Visualization-Tables-Figures.html#cb311-20" aria-hidden="true" tabindex="-1"></a>               <span class="at">colour =</span> <span class="st">&quot;grey10&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;#fff7bc&quot;</span>) <span class="sc">+</span></span>
<span id="cb311-21"><a href="Visualization-Tables-Figures.html#cb311-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> dwd.data,</span>
<span id="cb311-22"><a href="Visualization-Tables-Figures.html#cb311-22" aria-hidden="true" tabindex="-1"></a>             <span class="fu">aes</span>(<span class="at">x =</span> LON, <span class="at">y =</span> LAT, <span class="at">colour =</span> data.subset),</span>
<span id="cb311-23"><a href="Visualization-Tables-Figures.html#cb311-23" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> .<span class="dv">5</span>,</span>
<span id="cb311-24"><a href="Visualization-Tables-Figures.html#cb311-24" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb311-25"><a href="Visualization-Tables-Figures.html#cb311-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb311-26"><a href="Visualization-Tables-Figures.html#cb311-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Longitude&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;Latitude&quot;</span>) <span class="sc">+</span></span>
<span id="cb311-27"><a href="Visualization-Tables-Figures.html#cb311-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_map</span>()</span>
<span id="cb311-28"><a href="Visualization-Tables-Figures.html#cb311-28" aria-hidden="true" tabindex="-1"></a>              </span>
<span id="cb311-29"><a href="Visualization-Tables-Figures.html#cb311-29" aria-hidden="true" tabindex="-1"></a>              </span>
<span id="cb311-30"><a href="Visualization-Tables-Figures.html#cb311-30" aria-hidden="true" tabindex="-1"></a><span class="do">## 高程叠加可视化：3D：</span></span>
<span id="cb311-31"><a href="Visualization-Tables-Figures.html#cb311-31" aria-hidden="true" tabindex="-1"></a><span class="do">## 不能使用library(rayshader)这个包，需要更换：</span></span>
<span id="cb311-32"><a href="Visualization-Tables-Figures.html#cb311-32" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rasterVis)</span>
<span id="cb311-33"><a href="Visualization-Tables-Figures.html#cb311-33" aria-hidden="true" tabindex="-1"></a><span class="do">## 添加投影坐标系下的栅格；前置高程，后置叠加栅格；</span></span>
<span id="cb311-34"><a href="Visualization-Tables-Figures.html#cb311-34" aria-hidden="true" tabindex="-1"></a><span class="fu">plot3D</span>(demms,<span class="at">drape=</span> biox , <span class="at">adjust =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="交互式绘图" class="section level4 hasAnchor" number="7.2.6.4">
<h4><span class="header-section-number">7.2.6.4</span> 交互式绘图<a href="Visualization-Tables-Figures.html#交互式绘图" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="plotlyggplotly" class="section level5 hasAnchor" number="7.2.6.4.1">
<h5><span class="header-section-number">7.2.6.4.1</span> plotly::ggplotly()<a href="Visualization-Tables-Figures.html#plotlyggplotly" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="Visualization-Tables-Figures.html#cb312-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 使用 R、plotly 和闪亮的基于 Web 的交互式数据可视化</span></span>
<span id="cb312-2"><a href="Visualization-Tables-Figures.html#cb312-2" aria-hidden="true" tabindex="-1"></a>https<span class="sc">:</span><span class="er">//</span>plotly<span class="sc">-</span>r.com<span class="sc">/</span>index.html</span>
<span id="cb312-3"><a href="Visualization-Tables-Figures.html#cb312-3" aria-hidden="true" tabindex="-1"></a><span class="do">### 交互式绘图的方法，是将静态图传递给ggplotly()</span></span>
<span id="cb312-4"><a href="Visualization-Tables-Figures.html#cb312-4" aria-hidden="true" tabindex="-1"></a>deaths_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> weekly_deaths)<span class="sc">+</span>            <span class="co"># begin with weekly deaths data</span></span>
<span id="cb312-5"><a href="Visualization-Tables-Figures.html#cb312-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> epiweek, <span class="at">y =</span> pct_death))  <span class="co"># make line </span></span>
<span id="cb312-6"><a href="Visualization-Tables-Figures.html#cb312-6" aria-hidden="true" tabindex="-1"></a>deaths_plot   <span class="co"># print</span></span>
<span id="cb312-7"><a href="Visualization-Tables-Figures.html#cb312-7" aria-hidden="true" tabindex="-1"></a>deaths_plot <span class="sc">%&gt;%</span> plotly<span class="sc">::</span><span class="fu">ggplotly</span>()</span>
<span id="cb312-8"><a href="Visualization-Tables-Figures.html#cb312-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb312-9"><a href="Visualization-Tables-Figures.html#cb312-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 常用交互式绘图的三件套：</span></span>
<span id="cb312-10"><a href="Visualization-Tables-Figures.html#cb312-10" aria-hidden="true" tabindex="-1"></a>metrics_plot <span class="sc">%&gt;%</span> </span>
<span id="cb312-11"><a href="Visualization-Tables-Figures.html#cb312-11" aria-hidden="true" tabindex="-1"></a>  plotly<span class="sc">::</span><span class="fu">ggplotly</span>() <span class="sc">%&gt;%</span>   <span class="do">## 对应R包指令；</span></span>
<span id="cb312-12"><a href="Visualization-Tables-Figures.html#cb312-12" aria-hidden="true" tabindex="-1"></a>  plotly<span class="sc">::</span><span class="fu">partial_bundle</span>() <span class="sc">%&gt;%</span>  <span class="do">## 抽取部分数据集展示；</span></span>
<span id="cb312-13"><a href="Visualization-Tables-Figures.html#cb312-13" aria-hidden="true" tabindex="-1"></a>  <span class="do">### 调整绘图展示参数；</span></span>
<span id="cb312-14"><a href="Visualization-Tables-Figures.html#cb312-14" aria-hidden="true" tabindex="-1"></a>  plotly<span class="sc">::</span><span class="fu">config</span>(<span class="at">displaylogo =</span> <span class="cn">FALSE</span>, <span class="at">modeBarButtonsToRemove =</span> plotly_buttons_remove)</span></code></pre></div>
</div>
<div id="ggvis-shiny" class="section level5 hasAnchor" number="7.2.6.4.2">
<h5><span class="header-section-number">7.2.6.4.2</span> ggvis-shiny<a href="Visualization-Tables-Figures.html#ggvis-shiny" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div id="ggvis-shiny-动态图" class="section level6 hasAnchor" number="7.2.6.4.2.1">
<h6><span class="header-section-number">7.2.6.4.2.1</span> 6.4.2.1 ggvis-shiny-动态图<a href="Visualization-Tables-Figures.html#ggvis-shiny-动态图" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<pre><code>ggvis VS ggplot2主要区别：http://ggvis.rstudio.com/ggplot2.html
ggplot→ggvis
geom→layer function
stat→compute function
aes→props
+→%&gt;%
ggvis目前不支持分面；
使用ggvis而不添加任何层类似于qplot。</code></pre>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="Visualization-Tables-Figures.html#cb314-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggvis)</span>
<span id="cb314-2"><a href="Visualization-Tables-Figures.html#cb314-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb314-3"><a href="Visualization-Tables-Figures.html#cb314-3" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span></span>
<span id="cb314-4"><a href="Visualization-Tables-Figures.html#cb314-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggvis</span>(<span class="sc">~</span>wt, <span class="sc">~</span>mpg) <span class="sc">%&gt;%</span></span>
<span id="cb314-5"><a href="Visualization-Tables-Figures.html#cb314-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layer_points</span>(<span class="at">fill =</span> <span class="sc">~</span><span class="fu">factor</span>(cyl),</span>
<span id="cb314-6"><a href="Visualization-Tables-Figures.html#cb314-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">size :=</span> <span class="dv">25</span>, <span class="at">shape :=</span> <span class="st">&quot;diamond&quot;</span>,</span>
<span id="cb314-7"><a href="Visualization-Tables-Figures.html#cb314-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">stroke :=</span> <span class="st">&quot;red&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb314-8"><a href="Visualization-Tables-Figures.html#cb314-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span></span>
<span id="cb314-9"><a href="Visualization-Tables-Figures.html#cb314-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layer_model_predictions</span>(<span class="at">model =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">TRUE</span>)</span>
<span id="cb314-10"><a href="Visualization-Tables-Figures.html#cb314-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb314-11"><a href="Visualization-Tables-Figures.html#cb314-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb314-12"><a href="Visualization-Tables-Figures.html#cb314-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 提供shiny-Bar来绘制R图的修改参数：</span></span>
<span id="cb314-13"><a href="Visualization-Tables-Figures.html#cb314-13" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span></span>
<span id="cb314-14"><a href="Visualization-Tables-Figures.html#cb314-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggvis</span>(<span class="sc">~</span>wt, <span class="sc">~</span>mpg,</span>
<span id="cb314-15"><a href="Visualization-Tables-Figures.html#cb314-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">size :=</span> <span class="fu">input_slider</span>(<span class="dv">10</span>, <span class="dv">100</span>),</span>
<span id="cb314-16"><a href="Visualization-Tables-Figures.html#cb314-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">opacity :=</span> <span class="fu">input_slider</span>(<span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb314-17"><a href="Visualization-Tables-Figures.html#cb314-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb314-18"><a href="Visualization-Tables-Figures.html#cb314-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layer_points</span>()</span>
<span id="cb314-19"><a href="Visualization-Tables-Figures.html#cb314-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb314-20"><a href="Visualization-Tables-Figures.html#cb314-20" aria-hidden="true" tabindex="-1"></a><span class="do">## 鼠标查看：</span></span>
<span id="cb314-21"><a href="Visualization-Tables-Figures.html#cb314-21" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> <span class="fu">ggvis</span>(<span class="sc">~</span>wt, <span class="sc">~</span>mpg) <span class="sc">%&gt;%</span></span>
<span id="cb314-22"><a href="Visualization-Tables-Figures.html#cb314-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layer_points</span>() <span class="sc">%&gt;%</span></span>
<span id="cb314-23"><a href="Visualization-Tables-Figures.html#cb314-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_tooltip</span>(<span class="cf">function</span>(df) df<span class="sc">$</span>wt)</span>
<span id="cb314-24"><a href="Visualization-Tables-Figures.html#cb314-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb314-25"><a href="Visualization-Tables-Figures.html#cb314-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb314-26"><a href="Visualization-Tables-Figures.html#cb314-26" aria-hidden="true" tabindex="-1"></a><span class="do">## 其他调整图层的shiny参数：</span></span>
<span id="cb314-27"><a href="Visualization-Tables-Figures.html#cb314-27" aria-hidden="true" tabindex="-1"></a>p <span class="sc">%&gt;%</span> <span class="fu">layer_points</span>(<span class="at">fill :=</span> <span class="st">&quot;red&quot;</span>, <span class="at">stroke :=</span> <span class="st">&quot;black&quot;</span>)</span>
<span id="cb314-28"><a href="Visualization-Tables-Figures.html#cb314-28" aria-hidden="true" tabindex="-1"></a>p <span class="sc">%&gt;%</span> <span class="fu">layer_points</span>(<span class="at">size :=</span> <span class="dv">300</span>, <span class="at">opacity :=</span> <span class="fl">0.4</span>)</span>
<span id="cb314-29"><a href="Visualization-Tables-Figures.html#cb314-29" aria-hidden="true" tabindex="-1"></a>p <span class="sc">%&gt;%</span> <span class="fu">layer_points</span>(<span class="at">shape :=</span> <span class="st">&quot;cross&quot;</span>)</span>
<span id="cb314-30"><a href="Visualization-Tables-Figures.html#cb314-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb314-31"><a href="Visualization-Tables-Figures.html#cb314-31" aria-hidden="true" tabindex="-1"></a><span class="do">## 参见资源；</span></span>
<span id="cb314-32"><a href="Visualization-Tables-Figures.html#cb314-32" aria-hidden="true" tabindex="-1"></a>https<span class="sc">:</span><span class="er">//</span>ggvis.rstudio.com<span class="sc">/</span>interactivity.html</span></code></pre></div>
</div>
<div id="ggvis-构造shiny" class="section level6 hasAnchor" number="7.2.6.4.2.2">
<h6><span class="header-section-number">7.2.6.4.2.2</span> 6.6.4.2.2 ggvis-构造shiny<a href="Visualization-Tables-Figures.html#ggvis-构造shiny" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="Visualization-Tables-Figures.html#cb315-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ui.R</span></span>
<span id="cb315-2"><a href="Visualization-Tables-Figures.html#cb315-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb315-3"><a href="Visualization-Tables-Figures.html#cb315-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb315-4"><a href="Visualization-Tables-Figures.html#cb315-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Define UI for miles per gallon application</span></span>
<span id="cb315-5"><a href="Visualization-Tables-Figures.html#cb315-5" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyUI</span>(<span class="fu">sidebarLayout</span>(</span>
<span id="cb315-6"><a href="Visualization-Tables-Figures.html#cb315-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sidebarPanel</span>(</span>
<span id="cb315-7"><a href="Visualization-Tables-Figures.html#cb315-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sliderInput</span>(<span class="st">&quot;size&quot;</span>, <span class="st">&quot;Area&quot;</span>, <span class="dv">10</span>, <span class="dv">1000</span>, <span class="dv">500</span>)</span>
<span id="cb315-8"><a href="Visualization-Tables-Figures.html#cb315-8" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb315-9"><a href="Visualization-Tables-Figures.html#cb315-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mainPanel</span>(</span>
<span id="cb315-10"><a href="Visualization-Tables-Figures.html#cb315-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">uiOutput</span>(<span class="st">&quot;ggvis_ui&quot;</span>),</span>
<span id="cb315-11"><a href="Visualization-Tables-Figures.html#cb315-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggvisOutput</span>(<span class="st">&quot;ggvis&quot;</span>)</span>
<span id="cb315-12"><a href="Visualization-Tables-Figures.html#cb315-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb315-13"><a href="Visualization-Tables-Figures.html#cb315-13" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb315-14"><a href="Visualization-Tables-Figures.html#cb315-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb315-15"><a href="Visualization-Tables-Figures.html#cb315-15" aria-hidden="true" tabindex="-1"></a><span class="co"># server.R</span></span>
<span id="cb315-16"><a href="Visualization-Tables-Figures.html#cb315-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb315-17"><a href="Visualization-Tables-Figures.html#cb315-17" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggvis)</span>
<span id="cb315-18"><a href="Visualization-Tables-Figures.html#cb315-18" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb315-19"><a href="Visualization-Tables-Figures.html#cb315-19" aria-hidden="true" tabindex="-1"></a>mpgData <span class="ot">&lt;-</span> mtcars</span>
<span id="cb315-20"><a href="Visualization-Tables-Figures.html#cb315-20" aria-hidden="true" tabindex="-1"></a>mpgData<span class="sc">$</span>am <span class="ot">&lt;-</span> <span class="fu">factor</span>(mpgData<span class="sc">$</span>am, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Automatic&quot;</span>, <span class="st">&quot;Manual&quot;</span>))</span>
<span id="cb315-21"><a href="Visualization-Tables-Figures.html#cb315-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Define server logic required to plot various variables against mpg</span></span>
<span id="cb315-22"><a href="Visualization-Tables-Figures.html#cb315-22" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyServer</span>(<span class="cf">function</span>(input, output) {</span>
<span id="cb315-23"><a href="Visualization-Tables-Figures.html#cb315-23" aria-hidden="true" tabindex="-1"></a>  input_size <span class="ot">&lt;-</span> <span class="fu">reactive</span>(input<span class="sc">$</span>size)</span>
<span id="cb315-24"><a href="Visualization-Tables-Figures.html#cb315-24" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb315-25"><a href="Visualization-Tables-Figures.html#cb315-25" aria-hidden="true" tabindex="-1"></a>  mtcars <span class="sc">%&gt;%</span></span>
<span id="cb315-26"><a href="Visualization-Tables-Figures.html#cb315-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggvis</span>(<span class="sc">~</span>disp, <span class="sc">~</span>mpg, <span class="at">size :=</span> input_size) <span class="sc">%&gt;%</span></span>
<span id="cb315-27"><a href="Visualization-Tables-Figures.html#cb315-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">layer_points</span>() <span class="sc">%&gt;%</span></span>
<span id="cb315-28"><a href="Visualization-Tables-Figures.html#cb315-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">bind_shiny</span>(<span class="st">&quot;ggvis&quot;</span>, <span class="st">&quot;ggvis_ui&quot;</span>)</span>
<span id="cb315-29"><a href="Visualization-Tables-Figures.html#cb315-29" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
</div>
</div>
<div id="highcharter-高级交互式" class="section level5 hasAnchor" number="7.2.6.4.3">
<h5><span class="header-section-number">7.2.6.4.3</span> highcharter-高级交互式<a href="Visualization-Tables-Figures.html#highcharter-高级交互式" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="Visualization-Tables-Figures.html#cb316-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(&quot;highcharter&quot;)</span></span>
<span id="cb316-2"><a href="Visualization-Tables-Figures.html#cb316-2" aria-hidden="true" tabindex="-1"></a><span class="do">## 参见网页：https://jkunst.com/highcharter/ 提供海量图层资源；</span></span>
<span id="cb316-3"><a href="Visualization-Tables-Figures.html#cb316-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 这个R包与ggplot2不同的地方在于使用管道夫进行添加图层；</span></span>
<span id="cb316-4"><a href="Visualization-Tables-Figures.html#cb316-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(highcharter)</span>
<span id="cb316-5"><a href="Visualization-Tables-Figures.html#cb316-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb316-6"><a href="Visualization-Tables-Figures.html#cb316-6" aria-hidden="true" tabindex="-1"></a><span class="co">#导入数据集</span></span>
<span id="cb316-7"><a href="Visualization-Tables-Figures.html#cb316-7" aria-hidden="true" tabindex="-1"></a>data<span class="ot">&lt;-</span><span class="fu">data.frame</span>(<span class="at">index =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>),</span>
<span id="cb316-8"><a href="Visualization-Tables-Figures.html#cb316-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">value =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">7</span>,<span class="dv">6</span>,<span class="dv">8</span>))</span>
<span id="cb316-9"><a href="Visualization-Tables-Figures.html#cb316-9" aria-hidden="true" tabindex="-1"></a>data</span>
<span id="cb316-10"><a href="Visualization-Tables-Figures.html#cb316-10" aria-hidden="true" tabindex="-1"></a><span class="co">#散点图1-普通散点图</span></span>
<span id="cb316-11"><a href="Visualization-Tables-Figures.html#cb316-11" aria-hidden="true" tabindex="-1"></a>data_point<span class="ot">&lt;-</span>data</span>
<span id="cb316-12"><a href="Visualization-Tables-Figures.html#cb316-12" aria-hidden="true" tabindex="-1"></a><span class="fu">hchart</span>(data_point,<span class="st">&quot;scatter&quot;</span>,<span class="fu">hcaes</span>(<span class="at">x =</span> <span class="st">&quot;index&quot;</span>,<span class="at">y =</span> <span class="st">&quot;value&quot;</span>))</span>
<span id="cb316-13"><a href="Visualization-Tables-Figures.html#cb316-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb316-14"><a href="Visualization-Tables-Figures.html#cb316-14" aria-hidden="true" tabindex="-1"></a><span class="co">#散点图3-设置坐标轴标题</span></span>
<span id="cb316-15"><a href="Visualization-Tables-Figures.html#cb316-15" aria-hidden="true" tabindex="-1"></a><span class="fu">hchart</span>(data_point,<span class="st">&quot;scatter&quot;</span>,<span class="fu">hcaes</span>(<span class="at">x =</span> <span class="st">&quot;index&quot;</span>,<span class="at">y =</span> <span class="st">&quot;value&quot;</span>))<span class="sc">%&gt;%</span></span>
<span id="cb316-16"><a href="Visualization-Tables-Figures.html#cb316-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_xAxis</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">&quot;x轴&quot;</span>))<span class="sc">%&gt;%</span></span>
<span id="cb316-17"><a href="Visualization-Tables-Figures.html#cb316-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hc_yAxis</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">&quot;y轴&quot;</span>))</span></code></pre></div>
</div>
</div>
</div>
<div id="医学分析图" class="section level3 hasAnchor" number="7.2.7">
<h3><span class="header-section-number">7.2.7</span> 医学分析图<a href="Visualization-Tables-Figures.html#医学分析图" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="jinseob2kim" class="section level4 hasAnchor" number="7.2.7.1">
<h4><span class="header-section-number">7.2.7.1</span> jinseob2kim<a href="Visualization-Tables-Figures.html#jinseob2kim" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<pre><code>## 数据资料：
(https://github.com/jinseob2kim/jskm/commits?author=jinseob2kim)

## R包开发目的：
## 优化生存曲线展示：
Kaplan-Meier Plot with ‘ggplot2’: ‘survfit’ and ‘svykm’ objects from ‘survival’ and ‘survey’ packages.</code></pre>
</div>
<div id="gg-km曲线" class="section level4 hasAnchor" number="7.2.7.2">
<h4><span class="header-section-number">7.2.7.2</span> gg-km曲线<a href="Visualization-Tables-Figures.html#gg-km曲线" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="Visualization-Tables-Figures.html#cb318-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Kaplan-Meier Survival Curve</span></span>
<span id="cb318-2"><a href="Visualization-Tables-Figures.html#cb318-2" aria-hidden="true" tabindex="-1"></a>KM <span class="ot">&lt;-</span> <span class="fu">ggsurvplot</span>(</span>
<span id="cb318-3"><a href="Visualization-Tables-Figures.html#cb318-3" aria-hidden="true" tabindex="-1"></a>  fit,</span>
<span id="cb318-4"><a href="Visualization-Tables-Figures.html#cb318-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb318-5"><a href="Visualization-Tables-Figures.html#cb318-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 添加内容</span></span>
<span id="cb318-6"><a href="Visualization-Tables-Figures.html#cb318-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">pval =</span> <span class="cn">TRUE</span>,</span>
<span id="cb318-7"><a href="Visualization-Tables-Figures.html#cb318-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">conf.int =</span> <span class="cn">TRUE</span>,</span>
<span id="cb318-8"><a href="Visualization-Tables-Figures.html#cb318-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">risk.table =</span> <span class="cn">TRUE</span>,</span>
<span id="cb318-9"><a href="Visualization-Tables-Figures.html#cb318-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">risk.table.col =</span> <span class="st">&quot;strata&quot;</span>,</span>
<span id="cb318-10"><a href="Visualization-Tables-Figures.html#cb318-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">linetype =</span> <span class="st">&quot;strata&quot;</span>,</span>
<span id="cb318-11"><a href="Visualization-Tables-Figures.html#cb318-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">fun =</span> <span class="st">&#39;event&#39;</span>,</span>
<span id="cb318-12"><a href="Visualization-Tables-Figures.html#cb318-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb318-13"><a href="Visualization-Tables-Figures.html#cb318-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 主题设置</span></span>
<span id="cb318-14"><a href="Visualization-Tables-Figures.html#cb318-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">&#39;#4f81bd&#39;</span>,<span class="st">&#39;#c0504d&#39;</span>),</span>
<span id="cb318-15"><a href="Visualization-Tables-Figures.html#cb318-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">ggtheme =</span> <span class="fu">theme_bw</span>(),</span>
<span id="cb318-16"><a href="Visualization-Tables-Figures.html#cb318-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb318-17"><a href="Visualization-Tables-Figures.html#cb318-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 横纵坐标设置</span></span>
<span id="cb318-18"><a href="Visualization-Tables-Figures.html#cb318-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">break.x.by =</span> <span class="dv">1</span>,</span>
<span id="cb318-19"><a href="Visualization-Tables-Figures.html#cb318-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">6</span>),</span>
<span id="cb318-20"><a href="Visualization-Tables-Figures.html#cb318-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.3</span>),</span>
<span id="cb318-21"><a href="Visualization-Tables-Figures.html#cb318-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb318-22"><a href="Visualization-Tables-Figures.html#cb318-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># labs设置</span></span>
<span id="cb318-23"><a href="Visualization-Tables-Figures.html#cb318-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.labs =</span> <span class="fu">c</span>(<span class="st">&quot;control group&quot;</span>,<span class="st">&quot;exposed group&quot;</span>), </span>
<span id="cb318-24"><a href="Visualization-Tables-Figures.html#cb318-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">xlab =</span> <span class="st">&quot;Months&quot;</span>,</span>
<span id="cb318-25"><a href="Visualization-Tables-Figures.html#cb318-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">ylab =</span> <span class="st">&quot;Cumulative incidence&quot;</span>,</span>
<span id="cb318-26"><a href="Visualization-Tables-Figures.html#cb318-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">&quot;Kaplan-Meier survival curve of *** (6 Months)&quot;</span></span>
<span id="cb318-27"><a href="Visualization-Tables-Figures.html#cb318-27" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb318-28"><a href="Visualization-Tables-Figures.html#cb318-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb318-29"><a href="Visualization-Tables-Figures.html#cb318-29" aria-hidden="true" tabindex="-1"></a>KM<span class="sc">$</span>plot <span class="ot">&lt;-</span> KM<span class="sc">$</span>plot<span class="sc">+</span></span>
<span id="cb318-30"><a href="Visualization-Tables-Figures.html#cb318-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb318-31"><a href="Visualization-Tables-Figures.html#cb318-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb318-32"><a href="Visualization-Tables-Figures.html#cb318-32" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>,</span>
<span id="cb318-33"><a href="Visualization-Tables-Figures.html#cb318-33" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">size =</span><span class="dv">0</span>),</span>
<span id="cb318-34"><a href="Visualization-Tables-Figures.html#cb318-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.999</span>,<span class="fl">0.999</span>),</span>
<span id="cb318-35"><a href="Visualization-Tables-Figures.html#cb318-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.justification =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb318-36"><a href="Visualization-Tables-Figures.html#cb318-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb318-37"><a href="Visualization-Tables-Figures.html#cb318-37" aria-hidden="true" tabindex="-1"></a>KM</span>
<span id="cb318-38"><a href="Visualization-Tables-Figures.html#cb318-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb318-39"><a href="Visualization-Tables-Figures.html#cb318-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Log Rank</span></span>
<span id="cb318-40"><a href="Visualization-Tables-Figures.html#cb318-40" aria-hidden="true" tabindex="-1"></a>p.val <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">-</span><span class="fu">pchisq</span>(fit<span class="sc">$</span>chisq,<span class="fu">length</span>(fit<span class="sc">$</span>n)<span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb318-41"><a href="Visualization-Tables-Figures.html#cb318-41" aria-hidden="true" tabindex="-1"></a>p.val</span></code></pre></div>
</div>
</div>
<div id="补充图形库" class="section level3 hasAnchor" number="7.2.8">
<h3><span class="header-section-number">7.2.8</span> 补充图形库<a href="Visualization-Tables-Figures.html#补充图形库" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="ggplot2的相关扩展" class="section level4 hasAnchor" number="7.2.8.1">
<h4><span class="header-section-number">7.2.8.1</span> ggplot2的相关扩展<a href="Visualization-Tables-Figures.html#ggplot2的相关扩展" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<pre><code>## 参见：提供了ggplot2出图的大量扩展：
https://exts.ggplot2.tidyverse.org/ggstance.html

## ggiraph  --使得图形交互性：
geom_bar_interactive
geom_boxplot_interactive
geom_histogram_interactive
geom_line_interactive
geom_map_interactive
geom_path_interactive
geom_point_interactive
geom_polygon_interactive
geom_rect_interactive
geom_segment_interactive
geom_text_interactive
geom_tile_interactive

## ggstance:
使得ggplot2的图形倒置；

## ggalt 
添加额外的坐标轴和设置；

## ggtech 、ggthemes
ggplot2 技术主题、比例和几何。

## gganimate -坑需要提供第一个对应的序列，比如时间序列；
gganimate 包装动画包以创建动画 ggplot2 绘图。

## ggradar -雷达图
有时候这个用于展示数据结构差异，还是挺有用的；或者汇总结果比较；

## ggridges包 
绘制山脊图

## ggsignif包
添加显著性统计P值

## ggstatsplot -添加P值和R平方；
自动化绘图：</code></pre>

</div>
</div>
</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="id_06-Model-release-and-application.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="Common-statistical-R-code.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/yihui/bookdown-chinese/edit/master/07-Visualization-Tables-Figures.Rmd",
"text": "编辑"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
